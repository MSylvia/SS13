<!doctype html>
<html>
	<head>
		<title>DMI TEST</title>
		<style>
			html {
				font-family: arial;
			}
		</style>
		<script src="/client/lib/pako_inflate.min.js"></script>
		<script src="/client/lib/dmi.js"></script>
	</head>
	<body>
		<h1>DMI TEST</h1>
		<canvas width="640" height="480"></canvas>
		<script>
			var canvas = document.querySelector("canvas");
			var ctx = canvas.getContext("2d");
			
			var last_step = Date.now();
			var tt = 0;
			
			function do_frame() {
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				
				DMI.draw(ctx,0,0,"icons/mob/AI.dmi","ai-holo-old",1,tt);
				DMI.draw(ctx,40,0,"icons/mob/AI.dmi","ai-holo-old",8,tt);
				DMI.draw(ctx,80,0,"icons/mob/AI.dmi","ai-holo-old",2,tt);
				DMI.draw(ctx,120,0,"icons/mob/AI.dmi","ai-holo-old",4,tt);
				
				DMI.draw(ctx,0,40,"icons/mob/AI.dmi","ai-empty",2,tt);
				DMI.draw(ctx,40,40,"icons/mob/AI.dmi","ai-banned",2,tt);
				DMI.draw(ctx,0,80,"icons/mob/AI.dmi","ai",2,tt);
				DMI.draw(ctx,40,80,"icons/mob/AI.dmi","ai_dead",2,tt);
				DMI.draw(ctx,0,120,"icons/mob/AI.dmi","ai-malf",2,tt);
				DMI.draw(ctx,40,120,"icons/mob/AI.dmi","ai-malf_dead",2,tt);
				DMI.draw(ctx,0,160,"icons/mob/AI.dmi","ai-clown2",2,tt);
				DMI.draw(ctx,40,160,"icons/mob/AI.dmi","ai-clown2_dead",2,tt);
				DMI.draw(ctx,0,200,"icons/mob/AI.dmi","ai-database",2,tt);
				DMI.draw(ctx,40,200,"icons/mob/AI.dmi","ai-database_dead",2,tt);
				DMI.draw(ctx,0,240,"icons/mob/AI.dmi","ai-glitchman",2,tt);
				DMI.draw(ctx,40,240,"icons/mob/AI.dmi","ai-glitchman_dead",2,tt);
				
				DMI.draw(ctx,80,40,"icons/obj/barsigns.dmi","thegreytide",2,tt);
				DMI.draw(ctx,80,80,"icons/obj/barsigns.dmi","honkednloaded",2,tt);
				DMI.draw(ctx,80,120,"icons/obj/barsigns.dmi","slipperyshots",2,tt);
				DMI.draw(ctx,80,160,"icons/obj/barsigns.dmi","thesingulo",2,tt);
				DMI.draw(ctx,80,200,"icons/obj/barsigns.dmi","thebark",2,tt);
				DMI.draw(ctx,80,240,"icons/obj/barsigns.dmi","empbarsign",2,tt);
				
				DMI.draw(ctx,160,0,"icons/obj/power.dmi","solar_panel",1,tt);
				DMI.draw(ctx,160,32,"icons/obj/power.dmi","solar_panel",9,tt);
				DMI.draw(ctx,160,64,"icons/obj/power.dmi","solar_panel",8,tt);
				DMI.draw(ctx,160,96,"icons/obj/power.dmi","solar_panel",10,tt);
				DMI.draw(ctx,160,128,"icons/obj/power.dmi","solar_panel",2,tt);
				DMI.draw(ctx,160,160,"icons/obj/power.dmi","solar_panel",6,tt);
				DMI.draw(ctx,160,192,"icons/obj/power.dmi","solar_panel",4,tt);
				DMI.draw(ctx,160,224,"icons/obj/power.dmi","solar_panel",5,tt);
				
				DMI.draw(ctx,200,0,"icons/obj/doors/Doorfire.dmi","door_opening",1,tt);
				DMI.draw(ctx,240,0,"icons/obj/doors/Doorfire.dmi","door_deny",1,tt);
				DMI.draw(ctx,200,40,"icons/obj/doors/DoorHazard.dmi","door_opening",1,tt);
				DMI.draw(ctx,240,40,"icons/obj/doors/DoorHazard.dmi","door_deny",1,tt);
				
				DMI.draw(ctx,200,80,"icons/obj/doors/Doorfire.dmi","aaaaaa",1,tt);
				DMI.draw(ctx,240,80,"icons/obj/doors/ddd.dmi","door_deny",1,tt);
				
				var now = Date.now();
				
				if (now>=last_step+100) {
					last_step = now;
					tt++;
				}
				
				requestAnimationFrame(do_frame);
			}
			
			requestAnimationFrame(do_frame);
		</script>
	</body>
</html>