// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Disease2_Effect_Elvis : Disease2_Effect {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Elvisism";
			this.stage = 3;
		}

		// Function from file: effect.dm
		public override void deactivate( Mob_Living mob = null, dynamic multiplier = null ) {
			
			if ( mob is Mob_Living_Carbon_Human ) {
				
				if ( Lang13.Bool( ((dynamic)mob).glasses ) && ((dynamic)mob).glasses is Obj_Item_Clothing_Glasses_Virussunglasses ) {
					((dynamic)mob).glasses.canremove = true;
					mob.u_equip( ((dynamic)mob).glasses, true );
				}
			}
			return;
		}

		// Function from file: effect.dm
		public override bool activate( Mob_Living mob = null, bool multiplier = false ) {
			Mob_Living H = null;
			Obj_Item_Clothing_Glasses_Virussunglasses virussunglasses = null;

			
			if ( !( mob is Mob_Living_Carbon ) ) {
				return false;
			}
			H = mob;
			virussunglasses = new Obj_Item_Clothing_Glasses_Virussunglasses();

			if ( Lang13.Bool( ((dynamic)H).glasses ) && !( ((dynamic)H).glasses is Obj_Item_Clothing_Glasses_Virussunglasses ) ) {
				mob.u_equip( ((dynamic)H).glasses, true );
				mob.equip_to_slot( virussunglasses, 9 );
			}
			mob.confused += 10;

			if ( Lang13.Bool( Rand13.Pick(new object [] { 0, 1 }) ) ) {
				mob.say( Rand13.Pick(new object [] { "Uh HUH!", "Thank you, Thank you very much...", "I ain't nothin' but a hound dog!", "Swing low, sweet chariot!" }) );
			} else {
				mob.emote( "me", 1, Rand13.Pick(new object [] { "curls his lip!", "gyrates his hips!", "thrusts his hips!" }) );
			}

			if ( H is Mob_Living_Carbon_Human ) {
				
				if ( ((dynamic)H).species.name == "Human" && !( ((dynamic)H).f_style == "Pompadour" ) ) {
					Task13.Schedule( 50, (Task13.Closure)(() => {
						((dynamic)H).h_style = "Pompadour";
						((dynamic)H).update_hair();
						return;
					}));
				}

				if ( ((dynamic)H).species.name == "Human" && !( ((dynamic)H).f_style == "Elvis Sideburns" ) ) {
					Task13.Schedule( 50, (Task13.Closure)(() => {
						((dynamic)H).f_style = "Elvis Sideburns";
						((dynamic)H).update_hair();
						return;
					}));
				}
			}
			return false;
		}

	}

}