// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class SurgeryStep_Generic : SurgeryStep {

		public bool painful = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.can_infect = true;
		}

		// Function from file: generic.dm
		public override int can_use( dynamic user = null, dynamic target = null, string target_zone = null, Obj_Item tool = null ) {
			dynamic affected = null;

			
			if ( target is Mob_Living_Carbon_Slime ) {
				return 0;
			}

			if ( target_zone == "eyes" ) {
				return 0;
			}

			if ( !GlobalFuncs.hasorgans( target ) ) {
				return 0;
			}
			affected = ((Mob_Living_Carbon_Human)target).get_organ( target_zone );

			if ( affected == null ) {
				return 0;
			}

			if ( Lang13.Bool( affected.status & 64 ) ) {
				return 0;
			}

			if ( target_zone == "head" && Lang13.Bool( target.species ) && Lang13.Bool( target.species.flags & 16384 ) ) {
				return 1;
			}

			if ( Lang13.Bool( affected.status & 128 ) ) {
				return 0;
			}

			if ( Lang13.Bool( affected.status & 4096 ) ) {
				return 0;
			}

			if ( !this.check_anesthesia( target ) && this.painful ) {
				return -1;
			}
			return 1;
		}

	}

}