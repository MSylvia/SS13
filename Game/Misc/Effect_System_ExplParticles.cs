// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Effect_System_ExplParticles : Effect_System {

		public int? number = 10;
		public dynamic location = null;
		public bool total_particles = false;

		// Function from file: explosion_particles.dm
		public void start(  ) {
			int? i = null;
			Obj_Effect_ExplParticles expl = null;
			dynamic direct = null;

			i = 0;
			i = 0;

			while (( i ??0) < ( this.number ??0)) {
				Task13.Schedule( 0, (Task13.Closure)(() => {
					expl = new Obj_Effect_ExplParticles( this.location );
					direct = Rand13.PickFromTable( GlobalVars.alldirs );
					i = 0;

					while (( i ??0) < Convert.ToDouble( Rand13.PickWeighted(new object [] { 612, 25, 1836, 50, 63083, 3, 65535, 200 }) )) {
						Task13.Sleep( 1 );
						Map13.Step( expl, Convert.ToInt32( direct ) );
						i++;
					}
					return;
				}));
				i++;
			}
			return;
		}

		// Function from file: explosion_particles.dm
		public void set_up( int? n = null, dynamic loca = null ) {
			n = n ?? 10;

			this.number = n;

			if ( loca is Tile ) {
				this.location = loca;
			} else {
				this.location = GlobalFuncs.get_turf( loca );
			}
			return;
		}

	}

}