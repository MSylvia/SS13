// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Spell_AoeTurf_Blink : Spell_AoeTurf {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Blink";
			this.desc = "This spell randomly teleports you a short distance.";
			this.school = "abjuration";
			this.charge_max = 20;
			this.spell_flags = 200;
			this.invocation = "none";
			this.inner_radius = 1;
			this.cooldown_min = 5;
			this.hud_state = "wiz_blink";
		}

		// Function from file: vgstation13.dme
		public override bool cast( ByTable targets = null, Mob user = null ) {
			dynamic T = null;
			dynamic starting = null;
			Effect_Effect_System_SmokeSpread smoke = null;

			
			if ( !( targets.len != 0 ) ) {
				return false;
			}
			T = Rand13.PickFromTable( targets );
			starting = GlobalFuncs.get_turf( user );

			if ( Lang13.Bool( T ) ) {
				
				if ( Lang13.Bool( user.locked_to ) ) {
					((Ent_Dynamic)user.locked_to).unlock_atom( user );
				}
				user.forceMove( T );
				smoke = new Effect_Effect_System_SmokeSpread();
				smoke.set_up( 3, 0, starting );
				smoke.start();
				smoke = new Effect_Effect_System_SmokeSpread();
				smoke.set_up( 3, 0, T );
				smoke.start();
			}
			return false;
		}

	}

}