// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Inventory : Game_Data {

		public ByTable slots = new ByTable();
		public bool volume = false;
		public bool currentWeight = false;
		public bool variableSlots = false;
		public Type slot_type = typeof(InventorySlot);
		public _Event on_item_added = new _Event();
		public _Event on_item_removed = new _Event();

		// Function from file: inventory.dm
		public void swap( dynamic slotIDA = null, dynamic slotIDB = null ) {
			InventorySlot A = null;
			InventorySlot B = null;
			dynamic O = null;

			A = this.slots[slotIDA];
			B = this.slots[slotIDB];
			O = A.clearContent();
			A.setContent( B.clearContent() );
			B.setContent( O );
			return;
		}

		// Function from file: inventory.dm
		public void removeSlot( dynamic S = null ) {
			this.slots.Remove( S );
			return;
		}

		// Function from file: inventory.dm
		public dynamic addSlot( Type slot_type = null ) {
			dynamic S = null;

			S = Lang13.Call( slot_type, this );
			this.slots.Add( S );
			S.ID = this.slots.len;
			return S;
		}

		// Function from file: inventory.dm
		public void removeItem( dynamic O = null ) {
			InventorySlot slot = null;

			slot = this.findObjectSlot( O );

			if ( slot != null ) {
				slot.clearContent();
			}
			return;
		}

		// Function from file: inventory.dm
		public InventorySlot findObjectSlot( dynamic O = null ) {
			InventorySlot S = null;

			
			foreach (dynamic _a in Lang13.Enumerate( this.slots, typeof(InventorySlot) )) {
				S = _a;
				

				if ( S.content == O ) {
					return S;
				}
			}
			return null;
		}

		// Function from file: inventory.dm
		public int addItem( dynamic O = null ) {
			dynamic found = null;
			InventorySlot S = null;

			
			foreach (dynamic _a in Lang13.Enumerate( this.slots, typeof(InventorySlot) )) {
				S = _a;
				

				if ( S.canAccept( O ) == true ) {
					found = S;
				}
			}

			if ( !Lang13.Bool( found ) && this.variableSlots ) {
				found = this.addSlot( this.slot_type );
			}

			if ( Lang13.Bool( found ) ) {
				((InventorySlot)found).setContent( O );
			}
			return found.ID;
		}

	}

}