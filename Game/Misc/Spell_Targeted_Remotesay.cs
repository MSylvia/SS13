// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Spell_Targeted_Remotesay : Spell_Targeted {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Project Mind";
			this.desc = "Speak into the minds of others.";
			this.panel = "Mutant Powers";
			this.charge_max = 50;
			this.range = -2;
			this.override_base = "genetic";
			this.hud_state = "gen_project";
			this.compatible_mobs = new ByTable(new object [] { typeof(Mob_Living_Carbon_Human) });
			this.mind_affecting = true;
		}

		// Function from file: powers.dm
		public override bool cast( ByTable targets = null, Mob user = null ) {
			dynamic say = null;
			Mob_Living_Carbon_Human target = null;
			Mob_Dead_Observer G = null;

			
			if ( !( targets != null ) || !( targets.len != 0 ) || !( user != null ) || !( user is Mob_Living_Carbon_Human ) ) {
				return false;
			}
			say = GlobalFuncs.stripped_input( user, "What do you wish to say?", "Project Mind" );

			if ( !Lang13.Bool( say ) ) {
				return false;
			}

			foreach (dynamic _b in Lang13.Enumerate( targets, typeof(Mob_Living_Carbon_Human) )) {
				target = _b;
				
				Interface13.Stat( null, target.mutations.Contains( 104 ) );

				if ( target is Mob_Living_Carbon_Human ) {
					target.show_message( "<span class='notice'>You hear " + user.real_name + "'s voice: " + say + "</span>" );
				} else {
					target.show_message( "<span class='notice'>You hear a voice that seems to echo around the room: " + say + "</span>" );
				}
				user.show_message( "<span class='notice'>You project your mind into " + target.real_name + ": " + say + "</span>" );

				foreach (dynamic _a in Lang13.Enumerate( GlobalVars.dead_mob_list, typeof(Mob_Dead_Observer) )) {
					G = _a;
					
					G.show_message( "<i>Telepathic message from <b>" + user + "</b> to <b>" + target + "</b>: " + say + "</i>" );
				}
			}
			return false;
		}

	}

}