// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class ArtifactEffect_Stun : ArtifactEffect {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.effecttype = "stun";
		}

		// Function from file: unknown_effect_stun.dm
		public ArtifactEffect_Stun ( dynamic location = null ) : base( (object)(location) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.effect_type = Convert.ToInt32( Rand13.Pick(new object [] { 2, 5 }) );
			return;
		}

		// Function from file: unknown_effect_stun.dm
		public override bool DoEffectPulse( dynamic holder = null ) {
			Mob_Living_Carbon C = null;
			double weakness = 0;

			
			if ( this.holder != null ) {
				
				foreach (dynamic _a in Lang13.Enumerate( Map13.FetchInRange( this.holder, this.effectrange ), typeof(Mob_Living_Carbon) )) {
					C = _a;
					
					weakness = GlobalFuncs.GetAnomalySusceptibility( C );

					if ( Rand13.PercentChance( ((int)( weakness * 100 )) ) ) {
						GlobalFuncs.to_chat( C, "<span class='warning'>A wave of energy overwhelms your senses!</span>" );
						C.weakened += weakness * 4;
						C.stuttering += weakness * 4;

						if ( Rand13.PercentChance( 10 ) ) {
							C.stunned += weakness;
						}
					}
				}
			}
			return false;
		}

		// Function from file: unknown_effect_stun.dm
		public override bool DoEffectAura( dynamic holder = null ) {
			Mob_Living_Carbon C = null;
			double weakness = 0;

			
			if ( this.holder != null ) {
				
				foreach (dynamic _a in Lang13.Enumerate( Map13.FetchInRange( this.holder, this.effectrange ), typeof(Mob_Living_Carbon) )) {
					C = _a;
					
					weakness = GlobalFuncs.GetAnomalySusceptibility( C );

					if ( Rand13.PercentChance( ((int)( weakness * 10 )) ) ) {
						GlobalFuncs.to_chat( C, "<span class='warning'>Your body goes numb for a moment.</span>" );
						C.weakened += 2;
						C.stuttering += 2;

						if ( Rand13.PercentChance( 10 ) ) {
							C.stunned += 1;
						}
					} else if ( Rand13.PercentChance( 10 ) ) {
						GlobalFuncs.to_chat( C, "<span class='warning'>You feel numb.</span>" );
					}
				}
			}
			return false;
		}

		// Function from file: unknown_effect_stun.dm
		public override bool DoEffectTouch( dynamic user = null ) {
			dynamic C = null;
			double weakness = 0;

			
			if ( Lang13.Bool( user ) && user is Mob_Living_Carbon ) {
				C = user;
				weakness = GlobalFuncs.GetAnomalySusceptibility( C );

				if ( Rand13.PercentChance( ((int)( weakness * 100 )) ) ) {
					GlobalFuncs.to_chat( C, "<span class='warning'>A powerful force overwhelms your consciousness.</span>" );
					C.weakened += weakness * 45;
					C.stuttering += weakness * 45;
					C.stunned += Rand13.Int( 1, 10 ) * weakness;
				}
			}
			return false;
		}

	}

}