// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Puddle : Game_Data {

		public ByTable liquid_objects = new ByTable();

		// Function from file: splash_simulation.dm
		public Puddle (  ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			GlobalVars.puddles.Add( this );
			return;
		}

		// Function from file: splash_simulation.dm
		public override void Del(  ) {
			Obj O = null;

			GlobalVars.puddles.Remove( this );

			foreach (dynamic _a in Lang13.Enumerate( this.liquid_objects, typeof(Obj) )) {
				O = _a;
				
				GlobalFuncs.qdel( O );
				O = null;
			}
			base.Del();
			return;
		}

		// Function from file: splash_simulation.dm
		public void process(  ) {
			Obj_Effect_Liquid L = null;
			Obj_Effect_Liquid L2 = null;

			
			foreach (dynamic _a in Lang13.Enumerate( this.liquid_objects, typeof(Obj_Effect_Liquid) )) {
				L = _a;
				
				L.spread();
			}

			foreach (dynamic _b in Lang13.Enumerate( this.liquid_objects, typeof(Obj_Effect_Liquid) )) {
				L2 = _b;
				
				L2.apply_calculated_effect();
			}

			if ( this.liquid_objects.len == 0 ) {
				GlobalFuncs.qdel( this );
			}
			return;
		}

	}

}