// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class TheftObjective : Game_Data {

		public string name = "";
		public dynamic typepath = typeof(Ent_Static);
		public ByTable protected_jobs = new ByTable();
		public ByTable areas = new ByTable();
		public bool flags = false;

		// Function from file: steal_items.dm
		public virtual bool? check_completion( Game_Data owner = null ) {
			ByTable all_items = null;
			dynamic area_type = null;
			Obj O = null;

			
			if ( owner != null && Lang13.Bool( ((dynamic)owner).current ) ) {
				all_items = new ByTable();

				if ( ((dynamic)owner).current is Mob_Living ) {
					all_items.Add( GlobalFuncs.get_contents_in_object( ((dynamic)owner).current ) );
				}

				foreach (dynamic _a in Lang13.Enumerate( this.areas )) {
					area_type = _a;
					
					all_items.Add( GlobalFuncs.get_contents_in_object( Lang13.FindObj( area_type ), typeof(Obj) ) );
				}

				foreach (dynamic _b in Lang13.Enumerate( all_items, typeof(Obj) )) {
					O = _b;
					

					if ( Lang13.Bool( this.typepath.IsInstanceOfType( O ) ) ) {
						
						if ( O is Obj_Item_Weapon_ReagentContainers_Hypospray_Autoinjector ) {
							continue;
						}

						if ( this.areas.len != 0 ) {
							
							if ( !GlobalFuncs.is_type_in_list( GlobalFuncs.get_area_master( O ), this.areas ) ) {
								continue;
							}
						}
						return true;
					}
				}
			}
			return false;
		}

		// Function from file: steal_items.dm
		public ByTable get_contents( Obj O = null ) {
			ByTable L = null;
			Obj S = null;
			Obj G = null;
			Obj D = null;

			L = new ByTable();

			if ( O is Obj_Item_Weapon_Storage ) {
				S = O;
				L.Add( ((Obj_Item_Weapon_Storage)S).return_inv() );
			} else if ( O is Obj_Item_Weapon_Gift ) {
				G = O;
				L.Add( ((dynamic)G).gift );

				if ( ((dynamic)G).gift is Obj_Item_Weapon_Storage ) {
					L.Add( this.get_contents( ((dynamic)G).gift ) );
				}
			} else if ( O is Obj_Item_Delivery ) {
				D = O;
				L.Add( ((dynamic)D).wrapped );

				if ( ((dynamic)D).wrapped is Obj_Item_Weapon_Storage ) {
					L.Add( this.get_contents( ((dynamic)D).wrapped ) );
				}
			}
			return L;
		}

	}

}