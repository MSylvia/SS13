// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Spell_AoeTurf_Knock : Spell_AoeTurf {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Knock";
			this.desc = "This spell opens nearby doors and does not require wizard garb.";
			this.school = "transmutation";
			this.spell_flags = 0;
			this.invocation = "AULIE OXIN FIERA";
			this.invocation_type = "whisper";
			this.range = 3;
			this.cooldown_min = 20;
			this.hud_state = "wiz_knock";
		}

		// Function from file: knock.dm
		public override bool cast( ByTable targets = null, Mob user = null ) {
			dynamic T = null;
			Obj_Machinery_Door door = null;
			Obj_Machinery_Door AL = null;

			
			foreach (dynamic _b in Lang13.Enumerate( targets )) {
				T = _b;
				

				foreach (dynamic _a in Lang13.Enumerate( T.contents, typeof(Obj_Machinery_Door) )) {
					door = _a;
					
					Task13.Schedule( 1, (Task13.Closure)(() => {
						
						if ( door is Obj_Machinery_Door_Airlock ) {
							AL = door;
							((dynamic)AL).locked = 0;
						}
						door.open();
						return;
					}));
				}
			}
			return false;
		}

	}

}