// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Effect_Effect_System_SteamSpread : Effect_Effect_System {

		// Function from file: effect_system.dm
		public override void start(  ) {
			int i = 0;
			Obj_Effect_Effect_Steam steam = null;
			dynamic direction = null;

			i = 0;
			i = 0;

			while (i < Convert.ToDouble( this.number )) {
				Task13.Schedule( 0, (Task13.Closure)(() => {
					
					if ( Lang13.Bool( this.holder ) ) {
						this.location = GlobalFuncs.get_turf( this.holder );
					}
					steam = new Obj_Effect_Effect_Steam( this.location );
					direction = null;

					if ( Lang13.Bool( this.cardinals ) ) {
						direction = Rand13.PickFromTable( GlobalVars.cardinal );
					} else {
						direction = Rand13.PickFromTable( GlobalVars.alldirs );
					}
					i = 0;

					while (i < Convert.ToDouble( Rand13.Pick(new object [] { 1, 2, 3 }) )) {
						Task13.Sleep( 5 );
						Map13.Step( steam, Convert.ToInt32( direction ) );
						i++;
					}
					Task13.Schedule( 20, (Task13.Closure)(() => {
						
						if ( steam != null ) {
							GlobalFuncs.qdel( steam );
						}
						return;
					}));
					return;
				}));
				i++;
			}
			return;
		}

		// Function from file: effect_system.dm
		public override void set_up( dynamic carry = null, dynamic n = null, dynamic c = null, dynamic loca = null, dynamic direct = null ) {
			carry = carry ?? 3;
			n = n ?? 0;

			
			if ( Convert.ToDouble( carry ) > 10 ) {
				carry = 10;
			}
			this.number = carry;
			this.cardinals = n;
			this.location = c;
			return;
		}

	}

}