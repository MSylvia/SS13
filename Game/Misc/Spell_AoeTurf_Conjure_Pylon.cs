// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Spell_AoeTurf_Conjure_Pylon : Spell_AoeTurf_Conjure {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Red Pylon";
			this.desc = "This spell conjures a fragile crystal from Nar-Sie's realm. Makes for a convenient light source.";
			this.charge_max = 200;
			this.spell_flags = 256;
			this.invocation = "none";
			this.summon_type = new ByTable(new object [] { typeof(Obj_Structure_Cult_Pylon) });
			this.hud_state = "const_pylon";
		}

		// Function from file: construct.dm
		public override bool cast( ByTable targets = null, Mob user = null ) {
			dynamic spawn_place = null;
			Obj_Structure_Cult_Pylon P = null;

			base.cast( targets, user );
			spawn_place = Rand13.PickFromTable( targets );

			foreach (dynamic _a in Lang13.Enumerate( spawn_place.contents, typeof(Obj_Structure_Cult_Pylon) )) {
				P = _a;
				

				if ( P.isbroken ) {
					P.repair( Task13.User );
				}
				continue;
			}
			return false;
		}

	}

}