// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class SurgeryStep_Limb : SurgeryStep {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.can_infect = true;
		}

		// Function from file: robolimbs.dm
		public override int can_use( dynamic user = null, dynamic target = null, string target_zone = null, Obj_Item tool = null ) {
			dynamic affected = null;

			
			if ( !GlobalFuncs.hasorgans( target ) ) {
				return 0;
			}
			affected = ((Mob_Living_Carbon_Human)target).get_organ( target_zone );

			if ( !Lang13.Bool( affected ) || affected.name == "head" ) {
				return 0;
			}

			if ( !Lang13.Bool( affected.status & 64 ) ) {
				return 0;
			}

			if ( Lang13.Bool( affected.parent ) ) {
				
				if ( Lang13.Bool( affected.parent.status & 64 ) ) {
					return 0;
				}
			}
			return 1;
		}

	}

}