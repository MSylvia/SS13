// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Disease2_Effect_Organs : Disease2_Effect {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Shutdown Syndrome";
		}

		// Function from file: effect.dm
		public override void deactivate( Mob_Living mob = null, dynamic multiplier = null ) {
			Mob_Living H = null;
			Organ_External E = null;
			Organ_External C = null;

			
			if ( mob is Mob_Living_Carbon_Human ) {
				H = mob;

				foreach (dynamic _b in Lang13.Enumerate( ((dynamic)H).organs, typeof(Organ_External) )) {
					E = _b;
					
					E.status &= 64511;

					foreach (dynamic _a in Lang13.Enumerate( E.children, typeof(Organ_External) )) {
						C = _a;
						
						C.status &= 64511;
					}
				}
				((Mob_Living_Carbon_Human)H).update_body( true );
			}
			return;
		}

		// Function from file: effect.dm
		public override bool activate( Mob_Living mob = null, bool multiplier = false ) {
			Mob_Living H = null;
			dynamic organ = null;
			dynamic E = null;
			Organ_External C = null;

			
			if ( mob is Mob_Living_Carbon_Human ) {
				H = mob;
				organ = Rand13.PickFromTable( new ByTable(new object [] { "r_arm", "l_arm", "r_leg", "r_leg" }) );
				E = ((dynamic)H).organs_by_name[organ];

				if ( !Lang13.Bool( E.status & 1024 ) ) {
					E.status |= 1024;
					GlobalFuncs.to_chat( H, "<span class='notice'>You can't feel your " + E.display_name + " anymore...</span>" );

					foreach (dynamic _a in Lang13.Enumerate( E.children, typeof(Organ_External) )) {
						C = _a;
						
						C.status |= 1024;
					}
				}
				((Mob_Living_Carbon_Human)H).update_body( true );

				if ( ( multiplier ?1:0) < 1 ) {
					multiplier = true;
				}
				H.adjustToxLoss( ( multiplier ?1:0) * 15 );
			}
			return false;
		}

	}

}