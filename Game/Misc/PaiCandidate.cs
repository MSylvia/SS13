// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class PaiCandidate : Game_Data {

		public dynamic name = null;
		public string key = null;
		public dynamic description = null;
		public dynamic role = null;
		public string comments = null;
		public bool ready = false;

		// Function from file: personality.dm
		public bool savefile_load( Mob user = null, bool? silent = null ) {
			silent = silent ?? true;

			string path = null;
			SaveFile F = null;
			bool? version = null;

			
			if ( GlobalFuncs.IsGuestKey( user.key ) ) {
				return false;
			}
			path = this.savefile_path( user );

			if ( !File13.Exists( path ) ) {
				return false;
			}
			F = new SaveFile( path );

			if ( !( F != null ) ) {
				return false;
			}
			version = null;
			version = F.ReadItem( "version", version );

			if ( version == null || version != true ) {
				File13.Delete( path );

				if ( !( silent == true ) ) {
					Interface13.Alert( user, "Your savefile was incompatible with this version and was deleted." );
				}
				return false;
			}
			this.name = F.ReadItem( "name", this.name );
			this.description = F.ReadItem( "description", this.description );
			this.role = F.ReadItem( "role", this.role );
			this.comments = F.ReadItem( "comments", this.comments );
			return true;
		}

		// Function from file: personality.dm
		public bool savefile_save( Mob user = null ) {
			SaveFile F = null;

			
			if ( GlobalFuncs.IsGuestKey( user.key ) ) {
				return false;
			}
			F = new SaveFile( this.savefile_path( user ) );
			F["name"] = this.name;
			F["description"] = this.description;
			F["role"] = this.role;
			F["comments"] = this.comments;
			F["version"] = 1;
			return true;
		}

		// Function from file: personality.dm
		public string savefile_path( Mob user = null ) {
			return "data/player_saves/" + String13.SubStr( user.ckey, 1, 2 ) + "/" + user.ckey + "/pai.sav";
		}

	}

}