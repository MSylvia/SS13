// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class UplinkItem_Badass_Random : UplinkItem_Badass {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Random Item";
			this.desc = "Picking this choice will send you a random item from the list. Useful for when you cannot think of a strategy to finish your objectives with.";
			this.item = typeof(Obj_Item_Weapon_Storage_Box_Syndicate);
		}

		// Function from file: uplink_item.dm
		public override dynamic spawn_item( dynamic loc = null, Ent_Static U = null, Mob user = null ) {
			ByTable buyable_items = null;
			ByTable possible_items = null;
			dynamic category = null;
			UplinkItem I = null;
			dynamic I2 = null;

			buyable_items = GlobalFuncs.get_uplink_items();
			possible_items = new ByTable();

			foreach (dynamic _b in Lang13.Enumerate( buyable_items )) {
				category = _b;
				

				foreach (dynamic _a in Lang13.Enumerate( buyable_items[category], typeof(UplinkItem) )) {
					I = _a;
					

					if ( I == this ) {
						continue;
					}

					if ( I.cost > Convert.ToDouble( ((dynamic)U).uses ) ) {
						continue;
					}
					possible_items.Add( I );
				}
			}

			if ( possible_items.len != 0 ) {
				I2 = Rand13.PickFromTable( possible_items );
				((dynamic)U).uses -= Num13.MaxInt( 0, Convert.ToInt32( I2.cost ) );
				GlobalFuncs.feedback_add_details( "traitor_uplink_items_bought", "RN" );
				return Lang13.Call( I2.item, loc );
			}
			return null;
		}

	}

}