// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class HSB : Game_Data {

		public string owner = null;
		public bool admin = false;

		// Function from file: h_sandbox.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hclient = null, HtmlInterface currui = null ) {
			Mob M = null;
			Mob P = null;
			Game_Data hsb = null;
			Obj_Item_Stack_Sheet_Glass_Glass hsb2 = null;
			Obj_Item_Stack_Sheet_Mineral_Plasma hsb3 = null;
			Obj_Item_Stack_Sheet_Mineral_Phazon hsb4 = null;
			dynamic hsbcanisters = null;
			dynamic hsbcanister = null;
			Obj_Item_Weapon_Storage_Toolbox_Mechanical hsb5 = null;
			Obj_Item_Device_Radio T = null;
			Obj_Item_Weapon_Storage_Firstaid_Regular hsb6 = null;

			
			if ( !( this.owner == Task13.User.ckey ) ) {
				return null;
			}

			if ( !( Task13.User != null ) ) {
				return null;
			}

			if ( Lang13.Bool( href_list["hsb"] ) ) {
				
				dynamic _b = href_list["hsb"]; // Was a switch-case, sorry for the mess.
				if ( _b=="revive" ) {
					
					if ( Task13.User is Mob_Living ) {
						M = Task13.User;
						((dynamic)M).revive();
					}
				} else if ( _b=="hsbtobj" ) {
					
					if ( !this.admin ) {
						return null;
					}

					if ( GlobalVars.hsboxspawn ) {
						GlobalFuncs.to_chat( typeof(Game13), "<b>Sandbox:  " + Task13.User.key + " has disabled object spawning!</b>" );
						GlobalVars.hsboxspawn = false;
						return null;
					}

					if ( !GlobalVars.hsboxspawn ) {
						GlobalFuncs.to_chat( typeof(Game13), "<b>Sandbox:  " + Task13.User.key + " has enabled object spawning!</b>" );
						GlobalVars.hsboxspawn = true;
						return null;
					}
				} else if ( _b=="hsbsuit" ) {
					P = Task13.User;

					if ( Lang13.Bool( ((dynamic)P).wear_suit ) ) {
						((dynamic)P).wear_suit.loc = P.loc;
						((dynamic)P).wear_suit.layer = Lang13.Initial( ((dynamic)P).wear_suit, "layer" );
						((dynamic)P).wear_suit = null;
					}
					((dynamic)P).wear_suit = new Obj_Item_Clothing_Suit_Space_Nasavoid( P );
					((dynamic)P).wear_suit.layer = 20;

					if ( Lang13.Bool( ((dynamic)P).head ) ) {
						((dynamic)P).head.loc = P.loc;
						((dynamic)P).head.layer = Lang13.Initial( ((dynamic)P).head, "layer" );
						((dynamic)P).head = null;
					}
					((dynamic)P).head = new Obj_Item_Clothing_Head_Helmet_Space_Nasavoid( P );
					((dynamic)P).head.layer = 20;

					if ( Lang13.Bool( P.wear_mask ) ) {
						P.wear_mask.loc = P.loc;
						P.wear_mask.layer = Lang13.Initial( P.wear_mask, "layer" );
						P.wear_mask = null;
					}
					P.wear_mask = new Obj_Item_Clothing_Mask_Gas( P );
					P.wear_mask.layer = 20;

					if ( Lang13.Bool( P.back ) ) {
						P.back.loc = P.loc;
						P.back.layer = Lang13.Initial( P.back, "layer" );
						P.back = null;
					}
					P.back = new Obj_Item_Weapon_Tank_Jetpack_Void( P );
					P.back.layer = 20;
					P.regenerate_icons();
				} else if ( _b=="hsbmetal" ) {
					hsb = GlobalFuncs.getFromPool( typeof(Obj_Item_Stack_Sheet_Metal), GlobalFuncs.get_turf( Task13.User ) );
					((dynamic)hsb).amount = 50;
					((dynamic)hsb).loc = Task13.User.loc;
				} else if ( _b=="hsbglass" ) {
					hsb2 = new Obj_Item_Stack_Sheet_Glass_Glass();
					hsb2.amount = 50;
					hsb2.loc = Task13.User.loc;
				} else if ( _b=="hsbplasma" ) {
					hsb3 = new Obj_Item_Stack_Sheet_Mineral_Plasma();
					hsb3.amount = 50;
					hsb3.loc = Task13.User.loc;
				} else if ( _b=="phazon" ) {
					hsb4 = new Obj_Item_Stack_Sheet_Mineral_Phazon();
					hsb4.amount = 50;
					hsb4.loc = Task13.User.loc;
				} else if ( _b=="hsbcanister" ) {
					hsbcanisters = Lang13.GetTypes( typeof(Obj_Machinery_PortableAtmospherics_Canister) ) - typeof(Obj_Machinery_PortableAtmospherics_Canister);
					hsbcanister = Interface13.Input( Task13.User, "Choose a canister to spawn.", "Sandbox:", null, hsbcanisters + "Cancel", InputType.Any );

					if ( !( hsbcanister == "Cancel" ) ) {
						Lang13.Call( hsbcanister, Task13.User.loc );
					}
				} else if ( _b=="hsbfueltank" ) {
					new Obj_Structure_ReagentDispensers_Fueltank( Task13.User.loc );
				} else if ( _b=="hsbwatertank" ) {
					new Obj_Structure_ReagentDispensers_Watertank( Task13.User.loc );
				} else if ( _b=="hsbtoolbox" ) {
					hsb5 = new Obj_Item_Weapon_Storage_Toolbox_Mechanical();

					foreach (dynamic _a in Lang13.Enumerate( hsb5, typeof(Obj_Item_Device_Radio) )) {
						T = _a;
						
						GlobalFuncs.qdel( T );
					}
					new Obj_Item_Weapon_Crowbar( hsb5 );
					hsb5.loc = Task13.User.loc;
				} else if ( _b=="hsbmedkit" ) {
					hsb6 = new Obj_Item_Weapon_Storage_Firstaid_Regular();
					hsb6.loc = Task13.User.loc;
				}
			}
			return null;
		}

		// Function from file: h_sandbox.dm
		public void update(  ) {
			string hsbpanel = null;
			dynamic T = null;

			hsbpanel = "<center><b>h_Sandbox Panel</b></center><hr>";

			if ( this.admin ) {
				hsbpanel += new Txt( "<b>Administration Tools:</b><br>\n					- <a href=\"?" ).Ref( this ).str( ";hsb=hsbtobj\">Toggle Object Spawning</a><br><br>" ).ToString();
			}
			hsbpanel += "<b>Regular Tools:</b><br>";

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.hrefs )) {
				T = _a;
				
				hsbpanel += new Txt( "- <a href=\"?" ).Ref( this ).str( ";hsb=" ).item( T ).str( "\">" ).item( GlobalVars.hrefs[T] ).str( "</a><br>" ).ToString();
			}

			if ( GlobalVars.hsboxspawn ) {
				hsbpanel += new Txt( "- <a href=\"?" ).Ref( this ).str( ";hsb=hsbobj\">Spawn Object</a><br><br>" ).ToString();
			}
			Interface13.Browse( Task13.User, hsbpanel, "window=hsbpanel" );
			return;
		}

	}

}