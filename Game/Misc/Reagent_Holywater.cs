// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Reagent_Holywater : Reagent {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Holy Water";
			this.id = "holywater";
			this.description = "An ashen-obsidian-water mix, this solution will alter certain sections of the brain's rationality.";
			this.reagent_state = 2;
			this.color = "#0064C8";
			this.custom_metabolism = 5;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool reaction_turf( dynamic T = null, double volume = 0 ) {
			
			if ( base.reaction_turf( (object)(T), volume ) ) {
				return true;
			}

			if ( volume >= 5 ) {
				T.holy = true;
			}
			return false;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool reaction_mob( dynamic M = null, int? method = null, double volume = 0 ) {
			method = method ?? GlobalVars.TOUCH;

			dynamic H = null;
			dynamic affecting = null;

			
			if ( base.reaction_mob( (object)(M), method, volume ) ) {
				return true;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;

				if ( GlobalVars.ticker.mode.vampires.Contains( H.mind ) || H.mind.vampire != null ) {
					
					if ( !H.mind.vampire.powers.Contains( 16 ) ) {
						
						if ( method == GlobalVars.TOUCH ) {
							
							if ( Lang13.Bool( H.wear_mask ) ) {
								GlobalFuncs.to_chat( H, "<span class='warning'>Your mask protects you from the holy water!</span>" );
								return false;
							}

							if ( Lang13.Bool( H.head ) ) {
								GlobalFuncs.to_chat( H, "<span class='warning'>Your helmet protects you from the holy water!</span>" );
								return false;
							}

							if ( !Lang13.Bool( H.unacidable ) ) {
								
								if ( Rand13.PercentChance( 15 ) && volume >= 30 ) {
									affecting = ((Mob_Living_Carbon_Human)H).get_organ( "head" );

									if ( Lang13.Bool( affecting ) ) {
										
										if ( !H.mind.vampire.powers.Contains( 13 ) ) {
											GlobalFuncs.to_chat( H, "<span class='danger'>A freezing liquid covers your face. Its melting!</span>" );
											H.mind.vampire.smitecounter += 60;

											if ( Lang13.Bool( affecting.take_damage( 30, 0 ) ) ) {
												((Mob_Living)H).UpdateDamageIcon( true );
											}
											H.status_flags |= 16384;
											((Mob)H).emote( "scream", null, null, true );
										} else {
											GlobalFuncs.to_chat( H, "<span class='warning'>A freezing liquid covers your face. Your vampiric powers protect you!</span>" );
											H.mind.vampire.smitecounter += 12;
										}
									}
								} else if ( !H.mind.vampire.powers.Contains( 13 ) ) {
									GlobalFuncs.to_chat( H, "<span class='danger'>You are doused with a freezing liquid. You're melting!</span>" );
									((Mob_Living)H).take_organ_damage( Num13.MinInt( 15, ((int)( volume * 2 )) ) );
									H.mind.vampire.smitecounter += volume * 2;
								} else {
									GlobalFuncs.to_chat( H, "<span class='warning'>You are doused with a freezing liquid. Your vampiric powers protect you!</span>" );
									H.mind.vampire.smitecounter += volume * 0.4;
								}
							}
						} else if ( !Lang13.Bool( H.unacidable ) ) {
							((Mob_Living)H).take_organ_damage( Num13.MinInt( 15, ((int)( volume * 2 )) ) );
							H.mind.vampire.smitecounter += 5;
						}
					}
				}
			}
			return false;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool on_mob_life( Mob_Living M = null, int? alien = null ) {
			Mob_Living H = null;

			
			if ( base.on_mob_life( M, alien ) ) {
				return true;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;

				if ( Lang13.Bool( GlobalVars.ticker.mode.cult.Contains( H.mind ) ) ) {
					
					if ( Rand13.PercentChance( 10 ) ) {
						((GameMode)GlobalVars.ticker.mode).remove_cultist( H.mind );
						H.visible_message( "<span class='notice'>" + H + " suddenly becomes calm and collected again, his eyes clear up.</span>", "<span class='notice'>Your blood cools down and you are inhabited by a sensation of untold calmness.</span>" );
					} else {
						GlobalFuncs.to_chat( H, "<span class='danger'>A freezing liquid permeates your bloodstream. Your arcane knowledge is becoming osbscure again.</span>" );
					}
				}

				if ( GlobalVars.ticker.mode.vampires.Contains( H.mind ) || H.mind.vampire != null ) {
					
					if ( !H.mind.vampire.powers.Contains( 13 ) ) {
						GlobalFuncs.to_chat( H, "<span class='danger'>A freezing liquid permeates your bloodstream. Your vampiric powers fade and your insides burn.</span>" );
						H.take_organ_damage( 0, 5 );
						H.mind.vampire.smitecounter += 10;
					} else {
						GlobalFuncs.to_chat( H, "<span class='warning'>A freezing liquid permeates your bloodstream. Your vampiric powers counter most of the damage.</span>" );
						H.mind.vampire.smitecounter += 2;
					}
				}
			}
			return false;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool reaction_obj( dynamic O = null, double volume = 0 ) {
			
			if ( base.reaction_obj( (object)(O), volume ) ) {
				return true;
			}

			if ( volume >= 1 ) {
				((Ent_Static)O).bless();
			}
			return false;
		}

	}

}