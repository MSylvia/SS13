// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Migration_Mysql_Ss13__004 : Migration_Mysql_Ss13 {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.id = 4;
			this.name = "Add IP to Sessions";
		}

		public Migration_Mysql_Ss13__004 ( dynamic mc = null ) : base( (object)(mc) ) {
			
		}

		// Function from file: 004-add-ip-to-sessions.dm
		public override bool? down(  ) {
			
			if ( Lang13.Bool( this.hasColumn( "admin_sessions", "IP" ) ) ) {
				return this.execute( "ALTER TABLE admin_sessions DROP COLUMN `IP`;" );
			} else {
				Game13.log.WriteMsg( "## WARNING: " + "IP column does not exist. Skipping drop." );
			}
			return GlobalVars.TRUE;
		}

		// Function from file: 004-add-ip-to-sessions.dm
		public override bool? up(  ) {
			
			if ( !Lang13.Bool( this.hasColumn( "admin_sessions", "IP" ) ) ) {
				return this.execute( "ALTER TABLE admin_sessions ADD COLUMN `IP` VARCHAR(255) DEFAULT NULL;" );
			} else {
				Game13.log.WriteMsg( "## WARNING: " + "IP column exists. Skipping addition." );
			}
			return GlobalVars.TRUE;
		}

	}

}