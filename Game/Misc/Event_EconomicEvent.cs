// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Event_EconomicEvent : Event {

		public dynamic event_type = 0;
		public ByTable cheaper_goods = new ByTable();
		public ByTable dearer_goods = new ByTable();
		public dynamic affected_dest = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.endWhen = 50;
			this.announceWhen = 15;
		}

		public Event_EconomicEvent ( Obj_Item_MechaParts_MechaEquipment_Tool_CableLayer tlistener = null, string tprocname = null ) : base( tlistener, tprocname ) {
			
		}

		// Function from file: Economy_Events.dm
		public override void end(  ) {
			dynamic good_type = null;
			dynamic good_type2 = null;

			
			foreach (dynamic _a in Lang13.Enumerate( this.dearer_goods )) {
				good_type = _a;
				
				this.affected_dest.temp_price_change[good_type] = 1;
			}

			foreach (dynamic _b in Lang13.Enumerate( this.cheaper_goods )) {
				good_type2 = _b;
				
				this.affected_dest.temp_price_change[good_type2] = 1;
			}
			return;
		}

		// Function from file: Economy_Events.dm
		public override void announce(  ) {
			FeedMessage newMsg = null;
			FeedChannel FC = null;
			Obj_Machinery_Newscaster NEWSCASTER = null;

			newMsg = new FeedMessage();
			newMsg.author = "Tau Ceti Daily";
			newMsg.is_admin_message = true;
			newMsg.body = ((TradeDestination)this.affected_dest).get_custom_eventstring();

			if ( !Lang13.Bool( newMsg.body ) ) {
				
				dynamic _a = this.event_type; // Was a switch-case, sorry for the mess.
				if ( _a==1 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "Riots have", "Unrest has" }) + " broken out on planet " + this.affected_dest.name + ". Authorities call for calm, as " + Rand13.Pick(new object [] { "various parties", "rebellious elements", "peacekeeping forces", "'REDACTED'" }) + " begin stockpiling weaponry and armour. Meanwhile, food and mineral prices are dropping as local industries attempt empty their stocks in expectation of looting.";
				} else if ( _a==2 ) {
					newMsg.body = "Local " + Rand13.Pick(new object [] { "wildlife", "animal life", "fauna" }) + " on planet " + this.affected_dest.name + " has been increasing in agression and raiding outlying settlements for food. Big game hunters have been called in to help alleviate the problem, but numerous injuries have already occurred.";
				} else if ( _a==3 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "An industrial accident", "A smelting accident", "A malfunction", "A malfunctioning piece of machinery", "Negligent maintenance", "A cooleant leak", "A ruptured conduit" }) + " at a " + Rand13.Pick(new object [] { "factory", "installation", "power plant", "dockyards" }) + " on " + this.affected_dest.name + " resulted in severe structural damage and numerous injuries. Repairs are ongoing.";
				} else if ( _a==4 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "A 'REDACTED'", "A biohazard", "An outbreak", "A virus" }) + " on " + this.affected_dest.name + " has resulted in quarantine, stopping much shipping in the area. Although the quarantine is now lifted, authorities are calling for deliveries of medical supplies to treat the infected, and gas to replace contaminated stocks.";
				} else if ( _a==6 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "Pirates", "Criminal elements", "A " + Rand13.Pick(new object [] { "Syndicate", "Donk Co.", "Waffle Co.", "'REDACTED'" }) + " strike force" }) + " have " + Rand13.Pick(new object [] { "raided", "blockaded", "attempted to blackmail", "attacked" }) + " " + this.affected_dest.name + " today. Security has been tightened, but many valuable minerals were taken.";
				} else if ( _a==7 ) {
					newMsg.body = "A small " + Rand13.Pick(new object [] { "pirate", "Cybersun Industries", "Gorlex Marauders", "Syndicate" }) + " fleet has precise-jumped into proximity with " + this.affected_dest.name + ", " + Rand13.Pick(new object [] { "for a smash-and-grab operation", "in a hit and run attack", "in an overt display of hostilities" }) + ". Much damage was done, and security has been tightened since the incident.";
				} else if ( _a==8 ) {
					
					if ( Rand13.PercentChance( 20 ) ) {
						newMsg.body = "The Tiger Co-operative have raided " + this.affected_dest.name + " today, no doubt on orders from their enigmatic masters. Stealing wildlife, farm animals, medical research materials and kidnapping civilians. Nanotrasen authorities are standing by to counter attempts at bio-terrorism.";
					} else {
						newMsg.body = "" + Rand13.Pick(new object [] { "The alien species designated 'United Exolitics'", "The alien species designated 'REDACTED'", "An unknown alien species" }) + " have raided " + this.affected_dest.name + " today, stealing wildlife, farm animals, medical research materials and kidnapping civilians. It seems they desire to learn more about us, so the Navy will be standing by to accomodate them next time they try.";
					}
				} else if ( _a==9 ) {
					newMsg.body = "A " + Rand13.Pick(new object [] { "'REDACTED' was detected on", "S.E.L.F operative infiltrated", "malignant computer virus was detected on", "rogue " + Rand13.Pick(new object [] { "slicer", "hacker" }) + " was apprehended on" }) + " " + this.affected_dest.name + " today, and managed to infect " + Rand13.Pick(new object [] { "'REDACTED'", "a sentient sub-system", "a class one AI", "a sentient defence installation" }) + " before it could be stopped. Many lives were lost as it systematically begin murdering civilians, and considerable work must be done to repair the affected areas.";
				} else if ( _a==10 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "The popular", "The well-liked", "The eminent", "The well-known" }) + " " + Rand13.Pick(new object [] { "professor", "entertainer", "singer", "researcher", "public servant", "administrator", "ship captain", "'REDACTED'" }) + ", " + Rand13.Pick(new object [] { GlobalFuncs.random_name( Rand13.Pick(new object [] { GlobalVars.MALE, GlobalVars.FEMALE }) ), "'REDACTED'" }) + " has " + Rand13.Pick(new object [] { "passed away", "committed suicide", "been murdered", "died in a freakish accident" }) + " on " + this.affected_dest.name + " today. The entire planet is in mourning, and prices have dropped for industrial goods as worker morale drops.";
				} else if ( _a==11 ) {
					newMsg.body = "A " + Rand13.Pick(new object [] { "dastardly", "blood-thirsty", "villanous", "crazed" }) + " cult of " + Rand13.Pick(new object [] { "The Elder Gods", "Nar'sie", "an apocalyptic sect", "'REDACTED'" }) + " has " + Rand13.Pick(new object [] { "been discovered", "been revealed", "revealed themselves", "gone public" }) + " on " + this.affected_dest.name + " earlier today. Public morale has been shaken due to " + Rand13.Pick(new object [] { "certain", "several", "one or two" }) + " " + Rand13.Pick(new object [] { "high-profile", "well known", "popular" }) + " individuals " + Rand13.Pick(new object [] { "performing 'REDACTED' acts", "claiming allegiance to the cult", "swearing loyalty to the cult leader", "promising to aid to the cult" }) + " before those involved could be brought to justice. The editor reminds all personnel that supernatural myths will not be tolerated on Nanotrasen facilities.";
				} else if ( _a==12 ) {
					newMsg.body = "There was " + Rand13.Pick(new object [] { "a security breach in", "an unauthorised access in", "an attempted theft in", "an anarchist attack in", "violent sabotage of" }) + " a " + Rand13.Pick(new object [] { "high-security", "restricted access", "classified", "'REDACTED'" }) + " " + Rand13.Pick(new object [] { "'REDACTED'", "section", "zone", "area" }) + " this morning. Security was tightened on " + this.affected_dest.name + " after the incident, and the editor reassures all Nanotrasen personnel that such lapses are rare.";
				} else if ( _a==13 ) {
					newMsg.body = "" + Rand13.Pick(new object [] { "Militant animal rights activists", "Members of the terrorist group Animal Rights Consortium", "Members of the terrorist group 'REDACTED'" }) + " have " + Rand13.Pick(new object [] { "launched a campaign of terror", "unleashed a swathe of destruction", "raided farms and pastures", "forced entry to 'REDACTED'" }) + " on " + this.affected_dest.name + " earlier today, freeing numerous " + Rand13.Pick(new object [] { "farm animals", "animals", "'REDACTED'" }) + ". Prices for tame and breeding animals have spiked as a result.";
				} else if ( _a==14 ) {
					newMsg.body = "A " + Rand13.Pick(new object [] { "festival", "week long celebration", "day of revelry", "planet-wide holiday" }) + " has been declared on " + this.affected_dest.name + " by " + Rand13.Pick(new object [] { "Governor", "Commissioner", "General", "Commandant", "Administrator" }) + " " + GlobalFuncs.random_name( Rand13.Pick(new object [] { GlobalVars.MALE, GlobalVars.FEMALE }) ) + " to celebrate " + Rand13.Pick(new object [] { "the birth of their " + Rand13.Pick(new object [] { "son", "daughter" }), "coming of age of their " + Rand13.Pick(new object [] { "son", "daughter" }), "the pacification of rogue military cell", "the apprehension of a violent criminal who had been terrorising the planet" }) + ". Massive stocks of food and meat have been bought driving up prices across the planet.";
				}
			}

			foreach (dynamic _b in Lang13.Enumerate( GlobalVars.news_network.network_channels, typeof(FeedChannel) )) {
				FC = _b;
				

				if ( FC.channel_name == "Tau Ceti Daily" ) {
					FC.messages.Add( newMsg );
					break;
				}
			}

			foreach (dynamic _c in Lang13.Enumerate( GlobalVars.allCasters, typeof(Obj_Machinery_Newscaster) )) {
				NEWSCASTER = _c;
				
				NEWSCASTER.newsAlert( "Tau Ceti Daily" );
			}
			return;
		}

		// Function from file: Economy_Events.dm
		public override bool start(  ) {
			dynamic good_type = null;
			dynamic good_type2 = null;

			
			if ( !GlobalVars.setup_economy ) {
				GlobalFuncs.setup_economy();
			}
			this.affected_dest = GlobalFuncs.pickweight( GlobalVars.weighted_randomevent_locations );

			if ( this.affected_dest.viable_random_events.len != 0 ) {
				this.endWhen = Rand13.Int( 60, 300 );
				this.event_type = Rand13.PickFromTable( this.affected_dest.viable_random_events );

				if ( !Lang13.Bool( this.event_type ) ) {
					return false;
				}

				dynamic _a = this.event_type; // Was a switch-case, sorry for the mess.
				if ( _a==1 ) {
					this.dearer_goods = new ByTable(new object [] { 4 });
					this.cheaper_goods = new ByTable(new object [] { 8, 6 });
				} else if ( _a==2 ) {
					this.cheaper_goods = new ByTable(new object [] { 7 });
					this.dearer_goods = new ByTable(new object [] { 6, 14 });
				} else if ( _a==3 ) {
					this.dearer_goods = new ByTable(new object [] { 9, 14, 13 });
				} else if ( _a==4 ) {
					this.dearer_goods = new ByTable(new object [] { 14, 10 });
				} else if ( _a==6 ) {
					this.dearer_goods = new ByTable(new object [] { 4, 8 });
				} else if ( _a==7 ) {
					this.dearer_goods = new ByTable(new object [] { 4, 11 });
				} else if ( _a==8 ) {
					this.dearer_goods = new ByTable(new object [] { 14, 7 });
					this.cheaper_goods = new ByTable(new object [] { 10, 8 });
				} else if ( _a==9 ) {
					this.dearer_goods = new ByTable(new object [] { 9, 10, 11 });
				} else if ( _a==10 ) {
					this.cheaper_goods = new ByTable(new object [] { 8, 11 });
				} else if ( _a==11 ) {
					this.dearer_goods = new ByTable(new object [] { 4, 14, 11 });
				} else if ( _a==12 ) {
					this.dearer_goods = new ByTable(new object [] { 4 });
				} else if ( _a==13 ) {
					this.dearer_goods = new ByTable(new object [] { 7 });
				} else if ( _a==14 ) {
					this.dearer_goods = new ByTable(new object [] { 6, 7 });
				}

				foreach (dynamic _b in Lang13.Enumerate( this.dearer_goods )) {
					good_type = _b;
					
					this.affected_dest.temp_price_change[good_type] = Rand13.Int( 1, 100 );
				}

				foreach (dynamic _c in Lang13.Enumerate( this.cheaper_goods )) {
					good_type2 = _c;
					
					this.affected_dest.temp_price_change[good_type2] = Rand13.Int( 1, 100 ) / 100;
				}
			}
			return false;
		}

	}

}