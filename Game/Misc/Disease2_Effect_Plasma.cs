// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Disease2_Effect_Plasma : Disease2_Effect {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Toxin Sublimation";
		}

		// Function from file: effect.dm
		public override bool activate( Mob_Living mob = null, bool multiplier = false ) {
			Ent_Static hack = null;
			dynamic T = null;
			GasMixture GM = null;

			hack = mob.loc;
			T = GlobalFuncs.get_turf( hack );

			if ( !Lang13.Bool( T ) ) {
				return false;
			}
			GM = new GasMixture();

			if ( Rand13.PercentChance( 10 ) ) {
				GM.toxins += 100;
				GlobalFuncs.to_chat( mob, "<span class='warning'>You exhale a large plume of toxic gas!</span>" );
			} else {
				GM.toxins += 10;
				GM.temperature = ( T is Tile_Simulated ? Convert.ToDouble( T.air.temperature ) : 293.41 );
				GlobalFuncs.to_chat( mob, "<span class = 'warning'> A toxic gas emanates from your pores!</span>" );
			}
			((Ent_Static)T).assume_air( GM );
			return false;
		}

	}

}