// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class ButcheringProduct_Teeth : ButcheringProduct {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.result = typeof(Obj_Item_Stack_Teeth);
			this.verb_name = "harvest teeth";
			this.verb_gerund = "removing teeth from";
			this.stored_in_organ = "head";
		}

		// Function from file: butchering.dm
		public override dynamic spawn_result( dynamic location = null, Mob_Living parent = null, int? drop_amount = null ) {
			drop_amount = drop_amount ?? -1;

			Obj_Item_Stack_Teeth T = null;
			int actual_amount = 0;

			
			if ( this.amount <= 0 ) {
				return null;
			}
			T = new Obj_Item_Stack_Teeth( location );
			T.update_name( parent );

			if ( drop_amount == -1 ) {
				T.amount = this.amount;
				this.amount = 0;
			} else {
				actual_amount = Num13.MinInt( this.amount, drop_amount ??0 );
				T.amount = actual_amount;
				this.amount -= actual_amount;
			}
			return T;
		}

		// Function from file: butchering.dm
		public override string desc_modifier( Obj parent = null, dynamic user = null ) {
			Obj L = null;
			Obj H = null;
			dynamic head = null;
			Base_Dynamic M = null;
			string pronoun = null;

			
			if ( this.amount == this.initial_amount ) {
				return null;
			}

			if ( !( parent is Mob_Living ) ) {
				return null;
			}
			L = parent;

			if ( L is Mob_Living_Carbon_Human ) {
				H = L;
				head = ((dynamic)H).get_organ( "head" );

				if ( Lang13.Bool( head.status & 64 ) || !Lang13.Bool( head ) ) {
					return null;
				}
				M = ((dynamic)H).wear_mask;

				if ( M is Obj_Item_Clothing_Mask && GlobalFuncs.is_slot_hidden( M, 4096 ) ) {
					return null;
				}
			}
			pronoun = "Its";

			if ( L.gender == GlobalVars.MALE ) {
				pronoun = "His";
			}

			if ( L.gender == GlobalVars.FEMALE ) {
				pronoun = "Her";
			}

			if ( this.amount == 0 ) {
				return "" + pronoun + " teeth are gone. ";
			} else if ( parent.Adjacent( user ) ) {
				return "" + ( this.initial_amount - this.amount ) + " of " + String13.ToLower( pronoun ) + " teeth are missing.";
			} else {
				return "Some of " + String13.ToLower( pronoun ) + " teeth are missing. ";
			}
			return null;
		}

	}

}