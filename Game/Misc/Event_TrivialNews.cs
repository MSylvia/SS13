// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Event_TrivialNews : Event {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.endWhen = 10;
		}

		public Event_TrivialNews ( Obj_Item_MechaParts_MechaEquipment_Tool_CableLayer tlistener = null, string tprocname = null ) : base( tlistener, tprocname ) {
			
		}

		// Function from file: Economy_Events_Mundane.dm
		public override void announce(  ) {
			FeedMessage newMsg = null;
			dynamic affected_dest = null;
			FeedChannel FC = null;
			Obj_Machinery_Newscaster NEWSCASTER = null;

			newMsg = new FeedMessage();
			newMsg.author = "Editor Mike Hammers";
			affected_dest = Rand13.PickFromTable( GlobalVars.weighted_mundaneevent_locations );
			newMsg.body = Rand13.PickFromTable( GlobalFuncs.file2list( "config/news/trivial.txt" ) );
			newMsg.body = GlobalFuncs.replacetext( newMsg.body, "{{AFFECTED}}", affected_dest.name );

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.news_network.network_channels, typeof(FeedChannel) )) {
				FC = _a;
				

				if ( FC.channel_name == "The Gibson Gazette" ) {
					FC.messages.Add( newMsg );
					break;
				}
			}

			foreach (dynamic _b in Lang13.Enumerate( GlobalVars.allCasters, typeof(Obj_Machinery_Newscaster) )) {
				NEWSCASTER = _b;
				
				NEWSCASTER.newsAlert( "The Gibson Gazette" );
			}
			return;
		}

	}

}