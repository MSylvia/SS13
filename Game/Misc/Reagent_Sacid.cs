// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Reagent_Sacid : Reagent {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Sulphuric acid";
			this.id = "sacid";
			this.description = "A strong mineral acid with the molecular formula H2SO4.";
			this.reagent_state = 2;
			this.color = "#DB5008";
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool reaction_obj( dynamic O = null, double volume = 0 ) {
			Obj_Effect_Decal_Cleanable_MoltenItem I = null;

			
			if ( base.reaction_obj( (object)(O), volume ) ) {
				return true;
			}

			if ( Lang13.Bool( O.unacidable ) ) {
				return false;
			}

			if ( ( O is Obj_Item || O is Obj_Effect_Glowshroom ) && Rand13.PercentChance( 10 ) ) {
				I = new Obj_Effect_Decal_Cleanable_MoltenItem( O.loc );
				I.desc = new Txt( "Looks like this was " ).a( O ).item().str( " some time ago." ).ToString();
				((Ent_Static)O).visible_message( new Txt( "<span class='warning'>" ).The( O ).item().str( " melts.</span>" ).ToString() );
				GlobalFuncs.qdel( O );
			}
			return false;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool reaction_mob( dynamic M = null, int? method = null, double volume = 0 ) {
			method = method ?? GlobalVars.TOUCH;

			dynamic H = null;
			dynamic MK = null;
			dynamic H2 = null;
			dynamic affecting = null;
			dynamic H3 = null;

			
			if ( base.reaction_mob( (object)(M), method, volume ) ) {
				return true;
			}

			if ( method == GlobalVars.TOUCH ) {
				
				if ( M is Mob_Living_Carbon_Human ) {
					H = M;

					if ( Lang13.Bool( H.wear_mask ) ) {
						
						if ( !Lang13.Bool( H.wear_mask.unacidable ) ) {
							GlobalFuncs.qdel( H.wear_mask );
							H.wear_mask = null;
							((Mob)H).update_inv_wear_mask();
							GlobalFuncs.to_chat( H, "<span class='warning'>Your mask melts away but protects you from the acid!</span>" );
						} else {
							GlobalFuncs.to_chat( H, "<span class='warning'>Your mask protects you from the acid!</span>" );
						}
						return false;
					}

					if ( Lang13.Bool( H.head ) && !( H.head is Obj_Item_Weapon_ReagentContainers_Glass_Bucket ) ) {
						
						if ( Rand13.PercentChance( 15 ) && !Lang13.Bool( H.head.unacidable ) ) {
							GlobalFuncs.qdel( H.head );
							H.head = null;
							((Mob)H).update_inv_head();
							GlobalFuncs.to_chat( H, "<span class='warning'>Your helmet melts away but protects you from the acid</span>" );
						} else {
							GlobalFuncs.to_chat( H, "<span class='warning'>Your helmet protects you from the acid!</span>" );
						}
						return false;
					}
				} else if ( M is Mob_Living_Carbon_Monkey ) {
					MK = M;

					if ( Lang13.Bool( MK.wear_mask ) ) {
						
						if ( !Lang13.Bool( MK.wear_mask.unacidable ) ) {
							GlobalFuncs.qdel( MK.wear_mask );
							MK.wear_mask = null;
							((Mob)MK).update_inv_wear_mask();
							GlobalFuncs.to_chat( MK, "<span class='warning'>Your mask melts away but protects you from the acid!</span>" );
						} else {
							GlobalFuncs.to_chat( MK, "<span class='warning'>Your mask protects you from the acid!</span>" );
						}
						return false;
					}
				}

				if ( !Lang13.Bool( M.unacidable ) ) {
					
					if ( Rand13.PercentChance( 15 ) && M is Mob_Living_Carbon_Human && volume >= 30 ) {
						H2 = M;

						if ( H2.species.name == "Grey" ) {
							return false;
						}
						affecting = ((Mob_Living_Carbon_Human)H2).get_organ( "head" );

						if ( Lang13.Bool( affecting ) ) {
							
							if ( Lang13.Bool( affecting.take_damage( 25, 0 ) ) ) {
								((Mob_Living)H2).UpdateDamageIcon( true );
							}
							H2.status_flags |= 16384;
							((Mob)H2).emote( "scream", null, null, true );
						}
					} else {
						((Mob_Living)M).take_organ_damage( Num13.MinInt( 15, ((int)( volume * 2 )) ) );
					}
				}
			} else if ( !Lang13.Bool( M.unacidable ) ) {
				
				if ( M is Mob_Living_Carbon_Human ) {
					H3 = M;

					if ( H3.species.name == "Grey" ) {
						return false;
					}
				}
				((Mob_Living)M).take_organ_damage( Num13.MinInt( 15, ((int)( volume * 2 )) ) );
			}
			return false;
		}

		// Function from file: Chemistry-Reagents.dm
		public override bool on_mob_life( Mob_Living M = null, int? alien = null ) {
			Mob_Living H = null;

			
			if ( base.on_mob_life( M, alien ) ) {
				return true;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;

				if ( ((dynamic)H).species.name == "Grey" ) {
					return false;
				}
			}
			M.adjustToxLoss( 0.5 );
			M.take_organ_damage( 0, 0.5 );
			return false;
		}

		// Function from file: hydroponics_reagents.dm
		public override void on_plant_life( Obj_Machinery_PortableAtmospherics_Hydroponics T = null ) {
			base.on_plant_life( T );
			T.toxins += 10;
			T.weedlevel -= 2;

			if ( T.seed != null && !T.dead ) {
				T.health -= 4;
			}
			return;
		}

	}

}