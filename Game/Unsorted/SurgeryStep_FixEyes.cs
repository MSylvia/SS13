// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class SurgeryStep_FixEyes : SurgeryStep {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "fix eyes";
			this.implements = new ByTable().Set( typeof(Obj_Item_Weapon_Hemostat), 100 ).Set( typeof(Obj_Item_Weapon_Screwdriver), 45 ).Set( typeof(Obj_Item_Weapon_Pen), 25 );
			this.time = 64;
		}

		// Function from file: eye_surgery.dm
		public override bool failure( dynamic user = null, Mob target = null, string target_zone = null, dynamic tool = null, Surgery surgery = null ) {
			
			if ( Lang13.Bool( target.getorgan( typeof(Obj_Item_Organ_Internal_Brain) ) ) ) {
				((Ent_Static)user).visible_message( "<span class='warning'>" + user + " accidentally stabs " + target + " right in the brain!</span>", "<span class='warning'>You accidentally stab " + target + " right in the brain!</span>" );
				((dynamic)target).adjustBrainLoss( 100 );
			} else {
				((Ent_Static)user).visible_message( "<span class='warning'>" + user + " accidentally stabs " + target + " right in the brain! Or would have, if " + target + " had a brain.</span>", "<span class='warning'>You accidentally stab " + target + " right in the brain! Or would have, if " + target + " had a brain.</span>" );
			}
			return false;
		}

		// Function from file: eye_surgery.dm
		public override bool success( dynamic user = null, Mob target = null, string target_zone = null, dynamic tool = null, Surgery surgery = null ) {
			((Ent_Static)user).visible_message( "" + user + " successfully fixes " + target + "'s eyes!", "<span class='notice'>You succeed in fixing " + target + "'s eyes.</span>" );
			target.cure_blind();
			target.set_blindness( 0 );
			target.cure_nearsighted();
			target.blur_eyes( 35 );
			target.set_eye_damage( 0 );
			return true;
		}

		// Function from file: eye_surgery.dm
		public override int preop( dynamic user = null, Mob target = null, string target_zone = null, dynamic tool = null, Surgery surgery = null ) {
			((Ent_Static)user).visible_message( "" + user + " begins to fix " + target + "'s eyes.", "<span class='notice'>You begin to fix " + target + "'s eyes...</span>" );
			return 0;
		}

	}

}