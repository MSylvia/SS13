// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Reagent_Drug_Krokodil : Reagent_Drug {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Krokodil";
			this.id = "krokodil";
			this.description = "Cools and calms you down. If overdosed it will deal significant Brain and Toxin damage. If addicted it will begin to deal fatal amounts of Brute damage as the subject's skin falls off.";
			this.color = "#60A584";
			this.overdose_threshold = 20;
			this.addiction_threshold = 15;
		}

		// Function from file: drug_reagents.dm
		public override void addiction_act_stage4( dynamic M = null ) {
			
			if ( Lang13.Bool( M.has_dna() ) && M.dna.species.id != "zombie" ) {
				M.WriteMsg( "<span class='userdanger'>Your skin falls off easily!</span>" );
				((Mob_Living)M).adjustBruteLoss( 50 );
				((Mob)M).set_species( typeof(Species_CosmeticZombie) );
			} else {
				((Mob_Living)M).adjustBruteLoss( 5 );
			}
			base.addiction_act_stage4( (object)(M) );
			return;
		}

		// Function from file: drug_reagents.dm
		public override void addiction_act_stage3( dynamic M = null ) {
			
			if ( Rand13.PercentChance( 25 ) ) {
				M.WriteMsg( "<span class='danger'>Your skin starts to peel away...</span>" );
			}
			((Mob_Living)M).adjustBruteLoss( 3 );
			base.addiction_act_stage3( (object)(M) );
			return;
		}

		// Function from file: drug_reagents.dm
		public override void addiction_act_stage1( dynamic M = null ) {
			((Mob_Living)M).adjustBrainLoss( 2 );
			((Mob_Living)M).adjustToxLoss( 2 );
			base.addiction_act_stage1( (object)(M) );
			return;
		}

		// Function from file: drug_reagents.dm
		public override void overdose_process( dynamic M = null ) {
			((Mob_Living)M).adjustBrainLoss( 0.25 );
			((Mob_Living)M).adjustToxLoss( 0.25 );
			base.overdose_process( (object)(M) );
			return;
		}

		// Function from file: drug_reagents.dm
		public override bool on_mob_life( dynamic M = null ) {
			dynamic high_message = null;

			high_message = Rand13.Pick(new object [] { "You feel calm.", "You feel collected.", "You feel like you need to relax." });

			if ( Rand13.PercentChance( 5 ) ) {
				M.WriteMsg( "<span class='notice'>" + high_message + "</span>" );
			}
			base.on_mob_life( (object)(M) );
			return false;
		}

	}

}