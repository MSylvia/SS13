// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Species_Jelly : Species {

		public bool recently_changed = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Xenobiological Jelly Entity";
			this.id = "jelly";
			this.default_color = "00FF90";
			this.say_mod = "chirps";
			this.eyes = "jelleyes";
			this.specflags = new ByTable(new object [] { 1, 8, 1024, 4096 });
			this.meat = typeof(Obj_Item_Weapon_ReagentContainers_Food_Snacks_Meat_Slab_Human_Mutant_Slime);
			this.exotic_blood = typeof(Reagent_Toxin_Slimejelly);
		}

		// Function from file: species_types.dm
		public override bool handle_chemicals( dynamic chem = null, Mob_Living H = null ) {
			
			if ( chem.id == "slimejelly" ) {
				return true;
			}
			return false;
		}

		// Function from file: species_types.dm
		public override void spec_life( Mob_Living H = null ) {
			Reagent_Toxin_Slimejelly S = null;

			
			if ( H.stat == 2 ) {
				return;
			}

			if ( !H.reagents.get_reagent_amount( "slimejelly" ) ) {
				
				if ( this.recently_changed ) {
					H.reagents.add_reagent( "slimejelly", 80 );
					this.recently_changed = false;
				} else {
					H.reagents.add_reagent( "slimejelly", 5 );
					H.adjustBruteLoss( 5 );
					H.WriteMsg( "<span class='danger'>You feel empty!</span>" );
				}
			}

			foreach (dynamic _a in Lang13.Enumerate( H.reagents.reagent_list, typeof(Reagent_Toxin_Slimejelly) )) {
				S = _a;
				

				if ( S.volume < 100 ) {
					
					if ( H.nutrition >= 150 ) {
						H.reagents.add_reagent( "slimejelly", 0.5 );
						H.nutrition -= 2.5;
					}
				}

				if ( S.volume < 50 ) {
					
					if ( Rand13.PercentChance( 5 ) ) {
						H.WriteMsg( "<span class='danger'>You feel drained!</span>" );
					}
				}

				if ( S.volume < 10 ) {
					H.losebreath++;
				}
			}
			return;
		}

	}

}