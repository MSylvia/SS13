// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class RoundEvent_Blob : RoundEvent {

		public dynamic new_rate = 2;
		public Obj_Effect_Blob_Core Blob = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.announceWhen = 12;
			this.endWhen = 120;
		}

		// Function from file: blob.dm
		public RoundEvent_Blob ( dynamic strength = null ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;

			if ( Lang13.Bool( strength ) ) {
				this.new_rate = strength;
			}
			return;
		}

		// Function from file: blob.dm
		public override void tick(  ) {
			
			if ( !( this.Blob != null ) ) {
				this.kill();
				return;
			}

			if ( GlobalFuncs.IsMultiple( this.activeFor, 3 ) ) {
				this.Blob.process();
			}
			return;
		}

		// Function from file: blob.dm
		public override bool start(  ) {
			dynamic T = null;
			int? i = null;

			T = Rand13.PickFromTable( GlobalVars.blobstart );

			if ( !Lang13.Bool( T ) ) {
				this.kill(); return false;
			}
			this.Blob = new Obj_Effect_Blob_Core( T, 200, null, this.new_rate );
			i = null;
			i = 1;

			while (( i ??0) < Rand13.Int( 3, 6 )) {
				this.Blob.process();
				i++;
			}
			return false;
		}

		// Function from file: blob.dm
		public override void announce(  ) {
			GlobalFuncs.priority_announce( "Confirmed outbreak of level 5 biohazard aboard " + GlobalFuncs.station_name() + ". All personnel must contain the outbreak.", "Biohazard Alert", "sound/AI/outbreak5.ogg" );
			return;
		}

	}

}