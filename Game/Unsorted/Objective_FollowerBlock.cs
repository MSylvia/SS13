// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Objective_FollowerBlock : Objective {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.explanation_text = "Do not allow any followers of the false god to escape on the station's shuttle alive.";
			this.dangerrating = 25;
			this.martyr_compatible = true;
		}

		public Objective_FollowerBlock ( string text = null ) : base( text ) {
			
		}

		// Function from file: objectives.dm
		public override int check_completion(  ) {
			string side = null;
			dynamic A = null;
			Mob_Living player = null;

			side = "ABORT";

			if ( GlobalFuncs.is_handofgod_redcultist( this.owner.current ) ) {
				side = "red";
			} else if ( GlobalFuncs.is_handofgod_bluecultist( this.owner.current ) ) {
				side = "blue";
			}

			if ( side == "ABORT" ) {
				return 0;
			}
			A = GlobalVars.SSshuttle.emergency.areaInstance;

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.player_list, typeof(Mob_Living) )) {
				player = _a;
				

				if ( player.mind != null && player.stat != 2 && GlobalFuncs.get_area( player ) == A ) {
					
					if ( side == "red" ) {
						
						if ( GlobalFuncs.is_handofgod_bluecultist( player ) ) {
							return 0;
						}
					} else if ( side == "blue" ) {
						
						if ( GlobalFuncs.is_handofgod_redcultist( player ) ) {
							return 0;
						}
					}
				}
			}
			return 1;
		}

	}

}