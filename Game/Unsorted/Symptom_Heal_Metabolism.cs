// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Symptom_Heal_Metabolism : Symptom_Heal {

		public ByTable cured_diseases = new ByTable();

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Anti-Bodies Metabolism";
			this.stealth = -1;
			this.resistance = -1;
			this.stage_speed = -1;
			this.level = 3;
		}

		// Function from file: heal.dm
		public override void End( Disease_Advance A = null ) {
			dynamic M = null;
			dynamic res = null;

			M = A.affected_mob;

			if ( M is Mob_Living ) {
				
				if ( this.cured_diseases.len != 0 ) {
					
					foreach (dynamic _a in Lang13.Enumerate( M.resistances )) {
						res = _a;
						

						if ( this.cured_diseases.Contains( res ) ) {
							M.resistances.Remove( res );
						}
					}
				}
				M.WriteMsg( "<span class='warning'>You feel weaker.</span>" );
			}
			return;
		}

		// Function from file: heal.dm
		public override bool Heal( dynamic M = null, Disease_Advance A = null ) {
			bool cured = false;
			Disease D = null;

			cured = false;

			foreach (dynamic _a in Lang13.Enumerate( M.viruses, typeof(Disease) )) {
				D = _a;
				

				if ( D != A ) {
					cured = true;
					this.cured_diseases.Add( D.GetDiseaseID() );
					D.cure();
				}
			}

			if ( cured ) {
				M.WriteMsg( "<span class='notice'>You feel much better.</span>" );
			}
			return false;
		}

	}

}