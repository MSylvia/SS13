// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class RoundEvent_Wizard_Deprevolt : RoundEvent_Wizard {

		// Function from file: departmentrevolt.dm
		public override bool start(  ) {
			dynamic tidecolor = null;
			ByTable jobs_to_revolt = null;
			dynamic nation = null;
			ByTable citizens = null;
			Mob_Living_Carbon_Human H = null;
			Mind M = null;
			dynamic job = null;
			dynamic message = null;
			dynamic job2 = null;

			jobs_to_revolt = new ByTable();
			citizens = new ByTable();
			tidecolor = Rand13.Pick(new object [] { "grey", "white", "yellow", "purple", "brown", "whatevercolorrepresentstheservicepeople" });

			dynamic _a = tidecolor; // Was a switch-case, sorry for the mess.
			if ( _a=="grey" ) {
				jobs_to_revolt = new ByTable(new object [] { "Assistant" });
				nation = Rand13.Pick(new object [] { "Assa", "Mainte", "Tunnel", "Gris", "Grey", "Liath", "Grigio", "Ass", "Assi" });
			} else if ( _a=="white" ) {
				jobs_to_revolt = new ByTable(new object [] { "Chief Medical Officer", "Medical Doctor", "Chemist", "Geneticist", "Virologist" });
				nation = Rand13.Pick(new object [] { "Mede", "Healtha", "Recova", "Chemi", "Geneti", "Viro", "Psych" });
			} else if ( _a=="yellow" ) {
				jobs_to_revolt = new ByTable(new object [] { "Chief Engineer", "Station Engineer", "Atmospheric Technician" });
				nation = Rand13.Pick(new object [] { "Atomo", "Engino", "Power", "Teleco" });
			} else if ( _a=="purple" ) {
				jobs_to_revolt = new ByTable(new object [] { "Research Director", "Scientist", "Roboticist" });
				nation = Rand13.Pick(new object [] { "Sci", "Griffa", "Explosi", "Mecha", "Xeno" });
			} else if ( _a=="brown" ) {
				jobs_to_revolt = new ByTable(new object [] { "Quartermaster", "Cargo Technician", "Shaft Miner" });
				nation = Rand13.Pick(new object [] { "Cargo", "Guna", "Suppli", "Mule", "Crate", "Ore", "Mini", "Shaf" });
			} else if ( _a=="whatevercolorrepresentstheservicepeople" ) {
				jobs_to_revolt = new ByTable(new object [] { "Bartender", "Cook", "Botanist", "Clown", "Mime", "Janitor", "Chaplain" });
				nation = Rand13.Pick(new object [] { "Honka", "Boozo", "Fatu", "Danka", "Mimi", "Libra", "Jani", "Religi" });
			}
			nation += Rand13.Pick(new object [] { "stan", "topia", "land", "nia", "ca", "tova", "dor", "ador", "tia", "sia", "ano", "tica", "tide", "cis", "marea", "co", "taoide", "slavia", "stotzka" });

			foreach (dynamic _c in Lang13.Enumerate( GlobalVars.mob_list, typeof(Mob_Living_Carbon_Human) )) {
				H = _c;
				

				if ( H.mind != null ) {
					M = H.mind;

					if ( Lang13.Bool( M.assigned_role ) && !GlobalVars.ticker.mode.traitors.Contains( M ) ) {
						
						foreach (dynamic _b in Lang13.Enumerate( jobs_to_revolt )) {
							job = _b;
							

							if ( M.assigned_role == job ) {
								citizens.Add( H );
								GlobalVars.ticker.mode.traitors.Add( M );
								M.special_role = "separatist";
								H.attack_log.Add( "[" + GlobalFuncs.time_stamp() + "] <font color='red'>Was made into a separatist, long live " + nation + "!</font>" );
								H.WriteMsg( "<B>You are a separatist! " + nation + " forever! Protect the soverignty of your newfound land with your comrades in arms!</B>" );
							}
						}
					}
				}
			}

			if ( citizens.len != 0 ) {
				message = null;

				foreach (dynamic _d in Lang13.Enumerate( jobs_to_revolt )) {
					job2 = _d;
					
					message += "" + job2 + ",";
				}
				GlobalFuncs.message_admins( "The nation of " + nation + " has been formed. Affected jobs are " + message );
			}
			return false;
		}

	}

}