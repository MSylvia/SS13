// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Lighter_Zippo : Obj_Item_Weapon_Lighter {

		public ByTable open_sound = new ByTable(new object [] { "sound/items/zippo_open.ogg" });
		public ByTable close_sound = new ByTable(new object [] { "sound/items/zippo_close.ogg" });

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "zippo";
			this.fuel = 100;
			this.icon_state = "zippo";
		}

		public Obj_Item_Weapon_Lighter_Zippo ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: cigs_lighters.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			((Mob)user).delayNextAttack( 5 );

			if ( !( this.fuel != 0 ) ) {
				((Ent_Static)user).visible_message( new Txt( "<span class='rose'>" ).item( user ).str( " attempts to light " ).the( this ).item().str( " to no avail.</span>" ).ToString(), new Txt( "<span class='notice'>" ).The( this ).item().str( " doesn't have enough fuel to ignite</span>" ).ToString() );
				return null;
			}
			this.lit = !this.lit;

			if ( this.lit ) {
				GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), Rand13.PickFromTable( this.open_sound ), 50, 1 );
				((Ent_Static)user).visible_message( new Txt( "<span class='rose'>Without even breaking stride, " ).item( user ).str( " flips open and lights " ).the( this ).item().str( " in one smooth movement.</span>" ).ToString(), new Txt( "<span class='rose'>Without even breaking stride, you flip open and light " ).the( this ).item().str( " in one smooth movement.</span>" ).ToString() );
				this.fuel--;
			} else {
				this.fueltime = null;
				GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), Rand13.PickFromTable( this.close_sound ), 50, 1 );
				((Ent_Static)user).visible_message( new Txt( "<span class='rose'>You hear a quiet click as " ).item( user ).str( " shuts off " ).the( this ).item().str( " without even looking at what they're doing. Wow.</span>" ).ToString(), new Txt( "<span class='rose'>You hear a quiet click as you shut off " ).the( this ).item().str( " without even looking at what you are doing.</span>" ).ToString() );
			}
			this.update_brightness();
			return null;
		}

	}

}