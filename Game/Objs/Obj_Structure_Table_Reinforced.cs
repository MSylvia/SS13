// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Table_Reinforced : Obj_Structure_Table {

		public int status = 2;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.parts = typeof(Obj_Item_Weapon_TableParts_Reinforced);
			this.icon_state = "reinftable";
		}

		public Obj_Structure_Table_Reinforced ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: tables_racks.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			Obj_Machinery_Optable OPT = null;
			dynamic SM = null;
			dynamic WT = null;

			
			if ( a is Obj_Item_Weapon_StockParts_ScanningModule ) {
				GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/items/Deconstruct.ogg", 50, 1 );

				if ( GlobalFuncs.do_after( b, this, 40 ) ) {
					
					if ( Lang13.Bool( b.drop_item( a ) ) ) {
						OPT = new Obj_Machinery_Optable( this.loc );
						SM = a;
						OPT.rating = Lang13.Bool( SM.rating );
						GlobalFuncs.qdel( a );
						GlobalFuncs.qdel( this );
						return null;
					} else {
						b.WriteMsg( new Txt( "<span class='warning'>" ).The( a ).item().str( " is stuck to your hands!</span>" ).ToString() );
						return null;
					}
				}
			} else if ( a is Obj_Item_Weapon_Weldingtool ) {
				WT = a;

				if ( !WT.welding ) {
					return base.attackby( (object)(a), (object)(b), (object)(c) );
				}

				if ( Lang13.Bool( WT.remove_fuel( 0, b ) ) ) {
					
					if ( this.status == 2 ) {
						GlobalFuncs.to_chat( b, "<span class='notice'>Now weakening the reinforced table.</span>" );
						GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/items/welder.ogg", 50, 1 );

						if ( GlobalFuncs.do_after( b, this, 50 ) ) {
							
							if ( !( this != null ) || !((Obj_Item_Weapon_Weldingtool)WT).isOn() ) {
								return null;
							}
							GlobalFuncs.to_chat( b, "<span class='notice'>Table weakened.</span>" );
							this.status = 1;
						}
					} else {
						GlobalFuncs.to_chat( b, "<span class='notice'>Now strengthening the reinforced table.</span>" );
						GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/items/welder.ogg", 50, 1 );

						if ( GlobalFuncs.do_after( b, this, 50 ) ) {
							
							if ( !( this != null ) || !((Obj_Item_Weapon_Weldingtool)WT).isOn() ) {
								return null;
							}
							GlobalFuncs.to_chat( b, "<span class='notice'>Table strengthened.</span>" );
							this.status = 2;
						}
					}
					return null;
				}
				return null;
			}
			return base.attackby( (object)(a), (object)(b), (object)(c) );
		}

		// Function from file: tables_racks.dm
		public override bool flip( int direction = 0 ) {
			
			if ( this.status == 2 ) {
				return false;
			} else {
				return base.flip( direction );
			}
		}

		// Function from file: tables_racks.dm
		public override bool can_disassemble(  ) {
			return this.status != 2;
		}

	}

}