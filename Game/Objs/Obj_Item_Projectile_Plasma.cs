// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Projectile_Plasma : Obj_Item_Projectile {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.damage = 5;
			this.range = 3;
			this.icon_state = "plasmacutter";
		}

		// Function from file: special.dm
		public Obj_Item_Projectile_Plasma ( dynamic loc = null ) : base( (object)(loc) ) {
			dynamic proj_turf = null;
			GasMixture environment = null;
			double pressure = 0;

			proj_turf = GlobalFuncs.get_turf( this );

			if ( !( proj_turf is Tile ) ) {
				return;
			}
			environment = ((Ent_Static)proj_turf).return_air();

			if ( environment != null ) {
				pressure = environment.return_pressure();

				if ( pressure < 30 ) {
					this.name = "full strength plasma blast";
					this.damage *= 3;
				}
			}
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			return;
		}

		// Function from file: special.dm
		public override dynamic on_hit( Ent_Static target = null, double? blocked = null, dynamic hit_zone = null ) {
			dynamic _default = null;

			Ent_Static M = null;

			_default = base.on_hit( target, blocked, (object)(hit_zone) );

			if ( target is Tile_Simulated_Mineral ) {
				M = target;
				((dynamic)M).gets_drilled( this.firer );
				this.range = Num13.MaxInt( this.range - 1, 1 );
				return -1;
			}
			return _default;
		}

	}

}