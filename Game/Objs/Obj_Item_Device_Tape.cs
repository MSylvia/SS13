// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Device_Tape : Obj_Item_Device {

		public int max_capacity = 600;
		public int used_capacity = 0;
		public ByTable storedinfo = new ByTable();
		public ByTable timestamp = new ByTable();
		public bool ruined = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "analyzer";
			this.w_class = 1;
			this.materials = new ByTable().Set( "$metal", 20 ).Set( "$glass", 5 );
			this.force = 1;
			this.icon_state = "tape_white";
		}

		public Obj_Item_Device_Tape ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: taperecorder.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			
			if ( this.ruined && A is Obj_Item_Weapon_Screwdriver ) {
				user.WriteMsg( "<span class='notice'>You start winding the tape back in...</span>" );

				if ( GlobalFuncs.do_after( user, 120 / A.toolspeed, null, this ) ) {
					user.WriteMsg( "<span class='notice'>You wound the tape back in.</span>" );
					this.fix();
				}
			}
			return null;
		}

		// Function from file: taperecorder.dm
		public void fix(  ) {
			this.overlays.Remove( "ribbonoverlay" );
			this.ruined = false;
			return;
		}

		// Function from file: taperecorder.dm
		public void ruin(  ) {
			this.overlays.Add( "ribbonoverlay" );
			this.ruined = true;
			return;
		}

		// Function from file: taperecorder.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( !this.ruined ) {
				user.WriteMsg( "<span class='notice'>You pull out all the tape!</span>" );
				this.ruin();
			}
			return null;
		}

		// Function from file: taperecorder.dm
		public override bool fire_act( bool? air = null, dynamic exposed_temperature = null, double? exposed_volume = null ) {
			this.ruin();
			return false;
		}

	}

}