// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Map_Spawner : Obj_Map {

		public int amount = 1;
		public int chance = 100;
		public int jiggle = 0;
		public dynamic toSpawn = new ByTable();

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon = "icons/obj/map/spawners.dmi";
		}

		// Function from file: spawners.dm
		public Obj_Map_Spawner ( dynamic loc = null ) : base( (object)(loc) ) {
			dynamic spawned = null;

			
			while (this.amount != 0) {
				
				if ( Rand13.PercentChance( this.chance ) ) {
					spawned = Rand13.PickFromTable( this.toSpawn );
					spawned = Lang13.Call( spawned, this.loc );

					if ( this.jiggle != 0 ) {
						spawned.pixel_x = Rand13.Int( -this.jiggle, this.jiggle );
						spawned.pixel_y = Rand13.Int( -this.jiggle, this.jiggle );
					}
				}
				this.amount--;
			}
			GlobalFuncs.qdel( this );
			return;
		}

	}

}