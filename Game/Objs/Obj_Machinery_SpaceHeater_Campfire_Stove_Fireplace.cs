// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_SpaceHeater_Campfire_Stove_Fireplace : Obj_Machinery_SpaceHeater_Campfire_Stove {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.pixel_x = -16;
			this.pixel_y = 16;
			this.base_state = "fireplace";
			this.light_power_on = 0.8;
			this.icon = "icons/obj/fireplace.dmi";
			this.icon_state = "fireplace";
		}

		public Obj_Machinery_SpaceHeater_Campfire_Stove_Fireplace ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: spaceheater.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			int light_r = 0;
			int fireintensity = 0;
			Obj W = null;

			this.overlays.len = 0;
			light_r = 0;

			if ( this.on ) {
				fireintensity = Num13.MinInt( Convert.ToInt32( GlobalFuncs.Floor( ( this.cell.charge - 1 ) / ( this.cell.maxcharge / 4 ) ) + 1 ), 4 );

				if ( Convert.ToDouble( this.cell.charge ) > 150 ) {
					this.overlays.Add( new Image( this.icon, "fireplace_glow", 11 ) );
				}

				dynamic _a = this.cell.charge; // Was a switch-case, sorry for the mess.
				if ( 15<=_a&&_a<=149 ) {
					this.overlays.Add( new Image( this.icon, "fireplace_fire0", 11 ) );
				} else if ( 150<=_a&&_a<=249 ) {
					this.overlays.Add( new Image( this.icon, "fireplace_fire1", 11 ) );
				} else if ( 250<=_a&&_a<=499 ) {
					this.overlays.Add( new Image( this.icon, "fireplace_fire2", 11 ) );
				} else if ( 500<=_a&&_a<=749 ) {
					this.overlays.Add( new Image( this.icon, "fireplace_fire3", 11 ) );
				} else if ( 750<=_a&&_a<=Double.PositiveInfinity ) {
					this.overlays.Add( new Image( this.icon, "fireplace_fire4", 11 ) );
				}
				light_r = Num13.MaxInt( ((int)( 1.1 )), Convert.ToInt32( this.cell.charge / 100 ) );
				this.set_temperature = fireintensity * 5 + 15;
			}
			this.set_light( ( this.on ? light_r : 0 ), this.light_power_on );

			foreach (dynamic _b in Lang13.Enumerate( this.contents, typeof(Obj) )) {
				W = _b;
				

				if ( W is Obj_Item_Clothing_Shoes ) {
					this.overlays.Add( new Image( this.icon, "fireplace_stocking" ) );
				}
			}
			return null;
		}

		// Function from file: spaceheater.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			bool shoesfound = false;
			Obj W = null;

			shoesfound = false;

			foreach (dynamic _a in Lang13.Enumerate( this.contents, typeof(Obj) )) {
				W = _a;
				

				if ( W is Obj_Item_Clothing_Shoes ) {
					shoesfound = true;
				}
			}

			if ( a is Obj_Item_Clothing_Shoes && !shoesfound ) {
				b.drop_item( a, this );
				this.update_icon();
			} else {
				base.attackby( (object)(a), (object)(b), (object)(c) );
			}
			return null;
		}

	}

}