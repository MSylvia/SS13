// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Filingcabinet_Security : Obj_Structure_Filingcabinet {

		public bool virgin = true;

		public Obj_Structure_Filingcabinet_Security ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: filingcabinet.dm
		public override dynamic attack_hand( dynamic a = null, dynamic b = null, dynamic c = null ) {
			Data_Record G = null;
			Data_Record S = null;
			Data_Record R = null;
			Obj_Item_Weapon_Paper P = null;
			int counter = 0;

			
			if ( this.virgin ) {
				
				foreach (dynamic _b in Lang13.Enumerate( GlobalVars.data_core.general, typeof(Data_Record) )) {
					G = _b;
					
					S = null;

					foreach (dynamic _a in Lang13.Enumerate( GlobalVars.data_core.security, typeof(Data_Record) )) {
						R = _a;
						

						if ( R.fields["name"] == G.fields["name"] || R.fields["id"] == G.fields["id"] ) {
							S = R;
							break;
						}
					}
					P = new Obj_Item_Weapon_Paper( this );
					P.info = "<CENTER><B>Security Record</B></CENTER><BR>\n				Name: " + G.fields["name"] + " ID: " + G.fields["id"] + "<BR>\nSex: " + G.fields["sex"] + "<BR>\nAge: " + G.fields["age"] + "<BR>\nFingerprint: " + G.fields["fingerprint"] + "<BR>\nPhysical Status: " + G.fields["p_stat"] + "<BR>\nMental Status: " + G.fields["m_stat"] + "<BR>\n				<BR>\n<CENTER><B>Security Data</B></CENTER><BR>\nCriminal Status: " + S.fields["criminal"] + "<BR>\n<BR>\nMinor Crimes: " + S.fields["mi_crim"] + "<BR>\nDetails: " + S.fields["mi_crim_d"] + "<BR>\n<BR>\nMajor Crimes: " + S.fields["ma_crim"] + "<BR>\nDetails: " + S.fields["ma_crim_d"] + "<BR>\n<BR>\nImportant Notes:<BR>\n	" + S.fields["notes"] + "<BR>\n<BR>\n<CENTER><B>Comments/Log</B></CENTER><BR>";
					counter = 1;

					while (Lang13.Bool( S.fields["com_" + counter] )) {
						P.info += "" + S.fields["com_" + counter] + "<BR>";
						counter++;
					}
					P.info += "</TT>";
					P.name = "paper - '" + G.fields["name"] + "'";
					this.virgin = false;
				}
			}
			base.attack_hand( (object)(a), (object)(b), (object)(c) );
			return null;
		}

	}

}