// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Overlay_Beam : Obj_Effect_Overlay {

		public Ent_Static BeamSource = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon = "icons/effects/beam.dmi";
			this.icon_state = "b_beam";
			this.layer = 13;
		}

		// Function from file: overlays.dm
		public Obj_Effect_Overlay_Beam ( dynamic loc = null, int? lifetime = null, bool? fade = null, string src_icon = null ) : base( (object)(loc) ) {
			lifetime = lifetime ?? 10;
			fade = fade ?? false;
			src_icon = src_icon ?? "icons/effects/beam.dmi";

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.icon = src_icon;
			Task13.Schedule( 0, (Task13.Closure)(() => {
				
				if ( fade == true ) {
					Icon13.Animate( new ByTable().Set( 1, this ).Set( "alpha", 0 ).Set( "time", lifetime ) );
				}
				return;
			}));
			Task13.Schedule( lifetime ??0, (Task13.Closure)(() => {
				GlobalFuncs.returnToPool( this );
				return;
			}));
			return;
		}

	}

}