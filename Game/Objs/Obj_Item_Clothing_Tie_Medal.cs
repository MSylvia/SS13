// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Tie_Medal : Obj_Item_Clothing_Tie {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_color = "bronze";
			this.materials = new ByTable().Set( "$metal", 1000 );
			this.icon_state = "bronze";
		}

		public Obj_Item_Clothing_Tie_Medal ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: ties.dm
		public override bool attack( dynamic M = null, dynamic user = null, bool? def_zone = null ) {
			dynamic U = null;

			
			if ( M is Mob_Living_Carbon_Human && user.a_intent == "help" ) {
				
				if ( Lang13.Bool( M.wear_suit ) ) {
					
					if ( ( ( M.wear_suit.flags_inv ??0) & 4 ) != 0 ) {
						user.WriteMsg( "<span class='warning'>Medals can only be pinned on jumpsuits.</span>" );
						return false;
					}
				}

				if ( Lang13.Bool( M.w_uniform ) ) {
					U = M.w_uniform;

					if ( ((Obj_Item_Clothing_Under)U).attachTie( this, user, false ) ) {
						
						if ( user == M ) {
							user.WriteMsg( "<span class='notice'>You attach " + this + " to " + U + ".</span>" );
						} else {
							((Ent_Static)user).visible_message( new Txt().item( user ).str( " pins " ).the( this ).item().str( " on " ).item( M ).str( "'s chest." ).ToString(), new Txt( "<span class='notice'>You pin " ).the( this ).item().str( " on " ).item( M ).str( "'s chest.</span>" ).ToString() );
						}
					}
				} else {
					user.WriteMsg( "<span class='warning'>Medals can only be pinned on jumpsuits!</span>" );
				}
			} else {
				base.attack( (object)(M), (object)(user), def_zone );
			}
			return false;
		}

	}

}