// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_DroneShell : Obj_Item {

		public Type drone_type = typeof(Mob_Living_SimpleAnimal_Drone);

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "programming=2;biotech=4";
			this.icon = "icons/mob/drone.dmi";
			this.icon_state = "drone_maint_hat";
		}

		// Function from file: drones_as_items.dm
		public Obj_Item_DroneShell ( dynamic loc = null ) : base( (object)(loc) ) {
			dynamic A = null;

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			A = GlobalFuncs.get_area( this );

			if ( Lang13.Bool( A ) ) {
				GlobalFuncs.notify_ghosts( new Txt( "A drone shell has been created in " ).the( A.name ).item().str( "." ).ToString(), null, null, this, null, true );
			}
			return;
		}

		// Function from file: drones_as_items.dm
		public override void attack_ghost( Mob user = null ) {
			string be_drone = null;
			dynamic D = null;

			
			if ( GlobalFuncs.jobban_isbanned( user, "drone" ) ) {
				return;
			}

			if ( GlobalVars.config.use_age_restriction_for_jobs ) {
				
				if ( !Lang13.Bool( Lang13.IsNumber( user.client.player_age ) ) ) {
					return;
				}

				if ( Convert.ToDouble( user.client.player_age ) < 14 ) {
					user.WriteMsg( "<span class='danger'>You're too new to play as a drone! Please try again in " + ( 14 - Convert.ToDouble( user.client.player_age ) ) + " days.</span>" );
					return;
				}
			}

			if ( !Lang13.Bool( GlobalVars.ticker.mode ) ) {
				user.WriteMsg( "Can't become a drone before the game has started." );
				return;
			}
			be_drone = Interface13.Alert( "Become a drone? (Warning, You can no longer be cloned!)", null, "Yes", "No" );

			if ( be_drone == "No" || Lang13.Bool( this.gc_destroyed ) ) {
				return;
			}
			D = Lang13.Call( this.drone_type, GlobalFuncs.get_turf( this.loc ) );
			D.key = user.key;
			GlobalFuncs.qdel( this );
			return;
		}

	}

}