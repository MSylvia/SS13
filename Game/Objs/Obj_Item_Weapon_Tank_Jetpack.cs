// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Tank_Jetpack : Obj_Item_Weapon_Tank {

		public Effect_Effect_System_Trail ion_trail = null;
		public bool on = false;
		public bool stabilization_on = false;
		public int volume_rate = 500;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "jetpack";
			this.distribute_pressure = 21.278247833251953;
			this.action_button_name = "Toggle Jetpack";
			this.icon_state = "jetpack";
		}

		// Function from file: jetpack.dm
		public Obj_Item_Weapon_Tank_Jetpack ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.ion_trail = new Effect_Effect_System_Trail();
			this.ion_trail.set_up( this );
			return;
		}

		// Function from file: jetpack.dm
		public override void ui_action_click(  ) {
			this.__CallVerb("Toggle Jetpack" );
			return;
		}

		// Function from file: jetpack.dm
		public bool allow_thrust( double num = 0, Mob_Living_Carbon_Human user = null ) {
			GasMixture G = null;
			dynamic allgases = null;

			
			if ( !this.on ) {
				return false;
			}

			if ( num < 0.041 || Convert.ToDouble( this.air_contents.f_total_moles() ) < num ) {
				this.__CallVerb("Toggle Jetpack" );
				return false;
			}
			G = this.air_contents.remove( num );
			allgases = G.f_total_moles();

			if ( Convert.ToDouble( allgases ) >= 0.041 ) {
				return true;
			}
			GlobalFuncs.qdel( G );
			G = null;
			return false;
		}

		// Function from file: jetpack.dm
		[Verb]
		[VerbInfo( name: "Toggle Jetpack", group: "Object" )]
		public void toggle(  ) {
			this.on = !this.on;

			if ( this.on ) {
				this.icon_state = "" + this.icon_state + "-on";
				this.ion_trail.start();
			} else {
				this.icon_state = Lang13.Initial( this, "icon_state" );
				this.ion_trail.stop();
			}
			return;
		}

		// Function from file: jetpack.dm
		[Verb]
		[VerbInfo( name: "Toggle Jetpack Stabilization", group: "Object" )]
		public void toggle_rockets(  ) {
			this.stabilization_on = !this.stabilization_on;
			GlobalFuncs.to_chat( Task13.User, "You toggle the stabilization " + ( this.stabilization_on ? "on" : "off" ) + "." );
			return;
		}

	}

}