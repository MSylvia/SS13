// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Toy_Singlecard_Wizard : Obj_Item_Toy_Singlecard {

		public Image char_image = null;
		public bool ability_cd = false;
		public ContextClick_WizardCard card_use = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon = "icons/obj/wiz_cards.dmi";
			this.icon_state = "card";
		}

		// Function from file: wizard_cards.dm
		public Obj_Item_Toy_Singlecard_Wizard ( dynamic NewLoc = null, Obj_Item_Toy_Cards cardsource = null, string newcardname = null ) : base( (object)(NewLoc), cardsource, newcardname ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.card_use = new ContextClick_WizardCard( this );
			this.char_image = new Image( "icons/obj/wiz_cards.dmi", this.cardname );
			this.update_icon();
			return;
		}

		// Function from file: wizard_cards.dm
		public virtual bool special_effect( dynamic user = null ) {
			
			if ( !this.ability_cd ) {
				this.ability_cd = true;
				Task13.Schedule( 50, (Task13.Closure)(() => {
					this.ability_cd = false;
					return;
				}));
				return true;
			}
			return false;
		}

		// Function from file: wizard_cards.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			return this.card_use.action( null, user, flag );
		}

		// Function from file: wizard_cards.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			
			if ( this.flipped ) {
				this.overlays.Remove( this.char_image );
				this.icon_state = "wizcard_down";
				this.name = "card";
			} else {
				this.icon_state = Lang13.Initial( this, "icon_state" );
				this.name = Lang13.Initial( this, "name" );
				this.overlays.Add( this.char_image );
			}
			return null;
		}

	}

}