// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Pinpointer_Nukeop : Obj_Item_Weapon_Pinpointer {

		public bool mode = false;
		public dynamic home = null;

		public Obj_Item_Weapon_Pinpointer_Nukeop ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: pinpointer.dm
		public void worklocation(  ) {
			
			if ( !GlobalVars.bomb_set ) {
				this.mode = false;
				this.workdisk();
				GlobalFuncs.playsound( this.loc, "sound/machines/twobeep.ogg", 50, 1 );
				this.visible_message( "<span class='notice'>Authentication Disk Locator active.</span>" );
				return;
			}

			if ( !Lang13.Bool( this.home ) ) {
				this.home = Lang13.FindObj( typeof(Obj_Machinery_Computer_ShuttleControl_Syndicate) );

				if ( !Lang13.Bool( this.home ) ) {
					this.icon_state = "pinonnull";
					return;
				}
			}
			this.point_at( this.home );
			return;
		}

		// Function from file: pinpointer.dm
		public override void workdisk(  ) {
			
			if ( GlobalVars.bomb_set ) {
				this.mode = true;
				this.worklocation();
				GlobalFuncs.playsound( this.loc, "sound/machines/twobeep.ogg", 50, 1 );
				this.visible_message( "Shuttle Locator active." );
				return;
			}

			if ( !Lang13.Bool( this.the_disk ) ) {
				this.the_disk = Lang13.FindObj( typeof(Obj_Item_Weapon_Disk_Nuclear) );
				this.the_disk.watched_by.Add( this );

				if ( !Lang13.Bool( this.the_disk ) ) {
					this.icon_state = "pinonnull";
					return;
				}
			}
			this.point_at( this.the_disk );
			return;
		}

		// Function from file: pinpointer.dm
		public override dynamic process(  ) {
			
			if ( this.mode ) {
				this.worklocation();
			} else {
				this.workdisk();
			}
			return null;
		}

		// Function from file: pinpointer.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( !this.active ) {
				this.active = true;

				if ( !this.mode ) {
					GlobalFuncs.to_chat( user, "<span class='notice'>Authentication Disk Locator active.</span>" );
				} else {
					GlobalFuncs.to_chat( user, "<span class='notice'>Shuttle Locator active.</span>" );
				}
				this.process();
				GlobalVars.processing_objects.Add( this );
			} else {
				this.active = false;
				this.icon_state = "pinoff";
				GlobalFuncs.to_chat( user, "<span class='notice'>You deactivate the pinpointer.</span>" );
				GlobalVars.processing_objects.Remove( this );
			}
			return null;
		}

	}

}