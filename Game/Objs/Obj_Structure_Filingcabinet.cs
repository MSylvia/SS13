// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Filingcabinet : Obj_Structure {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/obj/bureaucracy.dmi";
			this.icon_state = "filingcabinet";
		}

		public Obj_Structure_Filingcabinet ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: filingcabinet.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hclient = null, HtmlInterface currui = null ) {
			dynamic P = null;

			
			if ( Lang13.Bool( href_list["retrieve"] ) ) {
				Interface13.Browse( Task13.User, "", "window=filingcabinet" );
				P = Lang13.FindObj( href_list["retrieve"] );

				if ( Lang13.Bool( P ) && P.loc == this && GlobalFuncs.in_range( this, Task13.User ) ) {
					Task13.User.put_in_hands( P );
					this.updateUsrDialog();
					this.icon_state = "" + Lang13.Initial( this, "icon_state" ) + "-open";
					Task13.Sleep( 5 );
					this.icon_state = Lang13.Initial( this, "icon_state" );
				}
			}
			return null;
		}

		// Function from file: filingcabinet.dm
		public override dynamic attack_hand( dynamic a = null, dynamic b = null, dynamic c = null ) {
			string dat = null;
			int i = 0;
			dynamic P = null;

			
			if ( this.contents.len <= 0 ) {
				GlobalFuncs.to_chat( a, new Txt( "<span class='notice'>" ).The( this ).item().str( " is empty.</span>" ).ToString() );
				return null;
			}
			((Mob)a).set_machine( this );
			dat = "<center><table>";
			i = this.contents.len;

			while (i >= 1) {
				P = this.contents[i];
				dat += new Txt( "<tr><td><a href='?src=" ).Ref( this ).str( ";retrieve=" ).Ref( P ).str( "'>" ).item( P.name ).str( "</a></td></tr>" ).ToString();
				i--;
			}
			dat += "</table></center>";
			Interface13.Browse( a, "<html><head><title>" + this.name + "</title></head><body>" + dat + "</body></html>", "window=filingcabinet;size=350x300" );
			return null;
		}

		// Function from file: filingcabinet.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			
			if ( a is Obj_Item_Weapon_Paper || a is Obj_Item_Weapon_Folder || a is Obj_Item_Weapon_Photo ) {
				
				if ( Lang13.Bool( b.drop_item( a, this ) ) ) {
					GlobalFuncs.to_chat( b, "<span class='notice'>You put " + a + " in " + this + ".</span>" );
					this.icon_state = "" + Lang13.Initial( this, "icon_state" ) + "-open";
					Task13.Sleep( 5 );
					this.icon_state = Lang13.Initial( this, "icon_state" );
					this.updateUsrDialog();
				}
			} else if ( a is Obj_Item_Weapon_Wrench ) {
				GlobalFuncs.playsound( this.loc, "sound/items/Ratchet.ogg", 50, 1 );
				this.anchored = !Lang13.Bool( this.anchored );
				GlobalFuncs.to_chat( b, new Txt( "<span class='notice'>You " ).item( ( Lang13.Bool( this.anchored ) ? "wrench" : "unwrench" ) ).str( " " ).the( this ).item().str( ".</span>" ).ToString() );
			} else {
				GlobalFuncs.to_chat( b, "<span class='notice'>You can't put " + a + " in " + this + "!</span>" );
			}
			return null;
		}

		// Function from file: filingcabinet.dm
		public override bool initialize( bool? suppress_icon_check = null ) {
			Obj_Item I = null;

			
			foreach (dynamic _a in Lang13.Enumerate( this.loc, typeof(Obj_Item) )) {
				I = _a;
				

				if ( I is Obj_Item_Weapon_Paper || I is Obj_Item_Weapon_Folder || I is Obj_Item_Weapon_Photo ) {
					I.loc = this;
				}
			}
			return false;
		}

	}

}