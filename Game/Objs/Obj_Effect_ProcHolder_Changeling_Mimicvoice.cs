// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_ProcHolder_Changeling_Mimicvoice : Obj_Effect_ProcHolder_Changeling {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.helptext = "Will turn your voice into the name that you enter. We must constantly expend chemicals to maintain our form like this.";
			this.dna_cost = 1;
			this.req_human = true;
		}

		public Obj_Effect_ProcHolder_Changeling_Mimicvoice ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: mimic_voice.dm
		public override dynamic sting_action( Mob user = null, Ent_Static target = null ) {
			Changeling changeling = null;
			string mimic_voice = null;

			changeling = user.mind.changeling;

			if ( Lang13.Bool( changeling.mimicing ) ) {
				changeling.mimicing = "";
				changeling.chem_recharge_slowdown -= 0.5;
				user.WriteMsg( "<span class='notice'>We return our vocal glands to their original position.</span>" );
				return null;
			}
			mimic_voice = GlobalFuncs.stripped_input( user, "Enter a name to mimic.", "Mimic Voice", null, 26 );

			if ( !Lang13.Bool( mimic_voice ) ) {
				return null;
			}
			changeling.mimicing = mimic_voice;
			changeling.chem_recharge_slowdown += 0.5;
			user.WriteMsg( "<span class='notice'>We shape our glands to take the voice of <b>" + mimic_voice + "</b>, this will slow down regenerating chemicals while active.</span>" );
			user.WriteMsg( "<span class='notice'>Use this power again to return to our original voice and return chemical production to normal levels.</span>" );
			GlobalFuncs.feedback_add_details( "changeling_powers", "MV" );
			return null;
		}

	}

}