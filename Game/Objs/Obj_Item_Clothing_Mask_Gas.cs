// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Mask_Gas : Obj_Item_Clothing_Mask {

		public int stage = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.flags = 8456;
			this.can_flip = true;
			this.item_state = "gas_alt";
			this.gas_transfer_coefficient = 0.01;
			this.permeability_coefficient = 0.01;
			this.siemens_coefficient = 081;
			this.species_fit = new ByTable(new object [] { "Vox" });
			this.body_parts_covered = 38912;
			this.icon_state = "gas_alt";
		}

		public Obj_Item_Clothing_Mask_Gas ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: gasmask.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			dynamic C = null;
			Obj_Item_Clothing_Head_Helmet_Space_Rig_Ghettorig ghetto = null;

			base.attackby( (object)(a), (object)(b), (object)(c) );

			if ( a is Obj_Item_Clothing_Suit_Spaceblanket && !( this.stage != 0 ) ) {
				this.stage = 1;
				GlobalFuncs.to_chat( b, new Txt( "<span class='notice'>You add " ).the( a ).item().str( " to " ).the( this ).item().str( "</span>" ).ToString() );
				GlobalFuncs.qdel( a );
				this.icon_state = "gas_mask1";
			}

			if ( a is Obj_Item_Stack_CableCoil && this.stage == 1 ) {
				C = a;

				if ( Convert.ToDouble( C.amount ) <= 4 ) {
					return null;
				}
				this.icon_state = "gas_mask2";
				GlobalFuncs.to_chat( b, new Txt( "<span class='notice'>You tie up " ).the( this ).item().str( " with " ).the( a ).item().str( "</span>" ).ToString() );
				this.stage = 2;
			}

			if ( a is Obj_Item_Clothing_Head_Hardhat_Red && this.stage == 2 ) {
				GlobalFuncs.to_chat( b, "<span class='notice'>You finish the ghetto helmet</span>" );
				ghetto = new Obj_Item_Clothing_Head_Helmet_Space_Rig_Ghettorig( this.loc );
				GlobalFuncs.qdel( this );
				GlobalFuncs.qdel( a );
				((Mob)b).put_in_hands( ghetto );
			}
			return null;
		}

	}

}