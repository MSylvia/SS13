// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Grenade_Clusterbuster_Segment : Obj_Item_Weapon_Grenade_Clusterbuster {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "clusterbang_segment";
		}

		// Function from file: clusterbuster.dm
		public Obj_Item_Weapon_Grenade_Clusterbuster_Segment ( dynamic loc = null, Type payload_type = null ) : base( (object)(loc) ) {
			payload_type = payload_type ?? typeof(Obj_Item_Weapon_Grenade_Flashbang_Cluster);

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.icon_state = "clusterbang_segment_active";
			this.payload = payload_type;
			this.active = true;
			Map13.WalkAway( this, loc, Rand13.Int( 1, 4 ), 0 );
			Task13.Schedule( Rand13.Int( 15, 60 ), (Task13.Closure)(() => {
				this.prime();
				return;
			}));
			return;
		}

		// Function from file: clusterbuster.dm
		public override void prime(  ) {
			new Obj_Effect_PayloadSpawner( this.loc, this.payload, Rand13.Int( 4, 8 ) );
			GlobalFuncs.playsound( this.loc, "sound/weapons/armbomb.ogg", 75, 1, -3 );
			GlobalFuncs.qdel( this );
			return;
		}

	}

}