// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Organ_Internal_Heart_Demon : Obj_Item_Organ_Internal_Heart {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "combat=5;biotech=8";
			this.icon_state = "demon_heart";
		}

		public Obj_Item_Organ_Internal_Heart_Demon ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: slaughter.dm
		public override void Remove( dynamic M = null, bool? special = null ) {
			special = special ?? false;

			base.Remove( (object)(M), special );

			if ( Lang13.Bool( M.mind ) ) {
				((Mind)M.mind).remove_spell( typeof(Obj_Effect_ProcHolder_Spell_Bloodcrawl) );
			}
			return;
		}

		// Function from file: slaughter.dm
		public override void Insert( dynamic M = null, int? special = null ) {
			special = special ?? 0;

			base.Insert( (object)(M), special );

			if ( Lang13.Bool( M.mind ) ) {
				M.mind.AddSpell( new Obj_Effect_ProcHolder_Spell_Bloodcrawl( null ) );
			}
			return;
		}

		// Function from file: slaughter.dm
		public override bool attack( dynamic M = null, dynamic user = null, bool? def_zone = null ) {
			Obj_Effect_ProcHolder_Spell knownspell = null;

			
			if ( M != user ) {
				return base.attack( (object)(M), (object)(user), def_zone );
			}
			((Ent_Static)user).visible_message( "<span class='warning'>" + user + " raises " + this + " to their mouth and tears into it with their teeth!</span>", "<span class='danger'>An unnatural hunger consumes you. You raise " + this + " your mouth and devour it!</span>" );
			GlobalFuncs.playsound( user, "sound/magic/Demon_consume.ogg", 50, 1 );

			foreach (dynamic _a in Lang13.Enumerate( user.mind.spell_list, typeof(Obj_Effect_ProcHolder_Spell) )) {
				knownspell = _a;
				

				if ( knownspell.type == typeof(Obj_Effect_ProcHolder_Spell_Bloodcrawl) ) {
					user.WriteMsg( "<span class='warning'>...and you don't feel any different.</span>" );
					GlobalFuncs.qdel( this );
					return false;
				}
			}
			((Ent_Static)user).visible_message( "<span class='warning'>" + user + "'s eyes flare a deep crimson!</span>", "<span class='userdanger'>You feel a strange power seep into your body... you have absorbed the demon's blood-travelling powers!</span>" );
			user.drop_item();
			this.Insert( user );
			return false;
		}

	}

}