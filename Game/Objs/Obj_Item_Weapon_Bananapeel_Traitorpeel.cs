// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Bananapeel_Traitorpeel : Obj_Item_Weapon_Bananapeel {

		public Obj_Item_Weapon_Bananapeel_Traitorpeel ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: clowngrenade.dm
		public override dynamic throw_impact( dynamic hit_atom = null, dynamic speed = null, Mob user = null ) {
			double? burned = null;
			dynamic M = null;

			burned = Rand13.Int( 1, 3 );

			if ( hit_atom is Mob_Living ) {
				M = hit_atom;
				((Mob_Living)M).take_organ_damage( 0, burned );
			}
			return base.throw_impact( (object)(hit_atom), (object)(speed), user );
		}

		// Function from file: clowngrenade.dm
		public override dynamic Crossed( Ent_Dynamic O = null, dynamic X = null ) {
			int burned = 0;
			Ent_Dynamic M = null;

			burned = Rand13.Int( 2, 5 );

			if ( O is Mob_Living ) {
				M = O;

				if ( Lang13.Bool( ((dynamic)M).lying ) ) {
					((dynamic)M).take_overall_damage( 0, Num13.MaxInt( 0, burned - 2 ) );
					((dynamic)M).simple_message( "<span class='danger'>Something burns your back!</span>", "<span class='userdanger'>They're eating your back!</span>" );
					return null;
				}

				if ( M is Mob_Living_Carbon_Human ) {
					
					if ( Convert.ToDouble( ((dynamic)M).CheckSlip() ) < 1 ) {
						return null;
					} else {
						((dynamic)M).simple_message( "<span class='warning'>Your feet feel like they're on fire!</span>", "<span class='userdanger'>Egads! They bite your feet!</span>" );
						((dynamic)M).take_overall_damage( 0, Num13.MaxInt( 0, burned - 2 ) );
					}
				}

				if ( !( M is Mob_Living_Carbon_Slime ) && !( M is Mob_Living_Silicon_Robot ) ) {
					((Mob)M).stop_pulling();
					Map13.Step( M, M.dir );
					Task13.Schedule( 1, (Task13.Closure)(() => {
						Map13.Step( M, M.dir );
						return;
					}));
					Task13.Schedule( 2, (Task13.Closure)(() => {
						Map13.Step( M, M.dir );
						return;
					}));
					Task13.Schedule( 3, (Task13.Closure)(() => {
						Map13.Step( M, M.dir );
						return;
					}));
					Task13.Schedule( 4, (Task13.Closure)(() => {
						Map13.Step( M, M.dir );
						return;
					}));
					((dynamic)M).take_organ_damage( 2 );
					((dynamic)M).simple_message( new Txt( "<span class='notice'>You slipped on " ).the( this.name ).item().str( "!</span>" ).ToString(), "<span class='userdanger'>Please, just end the pain!</span>" );
					GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/misc/slip.ogg", 50, 1, -3 );
					((dynamic)M).Weaken( 10 );
					((dynamic)M).take_overall_damage( 0, burned );
				}
			}
			return null;
		}

	}

}