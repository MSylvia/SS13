// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Rsf : Obj_Item_Weapon {

		public int matter = 0;
		public int mode = 1;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "rcd";
		}

		// Function from file: RSF.dm
		public Obj_Item_Weapon_Rsf ( dynamic loc = null ) : base( (object)(loc) ) {
			this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
			return;
		}

		// Function from file: tgstation.dme
		public override bool afterattack( dynamic target = null, dynamic user = null, bool? proximity_flag = null, string click_parameters = null ) {
			dynamic engy = null;
			dynamic engy2 = null;
			dynamic engy3 = null;
			dynamic engy4 = null;
			dynamic engy5 = null;
			dynamic engy6 = null;
			dynamic engy7 = null;
			dynamic engy8 = null;
			dynamic engy9 = null;
			dynamic engy10 = null;
			dynamic engy11 = null;
			dynamic engy12 = null;

			
			if ( !( proximity_flag == true ) ) {
				return false;
			}

			if ( !( target is Obj_Structure_Table || target is Tile_Simulated_Floor ) ) {
				return false;
			}

			if ( target is Obj_Structure_Table && this.mode == 1 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Dosh..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Stack_Spacecash_C10( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy = user;
						engy.cell.charge -= 200;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 1 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Dosh..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Stack_Spacecash_C10( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy2 = user;
						engy2.cell.charge -= 200;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Obj_Structure_Table && this.mode == 2 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Drinking Glass..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_ReagentContainers_Food_Drinks_Drinkingglass( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy3 = user;
						engy3.cell.charge -= 50;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 2 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Drinking Glass..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_ReagentContainers_Food_Drinks_Drinkingglass( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy4 = user;
						engy4.cell.charge -= 50;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Obj_Structure_Table && this.mode == 3 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Paper Sheet..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Paper( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy5 = user;
						engy5.cell.charge -= 10;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 3 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Paper Sheet..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Paper( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy6 = user;
						engy6.cell.charge -= 10;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Obj_Structure_Table && this.mode == 4 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Pen..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Pen( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy7 = user;
						engy7.cell.charge -= 50;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 4 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Pen..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Pen( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy8 = user;
						engy8.cell.charge -= 50;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Obj_Structure_Table && this.mode == 5 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Dice Pack..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Storage_PillBottle_Dice( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy9 = user;
						engy9.cell.charge -= 200;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 5 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Dice Pack..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Weapon_Storage_PillBottle_Dice( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy10 = user;
						engy10.cell.charge -= 200;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Obj_Structure_Table && this.mode == 6 ) {
				
				if ( target is Obj_Structure_Table && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Cigarette..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Clothing_Mask_Cigarette( target.loc );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy11 = user;
						engy11.cell.charge -= 10;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			} else if ( target is Tile_Simulated_Floor && this.mode == 6 ) {
				
				if ( target is Tile_Simulated_Floor && this.matter >= 1 ) {
					user.WriteMsg( "Dispensing Cigarette..." );
					GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
					new Obj_Item_Clothing_Mask_Cigarette( target );

					if ( user is Mob_Living_Silicon_Robot ) {
						engy12 = user;
						engy12.cell.charge -= 10;
					} else {
						this.matter--;
						user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
						this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
					}
				}
				return false;
			}
			return false;
		}

		// Function from file: RSF.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			GlobalFuncs.playsound( this.loc, "sound/effects/pop.ogg", 50, 0 );

			if ( this.mode == 1 ) {
				this.mode = 2;
				user.WriteMsg( "Changed dispensing mode to 'Drinking Glass'" );
				return null;
			}

			if ( this.mode == 2 ) {
				this.mode = 3;
				user.WriteMsg( "Changed dispensing mode to 'Paper'" );
				return null;
			}

			if ( this.mode == 3 ) {
				this.mode = 4;
				user.WriteMsg( "Changed dispensing mode to 'Pen'" );
				return null;
			}

			if ( this.mode == 4 ) {
				this.mode = 5;
				user.WriteMsg( "Changed dispensing mode to 'Dice Pack'" );
				return null;
			}

			if ( this.mode == 5 ) {
				this.mode = 6;
				user.WriteMsg( "Changed dispensing mode to 'Cigarette'" );
				return null;
			}

			if ( this.mode == 6 ) {
				this.mode = 1;
				user.WriteMsg( "Changed dispensing mode to 'Dosh'" );
				return null;
			}
			return null;
		}

		// Function from file: RSF.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			base.attackby( (object)(A), (object)(user), _params, silent, replace_spent );

			if ( A is Obj_Item_Weapon_RcdAmmo ) {
				
				if ( this.matter + 10 > 30 ) {
					user.WriteMsg( "The RSF can't hold any more matter." );
					return null;
				}
				GlobalFuncs.qdel( A );
				this.matter += 10;
				GlobalFuncs.playsound( this.loc, "sound/machines/click.ogg", 10, 1 );
				user.WriteMsg( "The RSF now holds " + this.matter + "/30 fabrication-units." );
				this.desc = "A RSF. It currently holds " + this.matter + "/30 fabrication-units.";
				return null;
			}
			return null;
		}

	}

}