// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_Media_Jukebox_Superjuke_Adminbus : Obj_Machinery_Media_Jukebox_Superjuke {

		public Browser popup = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.luminosity = 0;
			this.pixel_x = -32;
			this.pixel_y = -32;
			this.light_color = "#6496FA";
			this.req_access = new ByTable();
			this.playlist_id = "endgame";
			this.icon = "icons/obj/bus.dmi";
			this.layer = 6;
		}

		public Obj_Machinery_Media_Jukebox_Superjuke_Adminbus ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: jukebox.dm
		public override bool singuloCanEat(  ) {
			return false;
		}

		// Function from file: jukebox.dm
		public override dynamic cultify(  ) {
			return null;
		}

		// Function from file: jukebox.dm
		public override bool ex_act( double? severity = null, dynamic child = null ) {
			return false;
		}

		// Function from file: jukebox.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			
			if ( this.playing != 0 ) {
				this.overlays.Add( "beats" );
			} else {
				this.overlays = 0;
			}
			return null;
		}

		// Function from file: jukebox.dm
		public void repack(  ) {
			dynamic M = null;

			
			if ( this.playing != 0 ) {
				
				foreach (dynamic _a in Lang13.Enumerate( Map13.FetchInRange( 1, this ) )) {
					M = _a;
					
					GlobalFuncs.to_chat( M, "<span class='notice'>The jukebox turns itself off to protect itself from any cahot induced damage.</span>" );
				}
			}

			if ( this.popup != null ) {
				this.popup.close();
			}
			this.playing = 0;
			this.set_light( 0 );
			this.icon_state = "";
			Icon13.Flick( "repacking", this );
			this.update_music();
			this.disconnect_media_source();
			this.update_icon();
			return;
		}

		// Function from file: jukebox.dm
		public void deploy(  ) {
			this.update_media_source();
			this.icon_state = "jukebox";
			this.set_light( 4 );
			Icon13.Flick( "deploying", this );
			return;
		}

		// Function from file: jukebox.dm
		public override dynamic attack_hand( dynamic a = null, dynamic b = null, dynamic c = null ) {
			string t = null;

			t = "<div class=\"navbar\">";
			t += new Txt( "<a href=\"?src=" ).Ref( this ).str( ";screen=" ).item( 1 ).str( "\">Main</a>" ).ToString();
			t += "</div>";
			t += this.ScreenMain( a );
			((Mob)a).set_machine( this );
			this.popup = new Browser( a, "jukebox", this.name, 420, 700 );
			this.popup.set_content( t );
			this.popup.set_title_image( ((Mob)a).browse_rsc_icon( this.icon, this.icon_state ) );
			this.popup.open();

			if ( this.icon_state != "jukebox" ) {
				this.deploy();
			}
			return null;
		}

	}

}