// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Suit_Hooded : Obj_Item_Clothing_Suit {

		public dynamic hood = null;
		public Type hoodtype = typeof(Obj_Item_Clothing_Head_Winterhood);

		// Function from file: toggles.dm
		public Obj_Item_Clothing_Suit_Hooded ( dynamic loc = null ) : base( (object)(loc) ) {
			this.MakeHood();
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			return;
		}

		// Function from file: toggles.dm
		public override bool dropped( dynamic user = null ) {
			this.RemoveHood();
			return false;
		}

		// Function from file: toggles.dm
		public override void equipped( Mob user = null, dynamic slot = null ) {
			
			if ( slot != 13 ) {
				this.RemoveHood();
			}
			base.equipped( user, (object)(slot) );
			return;
		}

		// Function from file: toggles.dm
		public override void ui_action_click(  ) {
			this.ToggleHood();
			return;
		}

		// Function from file: toggles.dm
		public void ToggleHood(  ) {
			Ent_Static H = null;

			
			if ( !this.suittoggled ) {
				
				if ( this.loc is Mob_Living_Carbon_Human ) {
					H = this.loc;

					if ( ((dynamic)H).wear_suit != this ) {
						((dynamic)H).WriteMsg( "<span class='warning'>You must be wearing " + this + " to put up the hood!</span>" );
						return;
					}

					if ( Lang13.Bool( ((dynamic)H).head ) ) {
						((dynamic)H).WriteMsg( "<span class='warning'>You're already wearing something on your head!</span>" );
						return;
					} else {
						((dynamic)H).equip_to_slot_if_possible( this.hood, 11, 0, 0, 1 );
						this.suittoggled = true;
						this.icon_state = "" + Lang13.Initial( this, "icon_state" ) + "_t";
						((dynamic)H).update_inv_wear_suit();
					}
				}
			} else {
				this.RemoveHood();
			}
			return;
		}

		// Function from file: toggles.dm
		public void RemoveHood(  ) {
			Ent_Static H = null;

			this.icon_state = "" + Lang13.Initial( this, "icon_state" );
			this.suittoggled = false;

			if ( this.hood.loc is Mob_Living_Carbon_Human ) {
				H = this.hood.loc;
				((Mob)H).unEquip( this.hood, 1 );
				((dynamic)H).update_inv_wear_suit();
			}
			this.hood.loc = this;
			return;
		}

		// Function from file: toggles.dm
		public void MakeHood(  ) {
			dynamic W = null;

			
			if ( !Lang13.Bool( this.hood ) ) {
				W = Lang13.Call( this.hoodtype, this );
				this.hood = W;
			}
			return;
		}

		// Function from file: toggles.dm
		public override dynamic Destroy(  ) {
			GlobalFuncs.qdel( this.hood );
			return base.Destroy();
		}

	}

}