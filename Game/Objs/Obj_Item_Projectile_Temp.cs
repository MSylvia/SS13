// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Projectile_Temp : Obj_Item_Projectile {

		public int temperature = 300;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.damage = 0;
			this.damage_type = "fire";
			this.nodamage = true;
			this.flag = "energy";
			this.icon_state = "temp_4";
			this.layer = 13;
		}

		public Obj_Item_Projectile_Temp ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: special.dm
		public override bool on_hit( dynamic atarget = null, int? blocked = null ) {
			blocked = blocked ?? 0;

			dynamic M = null;

			
			if ( atarget is Mob_Living ) {
				M = atarget;

				if ( Lang13.Bool( M.flags & 128 ) ) {
					return false;
				}

				if ( M is Mob_Living_Carbon_Human ) {
					M.bodytemperature -= ( this.temperature - 273.41 ) / -273.41 * 2;
				} else {
					M.bodytemperature = this.temperature;
				}

				if ( this.temperature > 500 ) {
					((Mob_Living)M).adjust_fire_stacks( 0.5 );
					M.on_fire = true;
					M.v_update_icon = true;
					GlobalFuncs.playsound( M.loc, "sound/effects/bamf.ogg", 50, 0 );
				}
			}
			return true;
		}

		// Function from file: special.dm
		public override bool OnFired(  ) {
			dynamic T = null;

			base.OnFired();
			T = this.shot_from;

			if ( T is Obj_Item_Weapon_Gun_Energy_Temperature ) {
				this.temperature = Convert.ToInt32( T.temperature );
			}

			dynamic _a = this.temperature; // Was a switch-case, sorry for the mess.
			if ( 501<=_a&&_a<=Double.PositiveInfinity ) {
				this.name = "searing beam";
				this.icon_state = "temp_8";
			} else if ( 400<=_a&&_a<=500 ) {
				this.name = "burning beam";
				this.icon_state = "temp_7";
			} else if ( 360<=_a&&_a<=400 ) {
				this.name = "hot beam";
				this.icon_state = "temp_6";
			} else if ( 335<=_a&&_a<=360 ) {
				this.name = "warm beam";
				this.icon_state = "temp_5";
			} else if ( 295<=_a&&_a<=335 ) {
				this.name = "ambient beam";
				this.icon_state = "temp_4";
			} else if ( 260<=_a&&_a<=295 ) {
				this.name = "cool beam";
				this.icon_state = "temp_3";
			} else if ( 200<=_a&&_a<=260 ) {
				this.name = "cold beam";
				this.icon_state = "temp_2";
			} else if ( 120<=_a&&_a<=260 ) {
				this.name = "ice beam";
				this.icon_state = "temp_1";
			} else if ( Double.NegativeInfinity<=_a&&_a<=120 ) {
				this.name = "freeze beam";
				this.icon_state = "temp_0";
			} else {
				this.name = "temperature beam";
				this.icon_state = "temp_4";
			}
			return false;
		}

	}

}