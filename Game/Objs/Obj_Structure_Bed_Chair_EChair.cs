// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Bed_Chair_EChair : Obj_Structure_Bed_Chair {

		public dynamic part = null;
		public int last_time = 1;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "echair0";
		}

		// Function from file: electricchair.dm
		public Obj_Structure_Bed_Chair_EChair ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.overlays.Add( new Image( "icons/obj/objects.dmi", this, "echair_over", 5, this.dir ) );
			return;
		}

		// Function from file: tgstation.dme
		public void shock(  ) {
			dynamic A = null;
			bool light = false;
			EffectSystem_SparkSpread s = null;

			
			if ( this.last_time + 50 > Game13.time ) {
				return;
			}
			this.last_time = Game13.time;
			A = GlobalFuncs.get_area( this );

			if ( !( A is Zone ) ) {
				return;
			}

			if ( !Lang13.Bool( A.powered( 1 ) ) ) {
				return;
			}
			A.use_power( 1, 5000 );
			light = A.power_light;
			A.updateicon();
			Icon13.Flick( "echair1", this );
			s = new EffectSystem_SparkSpread();
			s.set_up( 12, 1, this );
			s.start();

			if ( Lang13.Bool( this.buckled_mob ) ) {
				((Mob_Living)this.buckled_mob).electrocute_act( 85, this, 1 );
				this.buckled_mob.WriteMsg( "<span class='userdanger'>You feel a deep shock course through your body!</span>" );
				Task13.Sleep( 1 );
				((Mob_Living)this.buckled_mob).electrocute_act( 85, this, 1 );
			}
			this.visible_message( "<span class='danger'>The electric chair went off!</span>", "<span class='italics'>You hear a deep sharp shock!</span>" );
			A.power_light = light;
			A.updateicon();
			return;
		}

		// Function from file: electricchair.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			Obj_Structure_Bed_Chair C = null;

			
			if ( A is Obj_Item_Weapon_Wrench ) {
				C = new Obj_Structure_Bed_Chair( this.loc );
				GlobalFuncs.playsound( this.loc, "sound/items/ratchet.ogg", 50, 1 );
				C.dir = this.dir;
				this.part.loc = this.loc;
				this.part.master = null;
				this.part = null;
				GlobalFuncs.qdel( this );
				return null;
			}
			return null;
		}

		// Function from file: electricchair.dm
		[Verb]
		[VerbInfo( name: "Rotate Chair", group: "Object", access: VerbAccess.InViewExcludeThis, range: 1 )]
		public override void rotate(  ) {
			base.rotate();
			this.overlays.Cut();
			this.overlays.Add( new Image( "icons/obj/objects.dmi", this, "echair_over", 5, this.dir ) );
			return;
		}

	}

}