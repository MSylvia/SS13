// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Bed_Chair_EChair : Obj_Structure_Bed_Chair {

		public bool on = false;
		public dynamic part = null;
		public int last_time = 1;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "echair0";
		}

		// Function from file: electricchair.dm
		public Obj_Structure_Bed_Chair_EChair ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.overlays.Add( new Image( "icons/obj/objects.dmi", this, "echair_over", 5, this.dir ) );
			return;
		}

		// Function from file: vgstation13.dme
		public void shock(  ) {
			dynamic A = null;
			bool light = false;
			Effect_Effect_System_SparkSpread s = null;
			Mob_Living M = null;

			
			if ( !this.on ) {
				return;
			}

			if ( this.last_time + 50 > Game13.time ) {
				return;
			}
			this.last_time = Game13.time;
			A = GlobalFuncs.get_area( this );

			if ( !( A is Zone ) ) {
				return;
			}

			if ( !Lang13.Bool( A.powered( 1 ) ) ) {
				return;
			}
			A.use_power( 1, 5000 );
			light = A.power_light;
			A.updateicon();
			Icon13.Flick( "echair1", this );
			s = new Effect_Effect_System_SparkSpread();
			s.set_up( 12, 1, this );
			s.start();

			if ( this.locked_atoms.len != 0 ) {
				M = this.locked_atoms[1];
				M.burn_skin( 85 );
				GlobalFuncs.to_chat( M, "<span class='danger'>You feel a deep shock course through your body!</span>" );
				Task13.Sleep( 1 );
				M.burn_skin( 85 );
				M.Stun( 600 );
			}
			this.visible_message( "<span class='danger'>The electric chair went off!</span>", "<span class='danger'>You hear a deep sharp shock!</span>" );
			A.power_light = light;
			A.updateicon();
			return;
		}

		// Function from file: electricchair.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			Obj_Structure_Bed_Chair C = null;

			
			if ( a is Obj_Item_Weapon_Wrench ) {
				C = new Obj_Structure_Bed_Chair( this.loc );
				GlobalFuncs.playsound( this.loc, "sound/items/Ratchet.ogg", 50, 1 );
				C.dir = this.dir;
				((Ent_Dynamic)this.part).forceMove( this.loc );
				this.part.master = null;
				this.part = null;
				GlobalFuncs.qdel( this );
			}
			return null;
		}

		// Function from file: electricchair.dm
		[Verb]
		[VerbInfo( name: "Rotate Chair", access: VerbAccess.InViewExcludeThis, range: 1 )]
		public override void rotate(  ) {
			base.rotate();
			this.overlays.len = 0;
			this.overlays.Add( new Image( "icons/obj/objects.dmi", this, "echair_over", 5, this.dir ) );
			return;
		}

		// Function from file: electricchair.dm
		[Verb]
		[VerbInfo( name: "Toggle Electric Chair", group: "Object", access: VerbAccess.InViewExcludeThis, range: 1 )]
		public void toggle(  ) {
			
			if ( this.on ) {
				this.on = false;
				this.icon_state = "echair0";
			} else {
				this.on = true;
				this.icon_state = "echair1";
			}
			GlobalFuncs.to_chat( Task13.User, "<span class='notice'>You switch " + ( this.on ? "on" : "off" ) + " " + this + ".</span>" );
			return;
		}

	}

}