// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_PFolded_Plane : Obj_Item_Weapon_PFolded {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.attack_verb = new ByTable(new object [] { "stabbed", "jabbed" });
			this.throw_range = 12;
			this.icon_state = "plane_east";
		}

		public Obj_Item_Weapon_PFolded_Plane ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: paper_folded.dm
		public override bool throw_at( dynamic target = null, double? range = null, dynamic speed = null, bool? _override = null ) {
			
			if ( Convert.ToDouble( target.x ) > this.x ) {
				this.icon_state = "plane_east";
			} else {
				this.icon_state = "plane_west";
			}
			return base.throw_at( (object)(target), range, (object)(speed), _override );
		}

		// Function from file: paper_folded.dm
		public override dynamic throw_impact( dynamic hit_atom = null, dynamic speed = null, Mob user = null ) {
			dynamic H = null;
			dynamic eyes = null;

			base.throw_impact( (object)(hit_atom), (object)(speed), user );

			if ( user != null ) {
				
				if ( hit_atom is Mob_Living_Carbon_Human && ( ((dynamic)user.zone_sel).selecting == "eyes" || Rand13.PercentChance( 20 ) ) ) {
					H = hit_atom;

					if ( ((Mob_Living_Carbon_Human)H).check_body_part_coverage( 2048 ) ) {
						GlobalFuncs.to_chat( H, new Txt( "<span class='warning'>" ).The( this ).item().str( " flies right into your eyes! Luckily your eyewear protects you.</span>" ).ToString() );
					} else if ( this.nano ) {
						GlobalFuncs.to_chat( H, "<span class='warning'>OW! Something sharp stabs your " + Rand13.Pick(new object [] { "right", "left" }) + " eye!</span>" );
						H.eye_blurry = Num13.MaxInt( Convert.ToInt32( H.eye_blurry ), Rand13.Int( 10, 15 ) );
						H.eye_blind = Num13.MaxInt( H.eye_blind, 2 );
						((Mob)H).Stun( 2 );
						eyes = H.internal_organs_by_name["eyes"];
						eyes.damage += 3;
					} else {
						GlobalFuncs.to_chat( H, new Txt( "<span class='warning'>" ).The( this ).item().str( " flies right into your " ).item( Rand13.Pick(new object [] { "right", "left" }) ).str( " eye!</span>" ).ToString() );
						H.eye_blurry = Num13.MaxInt( Convert.ToInt32( H.eye_blurry ), Rand13.Int( 3, 6 ) );
						H.eye_blind = Num13.MaxInt( H.eye_blind, this.nano ?1:0 );
					}
				}
			}
			return null;
		}

	}

}