// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_LazarusInjector : Obj_Item_Weapon {

		public bool loaded = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "hypo";
			this.throwforce = 0;
			this.w_class = 2;
			this.throw_speed = 3;
			this.throw_range = 5;
			this.icon = "icons/obj/syringe.dmi";
			this.icon_state = "lazarus_hypo";
		}

		public Obj_Item_Weapon_LazarusInjector ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: mine_items.dm
		public override dynamic examine( dynamic user = null, string size = null ) {
			base.examine( (object)(user), size );

			if ( !this.loaded ) {
				GlobalFuncs.to_chat( user, new Txt( "<span class='info'>" ).The( this ).item().str( " is empty.</span>" ).ToString() );
			}
			return null;
		}

		// Function from file: mine_items.dm
		public override bool afterattack( dynamic A = null, dynamic user = null, bool? flag = null, dynamic _params = null, bool? struggle = null ) {
			dynamic M = null;
			dynamic H = null;

			
			if ( !this.loaded ) {
				return false;
			}

			if ( A is Mob_Living && flag == true ) {
				
				if ( A is Mob_Living_SimpleAnimal ) {
					M = A;

					if ( Convert.ToInt32( M.stat ) == 2 ) {
						M.faction = new Txt( "lazarus " ).Ref( user ).ToString();
						((Mob_Living)M).revive();

						if ( A is Mob_Living_SimpleAnimal_Hostile ) {
							H = M;
							H.friends.Add( user );
							GlobalVars.diary.WriteMsg( String13.HtmlDecode( "[" + GlobalFuncs.time_stamp() + "]GAME: " + ( "" + user + " has revived hostile mob " + A + " with a lazarus injector" ) ) );
						}
						this.loaded = false;
						((Ent_Static)user).visible_message( new Txt( "<span class='warning'>" ).item( user ).str( " injects " ).item( M ).str( " with " ).the( this ).item().str( ", reviving it.</span>" ).ToString(), new Txt( "<span class='notice'>You inject " ).item( M ).str( " with " ).the( this ).item().str( ", reviving it.</span>" ).ToString() );
						GlobalFuncs.playsound( this, "sound/effects/refill.ogg", 50, 1 );
						this.update_icon();
						return false;
					} else {
						GlobalFuncs.to_chat( user, new Txt( "<span class='warning'>" ).The( this ).item().str( " is only effective on the dead.</span>" ).ToString() );
						return false;
					}
				} else {
					GlobalFuncs.to_chat( user, new Txt( "<span class='warning'>" ).The( this ).item().str( " is only effective on lesser beings.</span>" ).ToString() );
					return false;
				}
			}
			return false;
		}

		// Function from file: mine_items.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			base.update_icon( (object)(location), (object)(target) );

			if ( this.loaded ) {
				this.icon_state = "lazarus_hypo";
			} else {
				this.icon_state = "lazarus_empty";
			}
			return null;
		}

	}

}