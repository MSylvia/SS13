// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Paper_Talisman : Obj_Item_Weapon_Paper {

		public string cultist_name = "talisman";
		public string cultist_desc = "A basic talisman. It serves no purpose.";
		public string invocation = "Naise meam!";
		public int uses = 1;
		public double health_cost = 0;

		public Obj_Item_Weapon_Paper_Talisman ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: talisman.dm
		public virtual bool invoke( dynamic user = null ) {
			dynamic C = null;

			
			if ( this.health_cost != 0 && user is Mob_Living_Carbon ) {
				C = user;
				((Mob_Living)C).apply_damage( this.health_cost, "brute", Rand13.Pick(new object [] { "l_arm", "r_arm" }) );
			}
			return false;
		}

		// Function from file: talisman.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( !GlobalFuncs.iscultist( user ) ) {
				user.WriteMsg( "<span class='danger'>There are indecipherable images scrawled on the paper in what looks to be... <i>blood?</i></span>" );
				return null;
			}

			if ( Lang13.Bool( this.invocation ) ) {
				user.__CallVerb("Whisper", this.invocation );
			}
			this.invoke( user );
			this.uses--;

			if ( this.uses <= 0 ) {
				user.drop_item();
				GlobalFuncs.qdel( this );
			}
			return null;
		}

		// Function from file: talisman.dm
		public override double examine( dynamic user = null ) {
			
			if ( GlobalFuncs.iscultist( user ) || Convert.ToInt32( user.stat ) == 2 ) {
				user.WriteMsg( "<b>Name:</b> " + this.cultist_name );
				user.WriteMsg( "<b>Effect:</b> " + this.cultist_desc );
				user.WriteMsg( "<b>Uses Remaining:</b> " + this.uses );
			} else {
				user.WriteMsg( "<span class='danger'>There are indecipherable images scrawled on the paper in what looks to be... <i>blood?</i></span>" );
			}
			return 0;
		}

	}

}