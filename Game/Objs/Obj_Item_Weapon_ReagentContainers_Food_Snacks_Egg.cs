// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_ReagentContainers_Food_Snacks_Egg : Obj_Item_Weapon_ReagentContainers_Food_Snacks {

		public double amount_grown = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "egg";
		}

		// Function from file: egg.dm
		public Obj_Item_Weapon_ReagentContainers_Food_Snacks_Egg ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			((Reagents)this.reagents).add_reagent( "nutriment", 4 );
			this.bitesize = 3;
			return;
		}

		// Function from file: egg.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			dynamic C = null;
			string clr = null;

			
			if ( a is Obj_Item_Weapon_ReagentContainers ) {
				
				if ( a.reagents.amount_cache.len == 1 && ((Reagents)a.reagents).has_reagent( "flour", 5 ) ) {
					((Reagents)a.reagents).remove_reagent( "flour", 5 );
					new Obj_Item_Weapon_ReagentContainers_Food_Snacks_Dough( this );
					GlobalFuncs.to_chat( b, "You make some dough." );
					GlobalFuncs.qdel( this );
					return 1;
				}
			} else if ( a is Obj_Item_Toy_Crayon ) {
				C = a;
				clr = C.colourName;
				Interface13.Stat( null, new ByTable(new object [] { "blue", "green", "mime", "orange", "purple", "rainbow", "red", "yellow" }).Contains( clr ) );

				if ( !false ) {
					GlobalFuncs.to_chat( b, "<span class='notice'>" + this + " refuses to take on this colour!</span>" );
					return null;
				}
				GlobalFuncs.to_chat( b, "<span class='notice'>You colour " + this + " " + clr + ".</span>" );
				this.icon_state = "egg-" + clr;
				this._color = clr;
			} else {
				base.attackby( (object)(a), (object)(b), (object)(c) );
			}
			return null;
		}

		// Function from file: egg.dm
		public override dynamic throw_impact( dynamic hit_atom = null, dynamic speed = null, Mob user = null ) {
			base.throw_impact( (object)(hit_atom), (object)(speed), user );
			new Obj_Effect_Decal_Cleanable_EggSmudge( this.loc );
			((Reagents)this.reagents).reaction( hit_atom, GlobalVars.TOUCH );
			this.visible_message( new Txt( "<span class='warning'>" ).The( this.name ).item().str( " has been squashed.</span>" ).ToString(), "<span class='warning'>You hear a smack.</span>" );
			GlobalFuncs.playsound( this.loc, "sound/items/egg_squash.ogg", 50, 1 );
			GlobalFuncs.qdel( this );
			return null;
		}

		// Function from file: farm_animals.dm
		public void hatch(  ) {
			this.visible_message( "" + this + " hatches with a quiet cracking sound." );
			new Mob_Living_SimpleAnimal_Chick( GlobalFuncs.get_turf( this ) );
			GlobalVars.processing_objects.Remove( this );
			GlobalFuncs.qdel( this );
			return;
		}

		// Function from file: farm_animals.dm
		public override dynamic process(  ) {
			
			if ( this.loc is Tile ) {
				this.amount_grown += Rand13.Int( 1, 2 );

				if ( this.amount_grown >= 100 ) {
					this.hatch();
				}
			} else {
				GlobalVars.processing_objects.Remove( this );
			}
			return null;
		}

	}

}