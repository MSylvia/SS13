// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Tome_Imbued : Obj_Item_Weapon_Tome {

		public bool cultistsonly = true;

		public Obj_Item_Weapon_Tome_Imbued ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: ritual.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			dynamic r = null;
			ByTable runes = null;
			Obj_Effect_Rune R = null;
			dynamic H = null;
			ByTable words = null;
			dynamic beacon = null;
			ByTable words2 = null;
			dynamic beacon2 = null;

			
			if ( this.cultistsonly && !GlobalFuncs.iscultist( Task13.User ) ) {
				return null;
			}

			if ( !Lang13.Bool( GlobalVars.cultwords["travel"] ) ) {
				GlobalFuncs.runerandom();
			}

			if ( Lang13.Bool( user ) ) {
				
				if ( !( user.loc is Tile ) ) {
					GlobalFuncs.to_chat( user, "<span class='warning'>You do not have enough space to write a proper rune.</span>" );
				}
				runes = new ByTable(new object [] { 
					"teleport", 
					"itemport", 
					"tome", 
					"armor", 
					"convert", 
					"tear in reality", 
					"emp", 
					"drain", 
					"seer", 
					"raise", 
					"obscure", 
					"reveal", 
					"astral journey", 
					"manifest", 
					"imbue talisman", 
					"sacrifice", 
					"wall", 
					"freedom", 
					"cultsummon", 
					"deafen", 
					"blind", 
					"bloodboil", 
					"communicate", 
					"stun"
				 });
				r = Interface13.Input( "Choose a rune to scribe", "Rune Scribing", null, null, runes, InputType.Any );
				R = new Obj_Effect_Rune();

				if ( user is Mob_Living_Carbon_Human ) {
					H = user;
					R.blood_DNA = new ByTable();
					R.blood_DNA[H.dna.unique_enzymes] = H.dna.b_type;
				}

				dynamic _a = r; // Was a switch-case, sorry for the mess.
				if ( _a=="teleport" ) {
					words = new ByTable(new object [] { "ire", "ego", "nahlizet", "certum", "veri", "jatkaa", "balaq", "mgar", "karazet", "geeri" });
					beacon = null;

					if ( Task13.User != null ) {
						beacon = Interface13.Input( "Select the last rune", "Rune Scribing", null, null, words, InputType.Any );
					}
					R.word1 = GlobalVars.cultwords["travel"];
					R.word2 = GlobalVars.cultwords["self"];
					R.word3 = beacon;
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="itemport" ) {
					words2 = new ByTable(new object [] { "ire", "ego", "nahlizet", "certum", "veri", "jatkaa", "balaq", "mgar", "karazet", "geeri" });
					beacon2 = null;

					if ( Task13.User != null ) {
						beacon2 = Interface13.Input( "Select the last rune", "Rune Scribing", null, null, words2, InputType.Any );
					}
					R.word1 = GlobalVars.cultwords["travel"];
					R.word2 = GlobalVars.cultwords["other"];
					R.word3 = beacon2;
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="tome" ) {
					R.word1 = GlobalVars.cultwords["see"];
					R.word2 = GlobalVars.cultwords["blood"];
					R.word3 = GlobalVars.cultwords["hell"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="armor" ) {
					R.word1 = GlobalVars.cultwords["hell"];
					R.word2 = GlobalVars.cultwords["destroy"];
					R.word3 = GlobalVars.cultwords["other"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="convert" ) {
					R.word1 = GlobalVars.cultwords["join"];
					R.word2 = GlobalVars.cultwords["blood"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="tear in reality" ) {
					R.word1 = GlobalVars.cultwords["hell"];
					R.word2 = GlobalVars.cultwords["join"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="emp" ) {
					R.word1 = GlobalVars.cultwords["destroy"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["technology"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="drain" ) {
					R.word1 = GlobalVars.cultwords["travel"];
					R.word2 = GlobalVars.cultwords["blood"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="seer" ) {
					R.word1 = GlobalVars.cultwords["see"];
					R.word2 = GlobalVars.cultwords["hell"];
					R.word3 = GlobalVars.cultwords["join"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="raise" ) {
					R.word1 = GlobalVars.cultwords["blood"];
					R.word2 = GlobalVars.cultwords["join"];
					R.word3 = GlobalVars.cultwords["hell"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="obscure" ) {
					R.word1 = GlobalVars.cultwords["hide"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["blood"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="astral journey" ) {
					R.word1 = GlobalVars.cultwords["hell"];
					R.word2 = GlobalVars.cultwords["travel"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="manifest" ) {
					R.word1 = GlobalVars.cultwords["blood"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["travel"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="imbue talisman" ) {
					R.word1 = GlobalVars.cultwords["hell"];
					R.word2 = GlobalVars.cultwords["technology"];
					R.word3 = GlobalVars.cultwords["join"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="sacrifice" ) {
					R.word1 = GlobalVars.cultwords["hell"];
					R.word2 = GlobalVars.cultwords["blood"];
					R.word3 = GlobalVars.cultwords["join"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="reveal" ) {
					R.word1 = GlobalVars.cultwords["blood"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["hide"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="wall" ) {
					R.word1 = GlobalVars.cultwords["destroy"];
					R.word2 = GlobalVars.cultwords["travel"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="freedom" ) {
					R.word1 = GlobalVars.cultwords["travel"];
					R.word2 = GlobalVars.cultwords["technology"];
					R.word3 = GlobalVars.cultwords["other"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="cultsummon" ) {
					R.word1 = GlobalVars.cultwords["join"];
					R.word2 = GlobalVars.cultwords["other"];
					R.word3 = GlobalVars.cultwords["self"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="deafen" ) {
					R.word1 = GlobalVars.cultwords["hide"];
					R.word2 = GlobalVars.cultwords["other"];
					R.word3 = GlobalVars.cultwords["see"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="blind" ) {
					R.word1 = GlobalVars.cultwords["destroy"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["other"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="bloodboil" ) {
					R.word1 = GlobalVars.cultwords["destroy"];
					R.word2 = GlobalVars.cultwords["see"];
					R.word3 = GlobalVars.cultwords["blood"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="communicate" ) {
					R.word1 = GlobalVars.cultwords["self"];
					R.word2 = GlobalVars.cultwords["other"];
					R.word3 = GlobalVars.cultwords["technology"];
					R.loc = user.loc;
					R.check_icon();
				} else if ( _a=="stun" ) {
					R.word1 = GlobalVars.cultwords["join"];
					R.word2 = GlobalVars.cultwords["hide"];
					R.word3 = GlobalVars.cultwords["technology"];
					R.loc = user.loc;
					R.check_icon();
				}
			}
			return null;
		}

	}

}