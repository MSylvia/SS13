// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Pen : Obj_Item_Weapon {

		public string colour = "black";
		public Type style_type = typeof(WritingStyle_Pen);
		public Type nano_style_type = typeof(WritingStyle_Pen_NanoPaper);
		public dynamic style = null;
		public dynamic nano_style = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "pen";
			this.origin_tech = "materials=1";
			this.sharpness = 0.5;
			this.slot_flags = 520;
			this.throwforce = 0;
			this.w_class = 1;
			this.throw_speed = 7;
			this.throw_range = 15;
			this.starting_materials = new ByTable().Set( "$iron", 10 );
			this.w_type = 1;
			this.pressure_resistance = 2;
			this.icon = "icons/obj/bureaucracy.dmi";
			this.icon_state = "pen";
		}

		// Function from file: pen.dm
		public Obj_Item_Weapon_Pen ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.style = Lang13.Call( this.style_type );
			this.nano_style = Lang13.Call( this.nano_style_type );
			return;
		}

		// Function from file: pen.dm
		public override bool? attack( dynamic M = null, dynamic user = null, string def_zone = null, bool? eat_override = null ) {
			
			if ( !( M is Mob ) ) {
				return null;
			}
			GlobalFuncs.to_chat( user, "<span class='warning'>You stab " + M + " with the pen.</span>" );
			GlobalFuncs.to_chat( M, "<span class='warning'>You feel a tiny prick!</span>" );
			M.attack_log.Add( "[" + GlobalFuncs.time_stamp() + "] <font color='orange'>Has been stabbed with " + this.name + "  by " + user.name + " (" + user.ckey + ")</font>" );
			user.attack_log.Add( "[" + GlobalFuncs.time_stamp() + "] <font color='red'>Used the " + this.name + " to stab " + M.name + " (" + M.ckey + ")</font>" );
			GlobalFuncs.msg_admin_attack( "" + user.name + " (" + user.ckey + ") Used the " + this.name + " to stab " + M.name + " (" + M.ckey + ") (<A HREF='?_src_=holder;adminplayerobservecoodjump=1;X=" + user.x + ";Y=" + user.y + ";Z=" + user.z + "'>JMP</a>)" );

			if ( !( user is Mob_Living_Carbon ) ) {
				M.LAssailant = null;
			} else {
				M.LAssailant = user;
			}
			return null;
		}

		// Function from file: pen.dm
		public override dynamic suicide_act( Mob_Living_Carbon_Human user = null ) {
			GlobalFuncs.to_chat( Map13.FetchViewers( null, user ), new Txt( "<span class='danger'>" ).item( user ).str( "is jamming the " ).item( this.name ).str( "into " ).his_her_its_their().str( " ear! It looks like " ).he_she_it_they().str( "'s trying to commit suicide.</span>" ).ToString() );
			return 8;
		}

		// Function from file: pen.dm
		public dynamic Format( Mob user = null, dynamic text = null, Obj_Item_Weapon_Paper P = null ) {
			
			if ( P is Obj_Item_Weapon_Paper_Nano ) {
				return this.nano_style.Format( text, this, user, P );
			} else {
				return this.style.Format( text, this, user, P );
			}
		}

	}

}