// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Gun_Projectile_Rocketlauncher_Nikita : Obj_Item_Weapon_Gun_Projectile_Rocketlauncher {

		public dynamic fired = null;
		public bool emagged = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.inhand_states = new ByTable().Set( "left_hand", "icons/mob/in-hand/left/guns_experimental.dmi" ).Set( "right_hand", "icons/mob/in-hand/right/guns_experimental.dmi" );
			this.caliber = new ByTable().Set( "nikita", 1 );
			this.ammo_type = "/obj/item/ammo_casing/rocket_rpg/nikita";
			this.icon = "icons/obj/gun_experimental.dmi";
			this.icon_state = "nikita";
		}

		public Obj_Item_Weapon_Gun_Projectile_Rocketlauncher_Nikita ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: rocketlauncher.dm
		public override bool process_chambered(  ) {
			
			if ( base.process_chambered() ) {
				
				if ( !this.emagged ) {
					this.fired = this.in_chamber;
				}
				return true;
			}
			return false;
		}

		// Function from file: rocketlauncher.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			
			if ( a is Obj_Item_Weapon_Card_Emag && !this.emagged ) {
				this.emagged = true;
				GlobalFuncs.to_chat( b, new Txt( "<span class='warning'>You disable " ).the( this ).item().str( "'s idiot security!</span>" ).ToString() );
			} else {
				base.attackby( (object)(a), (object)(b), (object)(c) );
			}
			return null;
		}

		// Function from file: rocketlauncher.dm
		public override dynamic suicide_act( Mob_Living_Carbon_Human user = null ) {
			
			if ( !( this.loaded != null ) ) {
				user.visible_message( new Txt( "<span class='danger'>" ).item( user ).str( " jams down " ).the( this ).item().str( "'s trigger before noticing it isn't loaded and starts bashing " ).his_her_its_their().str( " head in with it! It looks like " ).he_she_it_they().str( "'s trying to commit suicide.</span>" ).ToString() );
				return 1;
			} else {
				user.visible_message( new Txt( "<span class='danger'>" ).item( user ).str( " fiddles with " ).the( this ).item().str( "'s safeties and suddenly aims it at " ).his_her_its_their().str( " feet! It looks like " ).he_she_it_they().str( "'s trying to commit suicide.</span>" ).ToString() );
				Task13.Schedule( 10, (Task13.Closure)(() => {
					GlobalFuncs.explosion( this.loc, -1, 1, 4, 8 );
					return;
					return;
				}));
			}
			return null;
		}

		// Function from file: rocketlauncher.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( Lang13.Bool( this.fired ) ) {
				GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/weapons/stickybomb_det.ogg", 30, 1 );
				this.fired.detonate();
			}
			return null;
		}

		// Function from file: rocketlauncher.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			return null;
		}

	}

}