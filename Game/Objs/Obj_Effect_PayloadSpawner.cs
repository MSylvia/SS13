// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_PayloadSpawner : Obj_Effect {

		// Function from file: clusterbuster.dm
		public Obj_Effect_PayloadSpawner ( dynamic newloc = null, Type type = null, int numspawned = 0 ) : base( (object)(newloc) ) {
			int? loop = null;
			dynamic P = null;

			loop = null;
			loop = numspawned;

			while (( loop ??0) > 0) {
				P = Lang13.Call( type, this.loc );
				P.active = 1;
				Map13.WalkAway( P, this.loc, Rand13.Int( 1, 4 ), 0 );
				Task13.Schedule( Rand13.Int( 15, 60 ), (Task13.Closure)(() => {
					
					if ( Lang13.Bool( P ) && !Lang13.Bool( P.gc_destroyed ) ) {
						((Obj_Item_Weapon_Grenade)P).prime();
					}
					GlobalFuncs.qdel( this );
					return;
				}));
				loop--;
			}
			return;
		}

	}

}