// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Melee_ClassicBaton_Telescopic : Obj_Item_Weapon_Melee_ClassicBaton {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.w_class = 2;
			this.on = false;
			this.icon_state = "telebaton_0";
		}

		public Obj_Item_Weapon_Melee_ClassicBaton_Telescopic ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: misc.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			this.on = !this.on;

			if ( this.on ) {
				user.WriteMsg( "<span class ='warning'>You extend the baton.</span>" );
				this.icon_state = "telebaton_1";
				this.item_state = "nullrod";
				this.w_class = 4;
				this.force = 10;
				this.attack_verb = new ByTable(new object [] { "smacked", "struck", "cracked", "beaten" });
			} else {
				user.WriteMsg( "<span class ='notice'>You collapse the baton.</span>" );
				this.icon_state = "telebaton_0";
				this.item_state = null;
				this.slot_flags = 512;
				this.w_class = 2;
				this.force = 0;
				this.attack_verb = new ByTable(new object [] { "hit", "poked" });
			}
			GlobalFuncs.playsound( this.loc, "sound/weapons/batonextend.ogg", 50, 1 );
			this.add_fingerprint( user );
			return null;
		}

		// Function from file: misc.dm
		public override int suicide_act( Mob_Living_Carbon_Human user = null ) {
			Mob_Living_Carbon_Human H = null;
			dynamic B = null;

			H = user;
			B = H.getorgan( typeof(Obj_Item_Organ_Internal_Brain) );
			user.visible_message( "<span class='suicide'>" + user + " stuffs the " + this + " up their nose and presses the 'extend' button! It looks like they're trying to clear their mind.</span>" );

			if ( !this.on ) {
				this.attack_self( user );
			} else {
				GlobalFuncs.playsound( this.loc, "sound/weapons/batonextend.ogg", 50, 1 );
				this.add_fingerprint( user );
			}
			Task13.Sleep( 3 );

			if ( H != null && !Lang13.Bool( GlobalFuncs.qdeleted( H ) ) ) {
				
				if ( Lang13.Bool( B ) && !Lang13.Bool( GlobalFuncs.qdeleted( B ) ) ) {
					H.internal_organs.Remove( B );
					GlobalFuncs.qdel( B );
				}
				GlobalFuncs.gibs( H.loc, H.viruses, H.dna );
				return 1;
			}
			return 0;
		}

	}

}