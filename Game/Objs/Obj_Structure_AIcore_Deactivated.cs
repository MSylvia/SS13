// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_AIcore_Deactivated : Obj_Structure_AIcore {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.state = 20;
			this.icon_state = "ai-empty";
		}

		public Obj_Structure_AIcore_Deactivated ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: ai_core.dm
		public override bool transfer_ai( dynamic interaction = null, dynamic user = null, Ent_Static AI = null, dynamic card = null ) {
			
			if ( !base.transfer_ai( (object)(interaction), (object)(user), AI, (object)(card) ) ) {
				return false;
			}

			if ( interaction == 2 ) {
				((dynamic)AI).control_disabled = 0;
				((dynamic)AI).radio_enabled = 1;
				AI.loc = this.loc;
				((dynamic)AI).WriteMsg( "You have been uploaded to a stationary terminal. Remote device connection restored." );
				user.WriteMsg( "<span class='boldnotice'>Transfer successful</span>: " + AI.name + " (" + Rand13.Int( 1000, 9999 ) + ".exe) installed and executed successfully. Local copy has been removed." );
				card.AI = null;
				GlobalFuncs.qdel( this );
			} else {
				user.WriteMsg( "There is no AI loaded on this terminal!" );
			}
			return false;
		}

		// Function from file: ai_core.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			
			if ( A is Obj_Item_Device_Aicard ) {
				((Ent_Static)A).transfer_ai( "INACTIVE", "AICARD", this, user );
			}

			if ( A is Obj_Item_Weapon_Wrench ) {
				GlobalFuncs.playsound( this.loc, "sound/items/ratchet.ogg", 50, 1 );
				((Ent_Static)user).visible_message( "" + user + " " + ( Lang13.Bool( this.anchored ) ? "fastens" : "unfastens" ) + " " + this + ".", "<span class='notice'>You start to " + ( Lang13.Bool( this.anchored ) ? "fasten " + this + " to" : "unfasten " + this + " from" ) + " the floor...</span>" );

				dynamic _a = this.anchored; // Was a switch-case, sorry for the mess.
				if ( _a==0 ) {
					
					if ( GlobalFuncs.do_after( user, 20, null, this ) ) {
						user.WriteMsg( "<span class='notice'>You fasten the core into place.</span>" );
						this.anchored = 1;
					}
				} else if ( _a==1 ) {
					
					if ( GlobalFuncs.do_after( user, 20, null, this ) ) {
						user.WriteMsg( "<span class='notice'>You unfasten the core.</span>" );
						this.anchored = 0;
					}
				}
			}
			return null;
		}

	}

}