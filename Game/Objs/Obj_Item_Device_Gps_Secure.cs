// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Device_Gps_Secure : Obj_Item_Device_Gps {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.gpstag = "SEC0";
			this.icon_state = "sps";
		}

		public Obj_Item_Device_Gps_Secure ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: gps.dm
		public void announce( dynamic wearer = null, Obj_Item_Device_Gps_Secure SPS = null, string reason = null ) {
			Ent_Static L = null;

			
			if ( this.loc is Mob_Living ) {
				L = this.loc;
				((dynamic)L).show_message( "" + this.gpstag + " beeps: <span class='warning'>Warning! " + wearer + " has " + reason + " at " + GlobalFuncs.get_area( SPS ) + ".</span>", 2 );
			} else if ( this.loc is Tile ) {
				this.visible_message( "" + this.gpstag + " beeps: <span class='warning'>Warning! " + wearer + " has " + reason + " at " + GlobalFuncs.get_area( SPS ) + ".</span>" );
			}
			return;
		}

		// Function from file: gps.dm
		public override dynamic stripped( dynamic wearer = null, dynamic stripper = null ) {
			dynamic _default = null;

			dynamic E = null;
			dynamic S = null;

			
			if ( this.emped ) {
				return _default;
			}
			_default = base.stripped( (object)(wearer), (object)(stripper) );

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.SPS_list )) {
				E = _a;
				
				S = E;
				((Obj_Item_Device_Gps_Secure)S).announce( wearer, this, "been stripped of " + ( wearer.gender == GlobalVars.FEMALE ? "her" : "his" ) + " SPS" );
			}
			return _default;
		}

		// Function from file: gps.dm
		public override void OnMobDeath( Mob holder = null ) {
			dynamic E = null;
			dynamic S = null;

			
			if ( this.emped ) {
				return;
			}

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.SPS_list )) {
				E = _a;
				
				S = E;
				((Obj_Item_Device_Gps_Secure)S).announce( holder, this, "died" );
			}
			return;
		}

		// Function from file: gps.dm
		public override void handle_list(  ) {
			GlobalVars.SPS_list.Add( this );
			this.gpstag = "SEC" + GlobalVars.secure_GPS_count;
			GlobalVars.secure_GPS_count++;
			this.name = "secure positioning system (" + this.gpstag + ")";
			return;
		}

	}

}