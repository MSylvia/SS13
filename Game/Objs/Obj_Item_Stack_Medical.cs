// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Stack_Medical : Obj_Item_Stack {

		public int heal_brute = 0;
		public int heal_burn = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.singular_name = "medical pack";
			this.amount = 5;
			this.max_amount = 5;
			this.w_class = 1;
			this.throw_speed = 4;
			this.throw_range = 10;
		}

		public Obj_Item_Stack_Medical ( dynamic loc = null, int? amount = null ) : base( (object)(loc), amount ) {
			
		}

		// Function from file: medical.dm
		public override bool? attack( dynamic M = null, dynamic user = null, string def_zone = null, bool? eat_override = null ) {
			dynamic H = null;
			dynamic affecting = null;

			
			if ( !( M is Mob_Living_Carbon ) ) {
				GlobalFuncs.to_chat( user, new Txt( "<span class='warning'>" ).The( this ).item().str( " cannot be applied to " ).item( M ).str( "!</span>" ).ToString() );
				return true;
			}

			if ( !Lang13.Bool( user.dexterity_check() ) ) {
				GlobalFuncs.to_chat( user, "<span class='warning'>You don't have the dexterity to do this!</span>" );
				return true;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;
				affecting = ((Mob_Living_Carbon_Human)H).get_organ( ((dynamic)user.zone_sel).selecting );

				if ( affecting.display_name == "head" ) {
					
					if ( Lang13.Bool( H.head ) && H.head is Obj_Item_Clothing_Head_Helmet_Space ) {
						GlobalFuncs.to_chat( user, new Txt( "<span class='warning'>You can't apply " ).the( this ).item().str( " through " ).the( H.head ).item().str( "!</span>" ).ToString() );
						return true;
					}
				} else if ( Lang13.Bool( H.wear_suit ) && H.wear_suit is Obj_Item_Clothing_Suit_Space ) {
					GlobalFuncs.to_chat( user, new Txt( "<span class='warning'>You can't apply " ).the( this ).item().str( " through " ).the( H.wear_suit ).item().str( "!</span>" ).ToString() );
					return true;
				}

				if ( Lang13.Bool( affecting.status & 128 ) ) {
					GlobalFuncs.to_chat( user, "<span class='warning'>This isn't useful at all on a robotic limb.</span>" );
					return true;
				}

				if ( Lang13.Bool( affecting.status & 4096 ) ) {
					GlobalFuncs.to_chat( user, "<span class='warning'>This isn't useful at all on a peg limb.</span>" );
					return true;
				}
				((Mob_Living)H).UpdateDamageIcon();
			} else {
				((Mob_Living)M).heal_organ_damage( this.heal_brute / 2, this.heal_burn / 2 );
				((Ent_Static)user).visible_message( new Txt( "<span class='notice'>" ).item( user ).str( " applies " ).the( this ).item().str( " to " ).item( M ).str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You apply " ).the( this ).item().str( " to " ).item( M ).str( ".</span>" ).ToString() );
				this.use( 1 );
			}
			((Mob_Living)M).updatehealth();
			return null;
		}

	}

}