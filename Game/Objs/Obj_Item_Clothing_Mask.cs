// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Mask : Obj_Item_Clothing {

		public bool can_flip = false;
		public int is_flipped = 1;
		public bool ignore_flip = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.body_parts_covered = 4096;
			this.slot_flags = 32;
			this.species_restricted = new ByTable(new object [] { "exclude", "Muton" });
			this.action_button_name = "Toggle Mask";
			this.heat_conductivity = 0.4;
			this.icon = "icons/obj/clothing/masks.dmi";
		}

		public Obj_Item_Clothing_Mask ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: clothing.dm
		public virtual void treat_mask_speech( Game_Data speech = null ) {
			return;
		}

		// Function from file: clothing.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			this.__CallVerb("Toggle Mask" );
			return null;
		}

		// Function from file: clothing.dm
		[Verb]
		[VerbInfo( name: "Toggle Mask", group: "Object", access: VerbAccess.InUserContents, range: 127 )]
		public void togglemask(  ) {
			
			if ( this.ignore_flip ) {
				return;
			} else {
				
				if ( Task13.User.incapacitated() ) {
					return;
				}

				if ( !this.can_flip ) {
					GlobalFuncs.to_chat( Task13.User, new Txt( "You try pushing " ).the( this ).item().str( " out of the way, but it is very uncomfortable and you look like a fool. You push it back into place." ).ToString() );
					return;
				}

				if ( this.is_flipped == 2 ) {
					this.icon_state = Lang13.Initial( this, "icon_state" );
					this.gas_transfer_coefficient = Lang13.Initial( this, "gas_transfer_coefficient" );
					this.permeability_coefficient = Lang13.Initial( this, "permeability_coefficient" );
					this.flags = Lang13.Initial( this, "flags" );
					this.body_parts_covered = Lang13.Initial( this, "body_parts_covered" );
					GlobalFuncs.to_chat( Task13.User, new Txt( "You push " ).the( this ).item().str( " back into place." ).ToString() );
					this.is_flipped = 1;
				} else {
					this.icon_state += "_up";
					GlobalFuncs.to_chat( Task13.User, new Txt( "You push " ).the( this ).item().str( " out of the way." ).ToString() );
					this.gas_transfer_coefficient = null;
					this.permeability_coefficient = null;
					this.flags = 0;
					this.is_flipped = 2;
					this.body_parts_covered &= 28670;
				}
				Task13.User.update_inv_wear_mask();
			}
			return;
		}

	}

}