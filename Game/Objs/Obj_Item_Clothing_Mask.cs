// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Mask : Obj_Item_Clothing {

		public bool mask_adjusted = false;
		public bool ignore_maskadjust = true;
		public int adjusted_flags = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.body_parts_covered = 1;
			this.slot_flags = 32;
			this.put_on_delay = 40;
			this.icon = "icons/obj/clothing/masks.dmi";
		}

		public Obj_Item_Clothing_Mask ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: clothing.dm
		public void adjustmask( dynamic user = null ) {
			
			if ( !this.ignore_maskadjust ) {
				
				if ( ((Mob)user).incapacitated() ) {
					return;
				}

				if ( this.mask_adjusted ) {
					this.icon_state = Lang13.Initial( this, "icon_state" );
					this.gas_transfer_coefficient = Lang13.Initial( this, "gas_transfer_coefficient" );
					this.permeability_coefficient = Lang13.Initial( this, "permeability_coefficient" );
					this.flags |= this.visor_flags;
					this.flags_inv |= this.visor_flags_inv;
					this.flags_cover = Lang13.Initial( this, "flags_cover" );
					user.WriteMsg( new Txt( "<span class='notice'>You push " ).the( this ).item().str( " back into place.</span>" ).ToString() );
					this.mask_adjusted = false;
					this.slot_flags = Lang13.Initial( this, "slot_flags" );
				} else {
					this.icon_state += "_up";
					user.WriteMsg( new Txt( "<span class='notice'>You push " ).the( this ).item().str( " out of the way.</span>" ).ToString() );
					this.gas_transfer_coefficient = null;
					this.permeability_coefficient = null;
					this.flags &= ~this.visor_flags;
					this.flags_inv &= ~this.visor_flags_inv;
					this.flags_cover &= 0;
					this.mask_adjusted = true;

					if ( this.adjusted_flags != 0 ) {
						this.slot_flags = this.adjusted_flags;
					}
				}
				Task13.User.update_inv_wear_mask();
			}
			return;
		}

		// Function from file: clothing.dm
		public virtual dynamic speechModification( dynamic message = null ) {
			return message;
		}

		// Function from file: clothing.dm
		public override ByTable worn_overlays( int? isinhands = null ) {
			isinhands = isinhands ?? GlobalVars.FALSE;

			ByTable _default = null;

			_default = new ByTable();

			if ( !Lang13.Bool( isinhands ) ) {
				
				if ( this.blood_DNA != null && ( ( this.body_parts_covered ??0) & 1 ) != 0 ) {
					_default.Add( new Image( "icons/effects/blood.dmi", null, "maskblood" ) );
				}
			}
			return _default;
		}

	}

}