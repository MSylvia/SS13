// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Dualsaber : Obj_Item_Weapon {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.force = 3;
			this.throwforce = 5;
			this.throw_speed = 1;
			this.throw_range = 5;
			this.w_class = 2;
			this.flags = 288;
			this.origin_tech = "magnets=3;syndicate=4";
			this.attack_verb = new ByTable(new object [] { "attacked", "slashed", "stabbed", "sliced", "torn", "ripped", "diced", "cut" });
			this.icon_state = "dualsaber0";
		}

		public Obj_Item_Weapon_Dualsaber ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: twohanded.dm
		public override bool IsShield(  ) {
			
			if ( Lang13.Bool( this.wielded ) ) {
				return true;
			} else {
				return false;
			}
		}

		// Function from file: twohanded.dm
		public override bool? attack( dynamic M = null, dynamic user = null, string def_zone = null, bool? eat_override = null ) {
			int? i = null;

			base.attack( (object)(M), (object)(user), def_zone, eat_override );

			if ( Lang13.Bool( user.mutations.Contains( 5 ) ) && Lang13.Bool( this.wielded ) && Rand13.PercentChance( 40 ) ) {
				GlobalFuncs.to_chat( user, "<span class='warning'>You twirl around a bit before losing your balance and impaling yourself on the " + this + ".</span>" );
				((Mob_Living)user).take_organ_damage( 20, 25 );
				return null;
			}

			if ( Lang13.Bool( this.wielded ) && Rand13.PercentChance( 50 ) ) {
				Task13.Schedule( 0, (Task13.Closure)(() => {
					i = null;
					i = 1;

					while (( i ??0) <= 8) {
						user.dir = Num13.Rotate( user.dir, 45 );
						Task13.Sleep( 1 );
						i++;
					}
					return;
				}));
			}
			return null;
		}

		// Function from file: twohanded.dm
		public override void update_wield( dynamic user = null ) {
			base.update_wield( (object)(user) );
			this.icon_state = "dualsaber" + ( Lang13.Bool( this.wielded ) ? true : false );
			this.item_state = "dualsaber" + ( Lang13.Bool( this.wielded ) ? true : false );
			this.force = ( Lang13.Bool( this.wielded ) ? 30 : 3 );
			this.w_class = ( Lang13.Bool( this.wielded ) ? 5 : 2 );

			if ( Lang13.Bool( user ) ) {
				((Mob)user).update_inv_l_hand();
				((Mob)user).update_inv_r_hand();
			}
			GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), ( Lang13.Bool( this.wielded ) ? "sound/weapons/saberon.ogg" : "sound/weapons/saberoff.ogg" ), 50, 1 );
			return;
		}

	}

}