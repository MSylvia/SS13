// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Grenade_Clusterbuster : Obj_Item_Weapon_Grenade {

		public Type payload = typeof(Obj_Item_Weapon_Grenade_Flashbang_Cluster);

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_state = "clusterbang";
		}

		public Obj_Item_Weapon_Grenade_Clusterbuster ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: clusterbuster.dm
		public override void prime(  ) {
			int numspawned = 0;
			int again = 0;
			int? more = null;
			int? loop = null;

			this.update_mob();
			numspawned = Rand13.Int( 4, 8 );
			again = 0;
			more = null;
			more = numspawned;

			while (( more ??0) > 0) {
				
				if ( Rand13.PercentChance( 35 ) ) {
					again++;
					numspawned--;
				}
				more--;
			}
			loop = null;
			loop = again;

			while (( loop ??0) > 0) {
				new Obj_Item_Weapon_Grenade_Clusterbuster_Segment( this.loc, this.payload );
				loop--;
			}
			new Obj_Effect_PayloadSpawner( this.loc, this.payload, numspawned );
			GlobalFuncs.playsound( this.loc, "sound/weapons/armbomb.ogg", 75, 1, -3 );
			GlobalFuncs.qdel( this );
			return;
		}

	}

}