// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Decal_ChemicalPuff : Obj_Effect_Decal {

		public dynamic initial_turf = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.pass_flags = 21;
			this.icon = "icons/obj/chempuff.dmi";
		}

		// Function from file: chemical_puff.dm
		public Obj_Effect_Decal_ChemicalPuff ( dynamic pos = null, dynamic color = null, double? reagent_amt = null ) : base( (object)(pos) ) {
			reagent_amt = reagent_amt ?? 5;

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.create_reagents( reagent_amt );
			this.initial_turf = GlobalFuncs.get_turf( pos );

			if ( color != null ) {
				this.icon += color;
			}
			return;
		}

		// Function from file: chemical_puff.dm
		public void react( int? iteration_delay = null ) {
			iteration_delay = iteration_delay ?? 2;

			dynamic cur_turf = null;
			Ent_Static A = null;

			cur_turf = GlobalFuncs.get_turf( this );
			((Reagents)this.reagents).reaction( cur_turf );

			foreach (dynamic _a in Lang13.Enumerate( cur_turf, typeof(Ent_Static) )) {
				A = _a;
				
				((Reagents)this.reagents).reaction( A );

				if ( Map13.GetDistance( this, this.initial_turf ) <= 1 && this.initial_turf.density ) {
					((Reagents)this.reagents).reaction( this.initial_turf );
				}

				if ( ( iteration_delay ??0) > 0 ) {
					Task13.Sleep( iteration_delay ??0 );
				}
			}
			return;
		}

		// Function from file: chemical_puff.dm
		public override dynamic Destroy( dynamic brokenup = null ) {
			GlobalFuncs.qdel( this.reagents );
			this.reagents = null;
			base.Destroy( (object)(brokenup) );
			return null;
		}

	}

}