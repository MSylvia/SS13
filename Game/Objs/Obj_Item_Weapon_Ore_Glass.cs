// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Ore_Glass : Obj_Item_Weapon_Ore {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "materials=1";
			this.points = 1;
			this.materials = new ByTable().Set( "$glass", 2000 );
			this.refined_type = typeof(Obj_Item_Stack_Sheet_Glass);
			this.icon_state = "Glass ore";
		}

		public Obj_Item_Weapon_Ore_Glass ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: ores_coins.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			double? sandAmt = null;
			Obj_Item_Weapon_Ore_Glass G = null;
			Obj_Item_Stack_Sheet_Mineral_Sandstone SS = null;
			Obj_Item_Stack_Sheet_Mineral_Sandstone SA = null;

			user.WriteMsg( "<span class='notice'>You use the sand to make sandstone.</span>" );
			sandAmt = 1;

			foreach (dynamic _a in Lang13.Enumerate( user.loc, typeof(Obj_Item_Weapon_Ore_Glass) )) {
				G = _a;
				
				sandAmt += 1;
				GlobalFuncs.qdel( G );
			}

			while (( sandAmt ??0) > 0) {
				SS = new Obj_Item_Stack_Sheet_Mineral_Sandstone( user.loc );

				if ( ( sandAmt ??0) >= ( SS.max_amount ??0) ) {
					SS.amount = SS.max_amount;
				} else {
					SS.amount = sandAmt;

					foreach (dynamic _b in Lang13.Enumerate( user.loc, typeof(Obj_Item_Stack_Sheet_Mineral_Sandstone) )) {
						SA = _b;
						

						if ( SA != SS && ( SA.amount ??0) < ( SA.max_amount ??0) ) {
							SA.attackby( SS, user );
						}
					}
				}
				sandAmt -= SS.max_amount ??0;
			}
			GlobalFuncs.qdel( this );
			return null;
		}

	}

}