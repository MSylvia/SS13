// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Organ_Brain_Mami : Obj_Item_Organ_Brain {

		public dynamic posibrain = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "biotech=4;programming=4";
			this.icon = "icons/obj/assemblies.dmi";
			this.icon_state = "mami_empty";
		}

		public Obj_Item_Organ_Brain_Mami ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: MaMI.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( this.brainmob != null && !Lang13.Bool( this.posibrain ) ) {
				this.posibrain = new Obj_Item_Device_Mmi_Posibrain( this );
				((Obj_Item_Device_Mmi_Posibrain)this.posibrain).reset_search();
			}

			if ( Lang13.Bool( this.posibrain ) ) {
				GlobalFuncs.to_chat( user, new Txt( "You upend " ).the( this ).item().str( ", dropping its contents onto the floor." ).ToString() );
				this.posibrain.loc = user.loc;
				this.posibrain.brainmob = this.brainmob;
				this.brainmob.container = this.posibrain;
				this.brainmob.loc = this.posibrain;
				this.icon_state = "mami_empty";
				this.name = Lang13.Initial( this, "name" );
				this.posibrain = null;
				this.brainmob = null;
				return 1;
			}
			return base.attack_self( (object)(user), (object)(flag), emp );
		}

		// Function from file: MaMI.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			
			if ( a is Obj_Item_Device_Mmi_Posibrain && !( this.brainmob != null ) ) {
				this.posibrain = a;

				if ( !Lang13.Bool( this.posibrain.brainmob ) || !Lang13.Bool( this.posibrain.brainmob.mind ) || !Lang13.Bool( this.posibrain.brainmob.ckey ) ) {
					GlobalFuncs.to_chat( b, "<span class='warning'>You aren't sure where this brain came from, but you're pretty sure it's a useless brain.</span>" );
					this.posibrain = null;
					return null;
				}

				if ( !Lang13.Bool( b.drop_item( this.posibrain, this ) ) ) {
					b.WriteMsg( new Txt( "<span class='warning'>You can't let go of " ).the( this ).item().str( "!</span>" ).ToString() );
					return null;
				}
				this.visible_message( new Txt( "<span class='notice'>" ).item( b ).str( " sticks " ).a( a ).item().str( " into " ).the( this ).item().str( ".</span>" ).ToString() );
				this.brainmob = this.posibrain.brainmob;
				this.brainmob.loc = this;
				this.brainmob.container = this;
				GlobalFuncs.to_chat( this.brainmob, "<b><font color='red' size=3>Recall your positronic directives!</font></b>" );
				GlobalFuncs.to_chat( this.brainmob, new Txt( "<b>You are " ).a( this.posibrain ).item().str( ", brought into existence on " ).item( GlobalFuncs.station_name() ).str( ".</b>" ).ToString() );
				GlobalFuncs.to_chat( this.brainmob, "<b>As a synthetic intelligence, you answer to all crewmembers, as well as the AI.</b>" );
				GlobalFuncs.to_chat( this.brainmob, "<b>Remember, the purpose of your existence is to serve the crew and the station. Above all else, do no harm.</b>" );
				this.name = "Machine-Man Interface: " + this.brainmob.real_name;
				this.icon_state = "mami_full";
				return 1;
			}
			return base.attackby( (object)(a), (object)(b), (object)(c) );
		}

	}

}