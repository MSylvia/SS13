// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Projectile_Bullet_Hecate : Obj_Item_Projectile_Bullet {

		public bool superspeed = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.damage = 101;
			this.kill_count = 255;
			this.stun = 5;
			this.weaken = 5;
			this.stutter = 5;
			this.phase_type = 31;
			this.penetration = 20;
			this.icon = "icons/obj/projectiles_experimental.dmi";
			this.icon_state = "hecate";
		}

		public Obj_Item_Projectile_Bullet_Hecate ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: bullets.dm
		public override dynamic bresenham_step( double distA = 0, double distB = 0, double? dA = null, double? dB = null, Ent_Static lastposition = null, double? target_dir = null, dynamic reference = null ) {
			
			if ( Lang13.Bool( base.bresenham_step( distA, distB, dA, dB, lastposition, target_dir, (object)(reference) ) ) ) {
				
				if ( this.superspeed ) {
					this.superspeed = false;
					return 1;
				} else {
					this.superspeed = true;
					return 0;
				}
			} else {
				return 0;
			}
			return null;
		}

		// Function from file: bullets.dm
		public override bool OnFired(  ) {
			dynamic M = null;
			dynamic M_turf = null;
			Mob_Living_Carbon_Human H = null;

			base.OnFired();

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.player_list )) {
				M = _a;
				

				if ( Lang13.Bool( M ) && Lang13.Bool( M.client ) ) {
					M_turf = GlobalFuncs.get_turf( M );

					if ( Lang13.Bool( M_turf ) && M_turf.z == this.starting.z ) {
						((Mob)M).playsound_local( this.starting, "sound/weapons/hecate_fire_far.ogg", 25, 1 );
					}
				}
			}

			foreach (dynamic _b in Lang13.Enumerate( Map13.FetchInRange( 1, this ), typeof(Mob_Living_Carbon_Human) )) {
				H = _b;
				

				if ( !H.earprot() ) {
					H.Weaken( 2 );
					H.Stun( 2 );
					H.ear_damage += Rand13.Int( 3, 5 );
					H.ear_deaf = Num13.MaxInt( H.ear_deaf, 15 );
					GlobalFuncs.to_chat( H, "<span class='warning'>Your ears ring!</span>" );
				}
			}
			return false;
		}

	}

}