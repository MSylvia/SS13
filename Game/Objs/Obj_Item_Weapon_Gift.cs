// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Gift : Obj_Item_Weapon {

		public int size = 3;
		public Obj_Item_Weapon_Storage gift = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "gift";
			this.autoignition_temperature = 519.1500244140625;
			this.icon_state = "gift";
		}

		// Function from file: gift_wrappaper.dm
		public Obj_Item_Weapon_Gift ( dynamic loc = null, dynamic target = null, dynamic W = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.w_class = W;
			this.gift = target;
			this.update_icon();
			return;
		}

		// Function from file: gift_wrappaper.dm
		public override void ashify(  ) {
			
			if ( this.gift != null ) {
				this.gift.forceMove( GlobalFuncs.get_turf( this ) );
			}
			base.ashify();
			return;
		}

		// Function from file: gift_wrappaper.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			new ByTable().Set( 1, this ).Set( "force_drop", 1 ).Apply( Lang13.BindFunc( user, "drop_item" ) );

			if ( this.gift != null ) {
				((Mob)user).put_in_active_hand( this.gift );
				this.gift.add_fingerprint( user );
				GlobalFuncs.to_chat( user, new Txt( "<span class='notice'>You unwrapped " ).a( this.gift ).item().str( "!</span>" ).ToString() );
			} else {
				GlobalFuncs.to_chat( user, "<span class='notice'>The gift was empty!</span>" );
			}
			GlobalFuncs.qdel( this );
			return null;
		}

		// Function from file: gift_wrappaper.dm
		public override bool? update_icon( dynamic location = null, dynamic target = null ) {
			
			dynamic _a = this.w_class; // Was a switch-case, sorry for the mess.
			if ( _a==1 || _a==2 ) {
				this.icon_state = "gift-small";
				this.item_state = "gift-small";
			} else if ( _a==3 ) {
				this.icon_state = "gift";
				this.item_state = "gift";
			} else if ( _a==4 ) {
				this.icon_state = "gift-large";
				this.item_state = "gift-large";
			}
			return null;
		}

	}

}