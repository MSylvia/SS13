// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_ProcHolder_Alien_Regurgitate : Obj_Effect_ProcHolder_Alien {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.action_icon_state = "alien_barf";
		}

		public Obj_Effect_ProcHolder_Alien_Regurgitate ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: alien_powers.dm
		public override bool fire( Mob user = null ) {
			Ent_Dynamic A = null;
			Ent_Dynamic M = null;

			
			if ( ((dynamic)user).stomach_contents.len != 0 ) {
				
				foreach (dynamic _a in Lang13.Enumerate( ((dynamic)user).stomach_contents, typeof(Ent_Dynamic) )) {
					A = _a;
					
					((dynamic)user).stomach_contents.Remove( A );
					A.loc = user.loc;

					if ( A is Mob_Living ) {
						M = A;
						((Mob)M).reset_perspective();
					}
				}
				user.visible_message( "<span class='alertealien'>" + user + " hurls out the contents of their stomach!</span>" );
			}
			return false;
		}

	}

}