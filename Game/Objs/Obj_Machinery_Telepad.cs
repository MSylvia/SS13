// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_Telepad : Obj_Machinery {

		public dynamic amplifier = null;
		public bool opened = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.idle_power_usage = 200;
			this.active_power_usage = 5000;
			this.icon = "icons/obj/telescience.dmi";
			this.icon_state = "pad-idle";
		}

		public Obj_Machinery_Telepad ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: telepad.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			dynamic C = null;

			
			if ( a is Obj_Item_Weapon_Screwdriver ) {
				
				if ( this.opened ) {
					GlobalFuncs.playsound( this, "sound/items/Screwdriver.ogg", 50, 1 );
					GlobalFuncs.to_chat( b, new Txt( "<span class = 'caution'>You secure the access port on " ).the( this ).item().str( ".</span>" ).ToString() );
					this.opened = false;
				} else {
					GlobalFuncs.playsound( this, "sound/items/Screwdriver.ogg", 50, 1 );
					GlobalFuncs.to_chat( b, new Txt( "<span class = 'caution'>You open " ).the( this ).item().str( "'s access port.</span>" ).ToString() );
					this.opened = true;
				}
			}

			if ( a is Obj_Item_BluespaceCrystal && this.opened ) {
				
				if ( Lang13.Bool( this.amplifier ) ) {
					GlobalFuncs.to_chat( b, "<span class='warning'>There's something in the booster coil already.</span>" );
					return null;
				}
				GlobalFuncs.playsound( this, "sound/weapons/Genhit.ogg", 50, 1 );
				GlobalFuncs.to_chat( b, new Txt( "<span class = 'caution'>You jam " ).the( a ).item().str( " into " ).the( this ).item().str( "'s booster coil.</span>" ).ToString() );
				((Mob)b).u_equip( a, true );
				a.loc = this;
				this.amplifier = a;
				return null;
			}

			if ( a is Obj_Item_Weapon_Crowbar && this.opened && Lang13.Bool( this.amplifier ) ) {
				GlobalFuncs.to_chat( b, new Txt( "<span class='notice'>You carefully pry " ).the( this.amplifier ).item().str( " from " ).the( this ).item().str( ".</span>" ).ToString() );
				C = this.amplifier;
				C.loc = GlobalFuncs.get_turf( this );
				this.amplifier = null;
				return null;
			}
			return null;
		}

	}

}