// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Glasses_Night_Shadowling : Obj_Item_Clothing_Glasses_Night {

		public int max_darkness_view = 8;
		public bool min_darkness_view = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.vision_flags = 4;
			this.darkness_view = 1;
			this.invis_view = 2;
			this.flash_protect = -1;
			this.unacidable = true;
			this.action_button_name = "Shift Nerves";
			this.action_button_is_hands_free = true;
			this.flags = 130;
			this.icon = "icons/obj/surgery.dmi";
			this.icon_state = "ling_thermal";
		}

		public Obj_Item_Clothing_Glasses_Night_Shadowling ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: shadowling_items.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			dynamic H = null;
			dynamic new_dark_view = null;

			
			if ( !( user is Mob_Living_Carbon_Human ) ) {
				return null;
			}
			H = user;

			if ( H.dna.species.id != "shadowling" ) {
				user.WriteMsg( "<span class='warning'>You aren't sure how to do this...</span>" );
				return null;
			}
			H.dna.species.darksight = 0;
			new_dark_view = Interface13.Input( user, "Enter the radius of tiles to see with night vision.", "Night Vision", "" + new_dark_view, null, InputType.Num );
			new_dark_view = Num13.MaxInt( this.min_darkness_view ?1:0, Num13.MinInt( Convert.ToInt32( new_dark_view ), this.max_darkness_view ) );

			dynamic _a = new_dark_view; // Was a switch-case, sorry for the mess.
			if ( _a==0 ) {
				user.WriteMsg( "<span class='notice'>Your night vision capabilities fade away for the time being.</span>" );
			} else {
				user.WriteMsg( "<span class='notice'>You shift your night vision capabilities to see " + new_dark_view + " tiles away.</span>" );
			}
			this.darkness_view = new_dark_view;
			user.update_sight();
			return null;
		}

	}

}