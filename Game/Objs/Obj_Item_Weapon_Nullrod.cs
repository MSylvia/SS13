// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Nullrod : Obj_Item_Weapon {

		public bool reskinned = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "nullrod";
			this.force = 18;
			this.throw_speed = 3;
			this.throw_range = 4;
			this.throwforce = 10;
			this.w_class = 1;
			this.icon_state = "nullrod";
		}

		public Obj_Item_Weapon_Nullrod ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: holy_weapons.dm
		public void reskin_holy_weapon( dynamic M = null ) {
			dynamic holy_weapons_list = null;
			ByTable display_names = null;
			dynamic V = null;
			dynamic A = null;
			dynamic choice = null;
			int index = 0;
			dynamic A2 = null;
			dynamic holy_weapon = null;

			holy_weapons_list = Lang13.GetTypes( typeof(Obj_Item_Weapon_Nullrod) );
			display_names = new ByTable();

			foreach (dynamic _a in Lang13.Enumerate( holy_weapons_list )) {
				V = _a;
				
				A = V;
				display_names.Add( Lang13.Initial( A, "name" ) );
			}
			choice = Interface13.Input( M, "What theme would you like for your holy weapon?", "Holy Weapon Theme", null, display_names, InputType.Null | InputType.Any );

			if ( !( this != null ) || !Lang13.Bool( choice ) || Lang13.Bool( M.stat ) || !( Map13.GetDistance( M, this ) <= 1 ) || ((Mob)M).restrained() || !Lang13.Bool( M.canmove ) || this.reskinned ) {
				return;
			}
			index = display_names.Find( choice );
			A2 = holy_weapons_list[index];
			holy_weapon = Lang13.Call( A2 );
			GlobalFuncs.feedback_set_details( "chaplain_weapon", "" + choice );

			if ( Lang13.Bool( holy_weapon ) ) {
				holy_weapon.reskinned = GlobalVars.TRUE;
				((Mob)M).unEquip( this );
				((Mob)M).put_in_active_hand( holy_weapon );
				GlobalFuncs.qdel( this );
			}
			return;
		}

		// Function from file: holy_weapons.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( this.reskinned ) {
				return null;
			}

			if ( Lang13.Bool( user.mind ) && user.mind.assigned_role == "Chaplain" ) {
				this.reskin_holy_weapon( user );
			}
			return null;
		}

		// Function from file: holy_weapons.dm
		public override int suicide_act( Mob_Living_Carbon_Human user = null ) {
			user.visible_message( new Txt( "<span class='suicide'>" ).item( user ).str( " is killing " ).himself_herself_itself_themself().str( " with " ).the( this.name ).item().str( "! It looks like " ).he_she_it_they().str( "'s trying get closer to god!</span>" ).ToString() );
			return 3;
		}

	}

}