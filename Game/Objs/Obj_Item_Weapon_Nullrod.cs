// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Nullrod : Obj_Item_Weapon {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "nullrod";
			this.slot_flags = 512;
			this.force = 15;
			this.throw_speed = 1;
			this.throw_range = 4;
			this.throwforce = 10;
			this.w_class = 1;
			this.icon_state = "nullrod";
		}

		public Obj_Item_Weapon_Nullrod ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: null_rod.dm
		public override bool pickup( Mob user = null ) {
			Mob H = null;

			
			if ( user.mind != null ) {
				
				if ( user.mind.assigned_role == "Chaplain" ) {
					GlobalFuncs.to_chat( user, "<span class='notice'>The obsidian rod is teeming with divine power. You feel like you could pulverize a horde of undead with this.</span>" );
				}

				if ( user is Mob_Living_Carbon_Human ) {
					H = user;

					if ( ( GlobalVars.ticker.mode.vampires.Contains( H.mind ) || H.mind.vampire != null ) && !H.mind.vampire.powers.Contains( 16 ) ) {
						H.mind.vampire.smitecounter += 60;
						GlobalFuncs.to_chat( H, "<span class='danger'>You feel an unwanted presence as you pick up the rod. Your body feels like it is burning from the inside!</span>" );
					}
				}
			}
			return false;
		}

		// Function from file: null_rod.dm
		public override bool afterattack( dynamic A = null, dynamic user = null, bool? flag = null, dynamic _params = null, bool? struggle = null ) {
			
			if ( !( flag == true ) ) {
				return false;
			}
			((Mob)user).delayNextAttack( 8 );

			if ( A is Tile_Simulated_Floor ) {
				GlobalFuncs.to_chat( user, "<span class='notice'>You hit the floor with the " + this + ".</span>" );
				Lang13.Call( typeof(Obj_Effect_Rune).GetMethod( "revealrunes" ), this );
			}
			return false;
		}

		// Function from file: null_rod.dm
		public override bool? attack( dynamic M = null, dynamic user = null, string def_zone = null, bool? eat_override = null ) {
			dynamic H = null;

			M.attack_log.Add( "[" + GlobalFuncs.time_stamp() + "] <font color='orange'>Has been attacked with " + this.name + " by " + user.name + " (" + user.ckey + ")</font>" );
			user.attack_log.Add( "[" + GlobalFuncs.time_stamp() + "] <font color='red'>Used the " + this.name + " to attack " + M.name + " (" + M.ckey + ")</font>" );

			if ( !( user is Mob_Living_Carbon ) ) {
				M.LAssailant = null;
			} else {
				M.LAssailant = user;
			}
			GlobalFuncs.msg_admin_attack( "" + user.name + " (" + user.ckey + ") attacked " + M.name + " (" + M.ckey + ") with " + this.name + " (INTENT: " + String13.ToUpper( user.a_intent ) + ") (<A HREF='?_src_=holder;adminplayerobservecoodjump=1;X=" + user.x + ";Y=" + user.y + ";Z=" + user.z + "'>JMP</a>)" );

			if ( !( user is Mob_Living_Carbon_Human ) && !GlobalVars.ticker.mode.infected_monkeys.Contains( Lang13.Bool( user.viruses.Contains( typeof(Disease_JungleFever) ) ) || Lang13.Bool( user.mind ) ) ) {
				GlobalFuncs.to_chat( user, "<span class='warning'>You don't have the dexterity to do this!</span>" );
				return null;
			}

			if ( Lang13.Bool( user.mutations.Contains( 5 ) ) && Rand13.PercentChance( 50 ) ) {
				((Ent_Static)user).visible_message( new Txt( "<span class='warning'>" ).The( this ).item().str( " slips out of " ).item( user ).str( "'s hands and hits " ).his_her_its_their().str( " head.</span>" ).ToString(), new Txt( "<span class='warning'>" ).The( this ).item().str( " slips out of your hands and hits your head.</span>" ).ToString() );
				((Mob_Living)user).apply_damage( 10, "brute", "head" );
				((Mob)user).Stun( 5 );
				return null;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;

				if ( ( GlobalVars.ticker.mode.vampires.Contains( H.mind ) || H.mind.vampire != null ) && Lang13.Bool( user.mind ) && user.mind.assigned_role == "Chaplain" ) {
					
					if ( !H.mind.vampire.powers.Contains( 13 ) ) {
						GlobalFuncs.to_chat( H, new Txt( "<span class='warning'>" ).The( this ).item().str( "'s power violently interferes with your own!</span>" ).ToString() );

						if ( H.mind.vampire.nullified < 5 ) {
							H.mind.vampire.nullified = Num13.MaxInt( 5, H.mind.vampire.nullified + 2 );
						}
						H.mind.vampire.smitecounter += 30;
					}
				}
			}
			base.attack( (object)(M), (object)(user), def_zone, eat_override );
			return null;
		}

		// Function from file: null_rod.dm
		public override dynamic suicide_act( Mob_Living_Carbon_Human user = null ) {
			user.visible_message( new Txt( "<span class='danger'>" ).item( user ).str( " is impaling " ).himself_herself_itself_themself().str( " with " ).the( this ).item().str( "! It looks like " ).he_she_it_they().str( "'s trying to commit suicide.</span>" ).ToString() );
			return 3;
		}

	}

}