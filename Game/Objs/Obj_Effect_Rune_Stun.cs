// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Rune_Stun : Obj_Effect_Rune {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.color = "#640064";
			this.cultist_name = "Stun";
			this.cultist_desc = "Stuns and mutes all nearby non-followers for a brief time.";
			this.invocation = "Fuu ma'jin!";
			this.icon_state = "2";
		}

		public Obj_Effect_Rune_Stun ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: runes.dm
		public void stun_he( Ent_Dynamic M = null ) {
			Ent_Dynamic C = null;

			
			if ( !GlobalFuncs.iscultist( M ) && !Lang13.Bool( ((dynamic)M).null_rod_check() ) ) {
				((dynamic)M).WriteMsg( "<span class='cultitalic'><b>You are disoriented by " + this + "!</b></span>" );
				((dynamic)M).Weaken( 3 );
				((dynamic)M).Stun( 3 );
				((dynamic)M).flash_eyes( 1, 1 );

				if ( M is Mob_Living_Carbon ) {
					C = M;
					((dynamic)C).silent += 3;
				}
			}
			return;
		}

		// Function from file: runes.dm
		public override dynamic Crossed( Ent_Dynamic O = null, dynamic X = null ) {
			base.Crossed( O, (object)(X) );

			if ( O is Mob_Living ) {
				this.stun_he( O );
			}
			return null;
		}

		// Function from file: runes.dm
		public override void invoke( dynamic user = null ) {
			Mob_Living M = null;

			this.visible_message( "<span class='warning'>" + this + " explodes in a bright flash!</span>" );

			foreach (dynamic _a in Lang13.Enumerate( Map13.FetchViewers( null, this ), typeof(Mob_Living) )) {
				M = _a;
				
				this.stun_he( M );
			}
			GlobalFuncs.qdel( this );
			return;
		}

	}

}