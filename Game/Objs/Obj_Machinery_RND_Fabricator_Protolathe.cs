// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_RND_Fabricator_Protolathe : Obj_Machinery_RND_Fabricator {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.flags = 4096;
			this.start_end_anims = true;
			this.build_time = 1;
			this.build_number = 2;
			this.light_color = "#7DE1E1";
			this.research_flags = 87;
			this.part_sets = new ByTable()
				.Set( "Stock Parts", new ByTable() )
				.Set( "Bluespace", new ByTable() )
				.Set( "Data", new ByTable() )
				.Set( "Engineering", new ByTable() )
				.Set( "Medical", new ByTable() )
				.Set( "Mining", new ByTable() )
				.Set( "Robotics", new ByTable() )
				.Set( "Weapons", new ByTable() )
				.Set( "Armor", new ByTable() )
				.Set( "Misc", new ByTable() )
			;
			this.icon_state = "protolathe";
		}

		// Function from file: protolathe.dm
		public Obj_Machinery_RND_Fabricator_Protolathe ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.component_parts = new ByTable(new object [] { 
				new Obj_Item_Weapon_Circuitboard_Protolathe(), 
				new Obj_Item_Weapon_StockParts_MatterBin(), 
				new Obj_Item_Weapon_StockParts_MatterBin(), 
				new Obj_Item_Weapon_StockParts_Manipulator(), 
				new Obj_Item_Weapon_StockParts_Manipulator(), 
				new Obj_Item_Weapon_ReagentContainers_Glass_Beaker(), 
				new Obj_Item_Weapon_ReagentContainers_Glass_Beaker()
			 });
			this.RefreshParts();
			return;
		}

		// Function from file: protolathe.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			base.attackby( (object)(a), (object)(b), (object)(c) );

			if ( Lang13.Bool( ((Ent_Static)a).is_open_container() ) ) {
				return 1;
			}
			return null;
		}

		// Function from file: protolathe.dm
		public override int setup_part_sets(  ) {
			return 0;
		}

		// Function from file: protolathe.dm
		public override dynamic RefreshParts(  ) {
			dynamic _default = null;

			double? T = null;
			Obj_Item_Weapon_ReagentContainers_Glass G = null;

			T = 0;

			foreach (dynamic _a in Lang13.Enumerate( this.component_parts, typeof(Obj_Item_Weapon_ReagentContainers_Glass) )) {
				G = _a;
				
				T += Convert.ToDouble( G.reagents.maximum_volume );
			}
			this.create_reagents( T );
			_default = base.RefreshParts();
			return _default;
		}

		// Function from file: protolathe.dm
		public override dynamic Destroy( dynamic brokenup = null ) {
			dynamic _default = null;

			
			if ( this.linked_console != null && this.linked_console.linked_lathe == this ) {
				this.linked_console.linked_lathe = null;
			}
			_default = base.Destroy( (object)(brokenup) );
			return _default;
		}

		// Function from file: protolathe.dm
		public override dynamic power_change(  ) {
			base.power_change();

			if ( !( ( this.stat & 3 ) != 0 ) ) {
				this.set_light( 2 );
			} else {
				this.set_light( 0 );
			}
			return null;
		}

	}

}