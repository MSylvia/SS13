// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Mounted_Poster : Obj_Item_Mounted {

		public dynamic serial_number = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.w_type = 1;
			this.icon = "icons/obj/contraband.dmi";
			this.icon_state = "rolled_poster";
		}

		// Function from file: poster.dm
		public Obj_Item_Mounted_Poster ( dynamic loc = null, dynamic given_serial = null ) : base( (object)(loc) ) {
			given_serial = given_serial ?? 0;

			
			if ( given_serial == 0 ) {
				this.serial_number = Rand13.Int( 1, GlobalVars.poster_designs.len );
			} else {
				this.serial_number = given_serial;
			}
			this.name += " - No. " + this.serial_number;

			if ( this.serial_number == -1 ) {
				this.name = "Commendation Poster";
			}
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			return;
		}

		// Function from file: poster.dm
		public override void do_build( dynamic on_wall = null, dynamic user = null ) {
			Obj_Structure_Sign_Poster D = null;
			Ent_Static temp_loc = null;

			GlobalFuncs.to_chat( user, "<span class='notice'>You start placing the poster on the wall...</span>" );
			D = new Obj_Structure_Sign_Poster( this.serial_number );
			temp_loc = user.loc;
			Icon13.Flick( "poster_being_set", D );
			D.loc = on_wall;
			GlobalFuncs.qdel( this );
			GlobalFuncs.playsound( D.loc, "sound/items/poster_being_created.ogg", 100, 1 );

			if ( !( D != null ) ) {
				return;
			}

			if ( GlobalFuncs.do_after( user, on_wall, 17 ) ) {
				GlobalFuncs.to_chat( user, "<span class='notice'>You place the poster!</span>" );
			} else {
				D.roll_and_drop( temp_loc );
			}
			return;
		}

	}

}