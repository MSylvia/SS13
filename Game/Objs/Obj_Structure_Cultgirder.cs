// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Cultgirder : Obj_Structure {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/obj/cult.dmi";
			this.icon_state = "cultgirder";
		}

		public Obj_Structure_Cultgirder ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: girders.dm
		public override bool mech_drill_act( double? severity = null, dynamic child = null ) {
			new Obj_Effect_Decal_Remains_Human( this.loc );
			GlobalFuncs.qdel( this );
			return false;
		}

		// Function from file: girders.dm
		public override bool ex_act( double? severity = null, dynamic child = null ) {
			
			switch ((double?)( severity )) {
				case 1:
					GlobalFuncs.qdel( this );
					return false;
					break;
				case 2:
					
					if ( Rand13.PercentChance( 30 ) ) {
						new Obj_Effect_Decal_Remains_Human( this.loc );
						GlobalFuncs.qdel( this );
					}
					return false;
					break;
				case 3:
					
					if ( Rand13.PercentChance( 5 ) ) {
						new Obj_Effect_Decal_Remains_Human( this.loc );
						GlobalFuncs.qdel( this );
					}
					return false;
					break;
			}
			return false;
		}

		// Function from file: girders.dm
		public override bool blob_act( dynamic severity = null ) {
			
			if ( Rand13.PercentChance( 40 ) ) {
				GlobalFuncs.qdel( this );
			}
			return false;
		}

		// Function from file: girders.dm
		public override dynamic attack_animal( Mob_Living user = null ) {
			user.delayNextAttack( 8 );

			if ( Convert.ToDouble( ((dynamic)user).environment_smash ) >= 2 ) {
				new Obj_Effect_Decal_Remains_Human( GlobalFuncs.get_turf( this ) );
				user.visible_message( new Txt( "<span class='danger'>" ).item( user ).str( " smashes through " ).the( this ).item().str( ".</span>" ).ToString(), new Txt( "<span class='attack'>You smash through " ).the( this ).item().str( ".</span>" ).ToString() );
				GlobalFuncs.qdel( this );
			}
			return null;
		}

		// Function from file: girders.dm
		public override bool attack_construct( Mob_Living_SimpleAnimal_Construct user = null, dynamic dist = null ) {
			dynamic Tsrc = null;

			
			if ( user is Mob_Living_SimpleAnimal_Construct_Builder ) {
				GlobalFuncs.to_chat( user, "You start repairing the girder." );

				if ( GlobalFuncs.do_after( user, this, 30 ) ) {
					GlobalFuncs.to_chat( user, "<span class='notice'>Girder repaired.</span>" );
					Tsrc = GlobalFuncs.get_turf( this );

					if ( !( Tsrc is Tile ) ) {
						return false;
					}
					((Tile)Tsrc).ChangeTurf( typeof(Tile_Simulated_Wall_Cult) );
					GlobalFuncs.qdel( this );
				}
				return true;
			}
			return false;
		}

		// Function from file: girders.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			dynamic PK = null;

			
			if ( a is Obj_Item_Weapon_Wrench ) {
				GlobalFuncs.playsound( GlobalFuncs.get_turf( this ), "sound/items/Ratchet.ogg", 100, 1 );
				((Ent_Static)b).visible_message( new Txt( "<span class='notice'>" ).item( b ).str( " starts disassembling " ).the( this ).item().str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You start disassembling " ).the( this ).item().str( ".</span>" ).ToString() );

				if ( GlobalFuncs.do_after( b, this, 40 ) ) {
					((Ent_Static)b).visible_message( new Txt( "<span class='warning'>" ).item( this ).str( " dissasembles " ).the( this ).item().str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You dissasemble " ).the( this ).item().str( ".</span>" ).ToString() );
					GlobalFuncs.qdel( this );
				}
			} else if ( a is Obj_Item_Weapon_Pickaxe ) {
				PK = a;

				if ( !( ( PK.diggables & 4 ) != 0 ) ) {
					return null;
				}
				((Ent_Static)b).visible_message( new Txt( "<span class='warning'>" ).item( b ).str( " starts " ).item( PK.drill_verb ).str( " " ).the( this ).item().str( " with " ).the( PK ).item().str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You start " ).item( PK.drill_verb ).str( " " ).the( this ).item().str( " with " ).the( PK ).item().str( ".</span>" ).ToString() );

				if ( GlobalFuncs.do_after( b, this, 30 ) ) {
					((Ent_Static)b).visible_message( new Txt( "<span class='warning'>" ).item( b ).str( " destroys " ).the( this ).item().str( "!</span>" ).ToString(), new Txt( "<span class='notice'>Your " ).item( PK ).str( " tears through the last of " ).the( this ).item().str( "!</span>" ).ToString() );
					new Obj_Effect_Decal_Remains_Human( this.loc );
					GlobalFuncs.qdel( this );
				}
			}
			return null;
		}

	}

}