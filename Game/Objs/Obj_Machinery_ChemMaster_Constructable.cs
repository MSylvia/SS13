// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_ChemMaster_Constructable : Obj_Machinery_ChemMaster {

		// Function from file: chem_master.dm
		public Obj_Machinery_ChemMaster_Constructable ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			this.component_parts = new ByTable();
			this.component_parts.Add( new Obj_Item_Weapon_Circuitboard_ChemMaster( null ) );
			this.component_parts.Add( new Obj_Item_Weapon_StockParts_Manipulator( null ) );
			this.component_parts.Add( new Obj_Item_Weapon_StockParts_ConsoleScreen( null ) );
			this.component_parts.Add( new Obj_Item_Weapon_ReagentContainers_Glass_Beaker( null ) );
			this.component_parts.Add( new Obj_Item_Weapon_ReagentContainers_Glass_Beaker( null ) );
			return;
		}

		// Function from file: chem_master.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			
			if ( this.default_deconstruction_screwdriver( user, "mixer0_nopower", "mixer0", A ) ) {
				
				if ( Lang13.Bool( this.beaker ) ) {
					this.beaker.loc = this.loc;
					this.beaker = null;
					this.reagents.clear_reagents();
				}

				if ( Lang13.Bool( this.bottle ) ) {
					this.bottle.loc = this.loc;
					this.bottle = null;
				}
				return null;
			}

			if ( this.exchange_parts( user, A ) ) {
				return null;
			}

			if ( Lang13.Bool( this.panel_open ) ) {
				
				if ( A is Obj_Item_Weapon_Crowbar ) {
					this.default_deconstruction_crowbar( A );
					return 1;
				} else {
					user.WriteMsg( "<span class='warning'>You can't use the " + this.name + " while it's panel is opened!</span>" );
					return 1;
				}
			}

			if ( A is Obj_Item_Weapon_ReagentContainers && Lang13.Bool( A.flags & 4096 ) ) {
				
				if ( Lang13.Bool( this.beaker ) ) {
					user.WriteMsg( "<span class='warning'>A beaker is already loaded into the machine!</span>" );
					return null;
				}

				if ( !Lang13.Bool( user.drop_item() ) ) {
					return null;
				}
				this.beaker = A;
				this.beaker.loc = this;
				user.WriteMsg( "<span class='notice'>You add the beaker to the machine.</span>" );
				this.updateUsrDialog();
				this.icon_state = "mixer1";
			} else if ( !this.condi && A is Obj_Item_Weapon_Storage_PillBottle ) {
				
				if ( Lang13.Bool( this.bottle ) ) {
					user.WriteMsg( "<span class='warning'>A pill bottle is already loaded into the machine!</span>" );
					return null;
				}

				if ( !Lang13.Bool( user.drop_item() ) ) {
					return null;
				}
				this.bottle = A;
				A.loc = this;
				user.WriteMsg( "<span class='notice'>You add the pill bottle into the dispenser slot.</span>" );
				this.updateUsrDialog();
			}
			return null;
		}

	}

}