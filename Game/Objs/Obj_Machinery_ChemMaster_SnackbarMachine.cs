// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_ChemMaster_SnackbarMachine : Obj_Machinery_ChemMaster {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.condi = true;
			this.chem_board = typeof(Obj_Item_Weapon_Circuitboard_SnackbarMachine);
			this.windowtype = "snackbar_machine";
		}

		public Obj_Machinery_ChemMaster_SnackbarMachine ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: snackbarmachine.dm
		public override dynamic attack_hand( dynamic a = null, dynamic b = null, dynamic c = null ) {
			dynamic dat = null;
			Reagents R = null;
			Reagent G = null;
			Reagent N = null;
			Browser popup = null;

			
			if ( Lang13.Bool( base.attack_hand( (object)(a), (object)(b), (object)(c) ) ) ) {
				return 1;
			}
			((Mob)a).set_machine( this );
			dat = new ByTable();

			if ( !Lang13.Bool( this.beaker ) ) {
				dat += "Please insert a beaker.<BR>";
			} else {
				R = this.beaker.reagents;
				dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";eject=1'>Eject beaker and Clear Buffer</A><BR>" ).ToString();

				if ( !Lang13.Bool( R.total_volume ) ) {
					dat += "Beaker is empty.";
				} else {
					dat += "Add to buffer:<BR>";

					foreach (dynamic _a in Lang13.Enumerate( R.reagent_list, typeof(Reagent) )) {
						G = _a;
						
						dat += new Txt().item( G.name ).str( " , " ).item( G.volume ).str( " Units -\n					<A href='?src=" ).Ref( this ).str( ";analyze=1;desc=" ).item( G.description ).str( ";name=" ).item( G.name ).str( "'>(Analyze)</A>\n					<A href='?src=" ).Ref( this ).str( ";add=" ).item( G.id ).str( ";amount=1'>(1)</A>\n					<A href='?src=" ).Ref( this ).str( ";add=" ).item( G.id ).str( ";amount=5'>(5)</A>\n					<A href='?src=" ).Ref( this ).str( ";add=" ).item( G.id ).str( ";amount=10'>(10)</A>\n					<A href='?src=" ).Ref( this ).str( ";add=" ).item( G.id ).str( ";amount=" ).item( G.volume ).str( "'>(All)</A>\n					<A href='?src=" ).Ref( this ).str( ";addcustom=" ).item( G.id ).str( "'>(Custom)</A><BR>" ).ToString();
					}
				}
				dat += new Txt( "<HR>Transfer to <A href='?src=" ).Ref( this ).str( ";toggle=1'>" ).item( ( !this.mode ? "disposal" : "beaker" ) ).str( ":</A><BR>" ).ToString();

				if ( Lang13.Bool( this.reagents.total_volume ) ) {
					
					foreach (dynamic _b in Lang13.Enumerate( this.reagents.reagent_list, typeof(Reagent) )) {
						N = _b;
						
						dat += new Txt().item( N.name ).str( " , " ).item( N.volume ).str( " Units -\n					<A href='?src=" ).Ref( this ).str( ";analyze=1;desc=" ).item( N.description ).str( ";name=" ).item( N.name ).str( "'>(Analyze)</A>\n					<A href='?src=" ).Ref( this ).str( ";remove=" ).item( N.id ).str( ";amount=1'>(1)</A>\n					<A href='?src=" ).Ref( this ).str( ";remove=" ).item( N.id ).str( ";amount=5'>(5)</A>\n					<A href='?src=" ).Ref( this ).str( ";remove=" ).item( N.id ).str( ";amount=10'>(10)</A>\n					<A href='?src=" ).Ref( this ).str( ";remove=" ).item( N.id ).str( ";amount=" ).item( N.volume ).str( "'>(All)</A>\n					<A href='?src=" ).Ref( this ).str( ";removecustom=" ).item( N.id ).str( "'>(Custom)</A><BR>" ).ToString();
					}
					dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";createbar=1'>Create snack bar (10 units max)</A>" ).ToString();
				} else {
					dat += "Buffer is empty.<BR>";
				}
			}
			dat = GlobalFuncs.list2text( dat );
			popup = new Browser( Task13.User, "" + this.windowtype, "" + this.name, 575, 400, this );
			popup.set_content( dat );
			popup.open();
			GlobalFuncs.onclose( a, "" + this.windowtype );
			return null;
		}

		// Function from file: snackbarmachine.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hclient = null, HtmlInterface currui = null ) {
			Obj_Item_Weapon_ReagentContainers_Food_Snacks_Snackbar SB = null;

			
			if ( Lang13.Bool( href_list["close"] ) ) {
				Interface13.Browse( Task13.User, null, "window=snackbar_machine" );
				Task13.User.unset_machine();
				return 1;
			}

			if ( Lang13.Bool( href_list["createpill"] ) || Lang13.Bool( href_list["createpill_multiple"] ) || Lang13.Bool( href_list["ejectp"] ) || Lang13.Bool( href_list["change_pill"] ) ) {
				return null;
			}

			if ( Lang13.Bool( base.Topic( href, href_list, (object)(hclient) ) ) ) {
				return 1;
			}
			Task13.User.set_machine( this );

			if ( Lang13.Bool( this.beaker ) && Lang13.Bool( href_list["createbar"] ) ) {
				SB = new Obj_Item_Weapon_ReagentContainers_Food_Snacks_Snackbar( this.loc );
				((Reagents)this.reagents).trans_to( SB, 10 );
				this.updateUsrDialog();
				return 1;
			}
			return null;
		}

	}

}