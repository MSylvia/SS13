// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_ProcHolder_Changeling_ChameleonSkin : Obj_Effect_ProcHolder_Changeling {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.helptext = "Allows us to become invisible after a few seconds of standing still. Can be toggled on and off.";
			this.dna_cost = 2;
			this.chemical_cost = 25;
			this.req_human = true;
			this.genetic_damage = 10;
			this.max_genetic_damage = 50;
		}

		public Obj_Effect_ProcHolder_Changeling_ChameleonSkin ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: chameleon_skin.dm
		public override void on_refund( Mob user = null ) {
			Mob C = null;
			Mutation_Human HM = null;

			
			if ( user.has_dna() != null ) {
				C = user;
				HM = GlobalVars.mutations_list["Chameleon"];

				if ( Lang13.Bool( ((dynamic)C).dna.mutations.Contains( HM ) ) ) {
					HM.force_lose( C );
				}
			}
			return;
		}

		// Function from file: chameleon_skin.dm
		public override dynamic sting_action( Mob user = null, Ent_Static target = null ) {
			Mob H = null;
			Mutation_Human HM = null;

			H = user;

			if ( !( H is Mob_Living_Carbon_Human ) ) {
				return null;
			}
			HM = GlobalVars.mutations_list["Chameleon"];

			if ( Lang13.Bool( ((dynamic)H).dna.mutations.Contains( HM ) ) ) {
				HM.force_lose( H );
			} else {
				HM.force_give( H );
			}
			GlobalFuncs.feedback_add_details( "changeling_powers", "CS" );
			return 1;
		}

	}

}