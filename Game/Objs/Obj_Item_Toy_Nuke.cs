// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Toy_Nuke : Obj_Item_Toy {

		public int cooldown = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.w_class = 2;
			this.icon = "icons/obj/toy.dmi";
			this.icon_state = "nuketoyidle";
		}

		public Obj_Item_Toy_Nuke ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: toys.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			int timeleft = 0;

			
			if ( this.cooldown < Game13.time ) {
				this.cooldown = Game13.time + 1800;
				((Ent_Static)user).visible_message( "<span class='warning'>" + user + " presses a button on " + this + ".</span>", "<span class='notice'>You activate " + this + ", it plays a loud noise!</span>", "<span class='italics'>You hear the click of a button.</span>" );
				Task13.Sleep( 5 );
				this.icon_state = "nuketoy";
				GlobalFuncs.playsound( this, "sound/machines/Alarm.ogg", 100, 0, null, null, false );
				Task13.Sleep( 135 );
				this.icon_state = "nuketoycool";
				Task13.Sleep( this.cooldown - Game13.time );
				this.icon_state = "nuketoyidle";
			} else {
				timeleft = this.cooldown - Game13.time;
				user.WriteMsg( "<span class='alert'>Nothing happens, and '</span>" + Num13.Floor( timeleft / 10 ) + "<span class='alert'>' appears on a small display.</span>" );
			}
			return null;
		}

	}

}