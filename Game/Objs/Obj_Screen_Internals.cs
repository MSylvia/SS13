// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Screen_Internals : Obj_Screen {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.screen_loc = "EAST-1:28,CENTER:17";
			this.icon_state = "internal0";
		}

		public Obj_Screen_Internals ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: screen_objects.dm
		public override bool Click( dynamic loc = null, string control = null, string _params = null ) {
			Mob C = null;
			Obj_Item_Clothing_Mask M = null;
			Mob H = null;

			
			if ( Task13.User is Mob_Living_Carbon ) {
				C = Task13.User;

				if ( !C.incapacitated() ) {
					
					if ( Lang13.Bool( ((dynamic)C).v_internal ) ) {
						((dynamic)C).v_internal = null;
						C.WriteMsg( "<span class='notice'>You are no longer running on internals.</span>" );
						this.icon_state = "internal0";
					} else if ( !( ((dynamic)C).wear_mask is Obj_Item_Clothing_Mask ) ) {
						C.WriteMsg( "<span class='warning'>You are not wearing an internals mask!</span>" );
						return true;
					} else {
						M = ((dynamic)C).wear_mask;

						if ( M.mask_adjusted ) {
							M.adjustmask( C );
						}

						if ( !Lang13.Bool( M.flags & 8 ) ) {
							C.WriteMsg( "<span class='warning'>You are not wearing an internals mask!</span>" );
							return false;
						}

						if ( C.l_hand is Obj_Item_Weapon_Tank ) {
							C.WriteMsg( "<span class='notice'>You are now running on internals from the " + C.l_hand + " on your left hand.</span>" );
							((dynamic)C).v_internal = C.l_hand;
						} else if ( C.r_hand is Obj_Item_Weapon_Tank ) {
							C.WriteMsg( "<span class='notice'>You are now running on internals from the " + C.r_hand + " on your right hand.</span>" );
							((dynamic)C).v_internal = C.r_hand;
						} else if ( C is Mob_Living_Carbon_Human ) {
							H = C;

							if ( ((dynamic)H).s_store is Obj_Item_Weapon_Tank ) {
								H.WriteMsg( "<span class='notice'>You are now running on internals from the " + ((dynamic)H).s_store + " on your " + ((dynamic)H).wear_suit + ".</span>" );
								((dynamic)H).v_internal = ((dynamic)H).s_store;
							} else if ( ((dynamic)H).belt is Obj_Item_Weapon_Tank ) {
								H.WriteMsg( "<span class='notice'>You are now running on internals from the " + ((dynamic)H).belt + " on your belt.</span>" );
								((dynamic)H).v_internal = ((dynamic)H).belt;
							} else if ( ((dynamic)H).l_store is Obj_Item_Weapon_Tank ) {
								H.WriteMsg( "<span class='notice'>You are now running on internals from the " + ((dynamic)H).l_store + " in your left pocket.</span>" );
								((dynamic)H).v_internal = ((dynamic)H).l_store;
							} else if ( ((dynamic)H).r_store is Obj_Item_Weapon_Tank ) {
								H.WriteMsg( "<span class='notice'>You are now running on internals from the " + ((dynamic)H).r_store + " in your right pocket.</span>" );
								((dynamic)H).v_internal = ((dynamic)H).r_store;
							}
						}

						if ( !Lang13.Bool( ((dynamic)C).v_internal ) && ((dynamic)C).back is Obj_Item_Weapon_Tank ) {
							C.WriteMsg( "<span class='notice'>You are now running on internals from the " + ((dynamic)C).back + " on your back.</span>" );
							((dynamic)C).v_internal = ((dynamic)C).back;
						}

						if ( Lang13.Bool( ((dynamic)C).v_internal ) ) {
							this.icon_state = "internal1";
						} else {
							C.WriteMsg( "<span class='warning'>You don't have an oxygen tank!</span>" );
						}
					}
				}
			}
			return false;
		}

	}

}