// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Overlay_Gravitygrid : Obj_Effect_Overlay {

		public Obj_Effect_Overlay_Gravitygrid GG = null;
		public int size = 5;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.pixel_x = -64;
			this.pixel_y = -64;
			this.color = "green";
			this.alpha = 0;
			this.anchored = 1;
			this.icon = "icons/effects/160x160.dmi";
			this.icon_state = "gravitywell_white";
			this.layer = 30;
		}

		public Obj_Effect_Overlay_Gravitygrid ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: gravitywell.dm
		public void LevelUp(  ) {
			Matrix M = null;
			string newcolor = null;

			
			if ( !( this.GG != null ) ) {
				this.GG = new Obj_Effect_Overlay_Gravitygrid( this.loc );
				this.GG.layer = this.layer - 1;
				this.GG.size = this.size + 2;
				this.GG.alpha = 255;
				this.GG.transform *= this.size / 5;
				M = Num13.Matrix();
				M.Scale( this.size / 5 * ( this.GG.size / this.size ), this.size / 5 * ( this.GG.size / this.size ) );
				Icon13.Animate( new ByTable().Set( 1, this.GG ).Set( "transform", M ).Set( "time", 10 ) );
			} else {
				this.GG.LevelUp();
			}
			newcolor = null;

			switch ((string)( this.color )) {
				case "#00c000":
					newcolor = "#ffa500";
					break;
				case "#ffa500":
					newcolor = "#ff0000";
					break;
				default:
					newcolor = "#800080";
					break;
			}
			Icon13.Animate( new ByTable().Set( 1, this ).Set( "color", newcolor ).Set( "time", 10 ) );
			return;
		}

		// Function from file: gravitywell.dm
		public override dynamic Destroy( dynamic brokenup = null ) {
			
			if ( this.GG != null ) {
				GlobalFuncs.qdel( this.GG );
			}
			base.Destroy( (object)(brokenup) );
			return null;
		}

	}

}