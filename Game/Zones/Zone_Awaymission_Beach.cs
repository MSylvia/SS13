// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Zone_Awaymission_Beach : Zone_Awaymission {

		public Sound mysound = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.lighting_use_dynamic = false;
			this.requires_power = false;
			this.icon_state = "null";
		}

		// Function from file: Space Station 13 areas.dm
		public Zone_Awaymission_Beach ( dynamic loc = null ) : base( (object)(loc) ) {
			Sound S = null;

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			S = new Sound();
			this.mysound = S;
			S.file = "sound/ambience/shore.ogg";
			S.repeat = true;
			S.wait = false;
			S.channel = 123;
			S.volume = 100;
			S.priority = 255;
			S.status = GlobalVars.SOUND_UPDATE;
			this.process();
			return;
		}

		// Function from file: Space Station 13 areas.dm
		public void process(  ) {
			Sound S = null;
			int sound_delay = 0;
			Mob_Living_Carbon_Human H = null;

			S = null;
			sound_delay = 0;

			if ( Rand13.PercentChance( 25 ) ) {
				S = new Sound( Rand13.Pick(new object [] { "sound/ambience/seag1.ogg", "sound/ambience/seag2.ogg", "sound/ambience/seag3.ogg" }), null, null, null, 100 );
				sound_delay = Rand13.Int( 0, 50 );
			}

			foreach (dynamic _a in Lang13.Enumerate( this, typeof(Mob_Living_Carbon_Human) )) {
				H = _a;
				

				if ( H.client != null ) {
					this.mysound.status = GlobalVars.SOUND_UPDATE;
					H.WriteMsg( this.mysound );

					if ( S != null ) {
						Task13.Schedule( sound_delay, (Task13.Closure)(() => {
							H.WriteMsg( S );
							return;
						}));
					}
				}
			}
			Task13.Schedule( 60, (Task13.Closure)(() => {
				this.process();
				return;
			}));
			return;
		}

		// Function from file: Space Station 13 areas.dm
		public override dynamic Exited( Ent_Dynamic Obj = null, Ent_Static newloc = null ) {
			
			if ( Obj is Mob ) {
				
				if ( Lang13.Bool( ((dynamic)Obj).client ) ) {
					this.mysound.status = 18;
					((dynamic)Obj).WriteMsg( this.mysound );
				}
			}
			return null;
		}

		// Function from file: Space Station 13 areas.dm
		public override dynamic Entered( Ent_Dynamic Obj = null, Ent_Static oldloc = null ) {
			
			if ( Obj is Mob ) {
				
				if ( Lang13.Bool( ((dynamic)Obj).client ) ) {
					this.mysound.status = GlobalVars.SOUND_UPDATE;
					((dynamic)Obj).WriteMsg( this.mysound );
				}
			}
			return null;
		}

	}

}