// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Device_Assembly_Control_Airlock : Obj_Item_Device_Assembly_Control {

		public bool specialfunctions = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.id = "badmin";
		}

		public Obj_Item_Device_Assembly_Control_Airlock ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: doorcontrol.dm
		public override bool activate(  ) {
			Obj_Machinery_Door_Airlock D = null;

			this.cooldown = 1;

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.airlocks, typeof(Obj_Machinery_Door_Airlock) )) {
				D = _a;
				

				if ( D.id_tag == this.id ) {
					
					if ( ( ( this.specialfunctions ?1:0) & 1 ) != 0 ) {
						Task13.Schedule( 0, (Task13.Closure)(() => {
							
							if ( D != null ) {
								
								if ( D.density ) {
									D.open();
								} else {
									D.close();
								}
							}
							return;
							return;
						}));
					}

					if ( ( ( this.specialfunctions ?1:0) & 2 ) != 0 ) {
						D.aiDisabledIdScanner = !D.aiDisabledIdScanner;
					}

					if ( ( ( this.specialfunctions ?1:0) & 4 ) != 0 ) {
						
						if ( !( D.isWireCut( 4 ) != 0 ) && D.hasPower() ) {
							D.locked = !D.locked;
							D.update_icon();
						}
					}

					if ( ( ( this.specialfunctions ?1:0) & 8 ) != 0 ) {
						D.secondsElectrified = ( D.secondsElectrified != 0 ? 0 : -1 );
					}

					if ( ( ( this.specialfunctions ?1:0) & 16 ) != 0 ) {
						D.safe = !D.safe;
					}
				}
			}
			Task13.Sleep( 10 );
			this.cooldown = 0;
			return false;
		}

	}

}