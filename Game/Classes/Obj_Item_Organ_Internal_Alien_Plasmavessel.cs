// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Organ_Internal_Alien_Plasmavessel : Obj_Item_Organ_Internal_Alien {

		public int storedPlasma = 100;
		public int max_plasma = 250;
		public int heal_rate = 5;
		public int plasma_rate = 10;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "biotech=5;plasmatech=2";
			this.slot = "plasmavessel";
			this.alien_powers = new ByTable(new object [] { typeof(Obj_Effect_ProcHolder_Alien_Plant), typeof(Obj_Effect_ProcHolder_Alien_Transfer) });
			this.icon_state = "plasma";
		}

		public Obj_Item_Organ_Internal_Alien_Plasmavessel ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: organs.dm
		public override void Remove( dynamic M = null, bool? special = null ) {
			special = special ?? false;

			dynamic A = null;

			base.Remove( (object)(M), special );

			if ( M is Mob_Living_Carbon_Alien ) {
				A = M;
				((Mob_Living_Carbon_Alien)A).updatePlasmaDisplay();
			}
			return;
		}

		// Function from file: organs.dm
		public override void Insert( dynamic M = null, int? special = null ) {
			special = special ?? 0;

			dynamic A = null;

			base.Insert( (object)(M), special );

			if ( M is Mob_Living_Carbon_Alien ) {
				A = M;
				((Mob_Living_Carbon_Alien)A).updatePlasmaDisplay();
			}
			return;
		}

		// Function from file: organs.dm
		public override void on_life(  ) {
			double heal_amt = 0;

			
			if ( Lang13.Bool( Lang13.FindIn( typeof(Obj_Structure_Alien_Weeds), this.owner.loc ) ) ) {
				
				if ( Convert.ToDouble( this.owner.health ) >= Convert.ToDouble( this.owner.maxHealth ) ) {
					((Mob_Living_Carbon)this.owner).adjustPlasma( this.plasma_rate );
				} else {
					heal_amt = this.heal_rate;

					if ( !( this.owner is Mob_Living_Carbon_Alien ) ) {
						heal_amt *= 0.2;
					}
					((Mob_Living_Carbon)this.owner).adjustPlasma( this.plasma_rate * 0.5 );
					((Mob_Living)this.owner).adjustBruteLoss( -heal_amt );
					((Mob_Living)this.owner).adjustFireLoss( -heal_amt );
					((Mob_Living)this.owner).adjustOxyLoss( -heal_amt );
					((Mob_Living)this.owner).adjustCloneLoss( -heal_amt );
				}
			}
			return;
		}

		// Function from file: organs.dm
		public override Obj_Item_Weapon_ReagentContainers_Food_Snacks_Organ prepare_eat(  ) {
			Obj_Item_Weapon_ReagentContainers_Food_Snacks_Organ S = null;

			S = base.prepare_eat();
			S.reagents.add_reagent( "plasma", this.storedPlasma / 10 );
			return S;
		}

	}

}