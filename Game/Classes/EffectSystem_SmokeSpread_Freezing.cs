// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class EffectSystem_SmokeSpread_Freezing : EffectSystem_SmokeSpread {

		public dynamic blast = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.effect_type = typeof(Obj_Effect_ParticleEffect_Smoke_Freezing);
		}

		// Function from file: effects_smoke.dm
		public override void start(  ) {
			dynamic T = null;

			
			if ( Lang13.Bool( this.blast ) ) {
				
				foreach (dynamic _a in Lang13.Enumerate( GlobalFuncs.trange( 2, this.location ) )) {
					T = _a;
					
					this.Chilled( T );
				}
			}
			base.start();
			return;
		}

		// Function from file: effects_smoke.dm
		public override void set_up( dynamic amt = null, dynamic loca = null, dynamic flash = null, dynamic flash_fact = null, bool? message = null ) {
			amt = amt ?? 5;
			flash = flash ?? 0;

			base.set_up( (object)(amt), (object)(loca), (object)(flash), (object)(flash_fact), message );
			this.blast = flash;
			return;
		}

		// Function from file: effects_smoke.dm
		public void Chilled( dynamic A = null ) {
			dynamic T = null;
			dynamic G = null;
			Obj_Effect_Hotspot H = null;
			Obj_Machinery_Atmospherics_Components_Unary U = null;
			Mob_Living L = null;
			Obj_Item Item = null;

			
			if ( A is Tile_Simulated ) {
				T = A;

				if ( Lang13.Bool( T.air ) ) {
					G = T.air;

					if ( Map13.GetDistance( T, this.location ) < 2 ) {
						G.temperature = 2;
					}
					((Tile)T).air_update_turf();

					foreach (dynamic _a in Lang13.Enumerate( T, typeof(Obj_Effect_Hotspot) )) {
						H = _a;
						
						GlobalFuncs.qdel( H );

						if ( Lang13.Bool( G.toxins ) ) {
							G.nitrogen += G.toxins;
							G.toxins = 0;
						}
					}
				}

				foreach (dynamic _b in Lang13.Enumerate( T, typeof(Obj_Machinery_Atmospherics_Components_Unary) )) {
					U = _b;
					

					if ( !( U.welded == null ) && !( U.welded == true ) ) {
						U.welded = true;
						U.update_icon();
						U.visible_message( "<span class='danger'>" + U + " was frozen shut!</span>" );
					}
				}

				foreach (dynamic _c in Lang13.Enumerate( T, typeof(Mob_Living) )) {
					L = _c;
					
					L.ExtinguishMob();
				}

				foreach (dynamic _d in Lang13.Enumerate( T, typeof(Obj_Item) )) {
					Item = _d;
					
					Item.extinguish();
				}
			}
			return;
		}

	}

}