// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Paper_Monitorkey : Obj_Item_Weapon_Paper {

		public dynamic server = null;

		// Function from file: message.dm
		public Obj_Item_Weapon_Paper_Monitorkey ( dynamic loc = null ) : base( (object)(loc) ) {
			Obj_Machinery_MessageServer server = null;

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			Task13.Schedule( 10, (Task13.Closure)(() => {
				
				if ( GlobalVars.message_servers != null ) {
					
					foreach (dynamic _a in Lang13.Enumerate( GlobalVars.message_servers, typeof(Obj_Machinery_MessageServer) )) {
						server = _a;
						

						if ( !( server == null ) ) {
							
							if ( !( server.decryptkey == null ) ) {
								this.info = "<center><h2>Daily Key Reset</h2></center><br>The new message monitor key is '" + server.decryptkey + "'.<br>Please keep this a secret and away from the clown.<br>If necessary, change the password to a more secure one.";
								this.info_links = this.info;
								this.overlays.Add( "paper_words" );
								break;
							}
						}
					}
				}
				return;
			}));
			return;
		}

	}

}