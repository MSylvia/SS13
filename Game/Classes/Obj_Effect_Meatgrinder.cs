// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Meatgrinder : Obj_Effect {

		public bool triggered = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/mob/blob.dmi";
			this.icon_state = "blobpod";
		}

		// Function from file: wildwest.dm
		public Obj_Effect_Meatgrinder ( dynamic loc = null ) : base( (object)(loc) ) {
			this.icon_state = "blobpod";
			return;
		}

		// Function from file: wildwest.dm
		public override bool Bumped( dynamic AM = null ) {
			dynamic O = null;
			EffectSystem_SparkSpread s = null;

			
			if ( this.triggered ) {
				return false;
			}

			if ( AM is Mob_Living_Carbon_Human && Convert.ToInt32( AM.stat ) != 2 && Lang13.Bool( AM.ckey ) ) {
				
				foreach (dynamic _a in Lang13.Enumerate( Map13.FetchViewers( this.loc, Game13.view ) )) {
					O = _a;
					
				}
				this.visible_message( "<span class='warning'>" + AM + " triggered the " + this + "!</span>" );
				this.triggered = true;
				s = new EffectSystem_SparkSpread();
				s.set_up( 3, 1, this );
				s.start();
				GlobalFuncs.explosion( AM, 1, 0, 0, 0 );
				GlobalFuncs.qdel( this );
			}
			return false;
		}

		// Function from file: wildwest.dm
		public override dynamic Crossed( Ent_Dynamic O = null, dynamic X = null ) {
			this.Bumped( O );
			return null;
		}

	}

}