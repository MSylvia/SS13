// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Implant_Loyalty : Obj_Item_Weapon_Implant {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "materials=2;biotech=4;programming=4";
			this.activated = false;
		}

		public Obj_Item_Weapon_Implant_Loyalty ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: implant_loyality.dm
		public override bool removed( dynamic target = null, bool? silent = null ) {
			silent = silent ?? false;

			
			if ( base.removed( (object)(target), silent ) ) {
				
				if ( Convert.ToInt32( target.stat ) != 2 && !( silent == true ) ) {
					target.WriteMsg( "<span class='boldnotice'>You feel a sense of liberation as Nanotrasen's grip on your mind fades away.</span>" );
				}
				return true;
			}
			return false;
		}

		// Function from file: implant_loyality.dm
		public override int implant( dynamic source = null, dynamic user = null ) {
			
			if ( base.implant( (object)(source), (object)(user) ) != 0 ) {
				
				if ( ( GlobalVars.ticker.mode.head_revolutionaries | ((GameMode)GlobalVars.ticker.mode).get_gang_bosses() ).Contains( source.mind ) || GlobalFuncs.is_shadow_or_thrall( source ) ) {
					((Ent_Static)source).visible_message( "<span class='warning'>" + source + " seems to resist the implant!</span>", "<span class='warning'>You feel the corporate tendrils of Nanotrasen try to invade your mind!</span>" );
					this.removed( source, true );
					GlobalFuncs.qdel( this );
					return -1;
				}

				if ( ((GameMode)GlobalVars.ticker.mode).get_gangsters().Contains( source.mind ) ) {
					((GameMode)GlobalVars.ticker.mode).remove_gangster( source.mind );
					((Ent_Static)source).visible_message( "<span class='warning'>" + this + " was destroyed in the process!</span>", "<span class='notice'>You feel a surge of loyalty towards Nanotrasen.</span>" );
					this.removed( source, true );
					GlobalFuncs.qdel( this );
					return -1;
				}

				if ( GlobalVars.ticker.mode.revolutionaries.Contains( source.mind ) ) {
					((GameMode)GlobalVars.ticker.mode).remove_revolutionary( source.mind );
				}

				if ( ( GlobalVars.ticker.mode.red_deity_followers | GlobalVars.ticker.mode.blue_deity_followers ).Contains( source.mind ) ) {
					((GameMode)GlobalVars.ticker.mode).remove_hog_follower( source.mind );
				}

				if ( GlobalVars.ticker.mode.cult.Contains( source.mind ) || ( GlobalVars.ticker.mode.blue_deity_prophets | GlobalVars.ticker.mode.red_deity_prophets ).Contains( source.mind ) ) {
					source.WriteMsg( "<span class='warning'>You feel the corporate tendrils of Nanotrasen try to invade your mind!</span>" );
				} else {
					source.WriteMsg( "<span class='notice'>You feel a surge of loyalty towards Nanotrasen.</span>" );
				}
				return 1;
			}
			return 0;
		}

		// Function from file: implant_loyality.dm
		public override string get_data(  ) {
			string dat = null;

			dat = @"<b>Implant Specifications:</b><BR>
				<b>Name:</b> Nanotrasen Employee Management Implant<BR>
				<b>Life:</b> Ten years.<BR>
				<b>Important Notes:</b> Personnel injected with this device tend to be much more loyal to the company.<BR>
				<HR>
				<b>Implant Details:</b><BR>
				<b>Function:</b> Contains a small pod of nanobots that manipulate the host's mental functions.<BR>
				<b>Special Features:</b> Will prevent and cure most forms of brainwashing.<BR>
				<b>Integrity:</b> Implant will last so long as the nanobots are inside the bloodstream.";
			return dat;
		}

	}

}