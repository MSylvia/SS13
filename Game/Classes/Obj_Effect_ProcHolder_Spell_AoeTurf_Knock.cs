// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_ProcHolder_Spell_AoeTurf_Knock : Obj_Effect_ProcHolder_Spell_AoeTurf {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.school = "transmutation";
			this.clothes_req = 0;
			this.invocation = "AULIE OXIN FIERA";
			this.invocation_type = "whisper";
			this.range = 3;
			this.cooldown_min = 20;
			this.action_icon_state = "knock";
		}

		public Obj_Effect_ProcHolder_Spell_AoeTurf_Knock ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: tgstation.dme
		public override bool cast( dynamic targets = null, dynamic thearea = null, dynamic user = null ) {
			thearea = thearea ?? Task13.User;

			dynamic T = null;
			Obj_Machinery_Door door = null;
			Obj_Structure_Closet C = null;

			thearea.WriteMsg( new Sound( "sound/magic/Knock.ogg" ) );

			foreach (dynamic _c in Lang13.Enumerate( targets )) {
				T = _c;
				

				foreach (dynamic _a in Lang13.Enumerate( T.contents, typeof(Obj_Machinery_Door) )) {
					door = _a;
					
					Task13.Schedule( 1, (Task13.Closure)(() => {
						
						if ( door is Obj_Machinery_Door_Airlock ) {
							((dynamic)door).locked = 0;
						}
						door.open();
						return;
					}));
				}

				foreach (dynamic _b in Lang13.Enumerate( T.contents, typeof(Obj_Structure_Closet) )) {
					C = _b;
					
					Task13.Schedule( 1, (Task13.Closure)(() => {
						C.locked = false;
						C.open();
						return;
					}));
				}
			}
			return false;
		}

	}

}