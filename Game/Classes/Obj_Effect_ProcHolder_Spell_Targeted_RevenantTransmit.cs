// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_ProcHolder_Spell_Targeted_RevenantTransmit : Obj_Effect_ProcHolder_Spell_Targeted {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.panel = "Revenant Abilities";
			this.charge_max = 0;
			this.clothes_req = 0;
			this.action_icon_state = "r_transmit";
			this.action_background_icon_state = "bg_revenant";
		}

		public Obj_Effect_ProcHolder_Spell_Targeted_RevenantTransmit ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: revenant_abilities.dm
		public override bool cast( dynamic targets = null, dynamic thearea = null, dynamic user = null ) {
			thearea = thearea ?? Task13.User;

			Mob_Living M = null;
			string msg = null;

			
			foreach (dynamic _a in Lang13.Enumerate( targets, typeof(Mob_Living) )) {
				M = _a;
				
				Task13.Schedule( 0, (Task13.Closure)(() => {
					msg = GlobalFuncs.stripped_input( Task13.User, "What do you wish to tell " + M + "?", null, "" );

					if ( !Lang13.Bool( msg ) ) {
						this.charge_counter = this.charge_max;
						return;
					}
					GlobalFuncs.log_say( "RevenantTransmit: " + GlobalFuncs.key_name( thearea ) + "->" + GlobalFuncs.key_name( M ) + " : " + msg );
					thearea.WriteMsg( "<span class='revennotice'><b>You transmit to " + M + ":</b> " + msg + "</span>" );
					M.WriteMsg( "<span class='revennotice'><b>An alien voice resonates from all around...</b></span><i> " + msg + "</I>" );
					return;
				}));
			}
			return false;
		}

	}

}