// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Lipstick : Obj_Item_Weapon {

		public string colour = "red";
		public bool open = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.w_class = 1;
			this.icon_state = "lipstick";
		}

		public Obj_Item_Weapon_Lipstick ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: cosmetics.dm
		public override bool attack( dynamic M = null, dynamic user = null, bool? def_zone = null ) {
			dynamic H = null;

			
			if ( !this.open ) {
				return false;
			}

			if ( !( M is Mob ) ) {
				return false;
			}

			if ( M is Mob_Living_Carbon_Human ) {
				H = M;

				if ( ((Mob_Living_Carbon)H).is_mouth_covered() ) {
					user.WriteMsg( "<span class='warning'>Remove " + ( H == user ? "your" : "their" ) + " mask!</span>" );
					return false;
				}

				if ( Lang13.Bool( H.lip_style ) ) {
					user.WriteMsg( "<span class='warning'>You need to wipe off the old lipstick first!</span>" );
					return false;
				}

				if ( H == user ) {
					((Ent_Static)user).visible_message( new Txt( "<span class='notice'>" ).item( user ).str( " does their lips with " ).the( this ).item().str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You take a moment to apply " ).the( this ).item().str( ". Perfect!</span>" ).ToString() );
					H.lip_style = "lipstick";
					H.lip_color = this.colour;
					((Mob_Living_Carbon_Human)H).update_body();
				} else {
					((Ent_Static)user).visible_message( new Txt( "<span class='warning'>" ).item( user ).str( " begins to do " ).item( H ).str( "'s lips with " ).the( this ).item().str( ".</span>" ).ToString(), new Txt( "<span class='notice'>You begin to apply " ).the( this ).item().str( " on " ).item( H ).str( "'s lips...</span>" ).ToString() );

					if ( GlobalFuncs.do_after( user, 20, null, H ) ) {
						((Ent_Static)user).visible_message( new Txt().item( user ).str( " does " ).item( H ).str( "'s lips with " ).the( this ).item().str( "." ).ToString(), new Txt( "<span class='notice'>You apply " ).the( this ).item().str( " on " ).item( H ).str( "'s lips.</span>" ).ToString() );
						H.lip_style = "lipstick";
						H.lip_color = this.colour;
						((Mob_Living_Carbon_Human)H).update_body();
					}
				}
			} else {
				user.WriteMsg( "<span class='warning'>Where are the lips on that?</span>" );
			}
			return false;
		}

		// Function from file: cosmetics.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			Image colored = null;

			this.overlays.Cut();
			user.WriteMsg( new Txt( "<span class='notice'>You twist " ).the( this ).item().str( " " ).item( ( this.open ? "closed" : "open" ) ).str( ".</span>" ).ToString() );
			this.open = !this.open;

			if ( this.open ) {
				colored = new Image( "icons/obj/items.dmi", null, "lipstick_uncap_color" );
				colored.color = this.colour;
				this.icon_state = "lipstick_uncap";
				this.overlays.Add( colored );
			} else {
				this.icon_state = "lipstick";
			}
			return null;
		}

	}

}