// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Moneybag : Obj_Item_Weapon {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.flags = 64;
			this.force = 10;
			this.w_class = 4;
			this.burn_state = 0;
			this.burntime = 20;
			this.icon = "icons/obj/storage.dmi";
			this.icon_state = "moneybag";
		}

		public Obj_Item_Weapon_Moneybag ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: money_bag.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hsrc = null ) {
			dynamic COIN = null;

			
			if ( Lang13.Bool( base.Topic( href, href_list, (object)(hsrc) ) ) ) {
				return null;
			}
			Task13.User.set_machine( this );
			this.add_fingerprint( Task13.User );

			if ( Lang13.Bool( href_list["remove"] ) ) {
				
				dynamic _a = href_list["remove"]; // Was a switch-case, sorry for the mess.
				if ( _a=="gold" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Gold), this.contents );
				} else if ( _a=="silver" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Silver), this.contents );
				} else if ( _a=="iron" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Iron), this.contents );
				} else if ( _a=="diamond" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Diamond), this.contents );
				} else if ( _a=="plasma" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Plasma), this.contents );
				} else if ( _a=="uranium" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Uranium), this.contents );
				} else if ( _a=="clown" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Clown), this.contents );
				} else if ( _a=="adamantine" ) {
					COIN = Lang13.FindIn( typeof(Obj_Item_Weapon_Coin_Adamantine), this.contents );
				}

				if ( !Lang13.Bool( COIN ) ) {
					return null;
				}
				COIN.loc = this.loc;
			}
			return null;
		}

		// Function from file: money_bag.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			dynamic C = null;
			dynamic C2 = null;
			Obj O = null;

			base.attackby( (object)(A), (object)(user), _params, silent, replace_spent );

			if ( A is Obj_Item_Weapon_Coin ) {
				C = A;

				if ( !Lang13.Bool( user.drop_item() ) ) {
					return null;
				}
				user.WriteMsg( "<span class='notice'>You add the " + C.name + " into the bag.</span>" );
				this.contents.Add( C );
			}

			if ( A is Obj_Item_Weapon_Moneybag ) {
				C2 = A;

				foreach (dynamic _a in Lang13.Enumerate( C2.contents, typeof(Obj) )) {
					O = _a;
					
					this.contents.Add( O );
				}
				user.WriteMsg( "<span class='notice'>You empty the " + C2.name + " into the bag.</span>" );
			}
			return null;
		}

		// Function from file: money_bag.dm
		public override dynamic attack_hand( dynamic a = null, bool? b = null, bool? c = null ) {
			int amt_gold = 0;
			int amt_silver = 0;
			int amt_diamond = 0;
			int amt_iron = 0;
			int amt_plasma = 0;
			int amt_uranium = 0;
			int amt_clown = 0;
			int amt_adamantine = 0;
			Obj_Item_Weapon_Coin C = null;
			string dat = null;

			amt_gold = 0;
			amt_silver = 0;
			amt_diamond = 0;
			amt_iron = 0;
			amt_plasma = 0;
			amt_uranium = 0;
			amt_clown = 0;
			amt_adamantine = 0;

			foreach (dynamic _a in Lang13.Enumerate( this.contents, typeof(Obj_Item_Weapon_Coin) )) {
				C = _a;
				

				if ( C is Obj_Item_Weapon_Coin_Diamond ) {
					amt_diamond++;
				}

				if ( C is Obj_Item_Weapon_Coin_Plasma ) {
					amt_plasma++;
				}

				if ( C is Obj_Item_Weapon_Coin_Iron ) {
					amt_iron++;
				}

				if ( C is Obj_Item_Weapon_Coin_Silver ) {
					amt_silver++;
				}

				if ( C is Obj_Item_Weapon_Coin_Gold ) {
					amt_gold++;
				}

				if ( C is Obj_Item_Weapon_Coin_Uranium ) {
					amt_uranium++;
				}

				if ( C is Obj_Item_Weapon_Coin_Clown ) {
					amt_clown++;
				}

				if ( C is Obj_Item_Weapon_Coin_Adamantine ) {
					amt_adamantine++;
				}
			}
			dat = "<b>The contents of the moneybag reveal...</b><br>";

			if ( amt_gold != 0 ) {
				dat += new Txt( "Gold coins: " ).item( amt_gold ).str( " <A href='?src=" ).Ref( this ).str( ";remove=gold'>Remove one</A><br>" ).ToString();
			}

			if ( amt_silver != 0 ) {
				dat += new Txt( "Silver coins: " ).item( amt_silver ).str( " <A href='?src=" ).Ref( this ).str( ";remove=silver'>Remove one</A><br>" ).ToString();
			}

			if ( amt_iron != 0 ) {
				dat += new Txt( "Metal coins: " ).item( amt_iron ).str( " <A href='?src=" ).Ref( this ).str( ";remove=iron'>Remove one</A><br>" ).ToString();
			}

			if ( amt_diamond != 0 ) {
				dat += new Txt( "Diamond coins: " ).item( amt_diamond ).str( " <A href='?src=" ).Ref( this ).str( ";remove=diamond'>Remove one</A><br>" ).ToString();
			}

			if ( amt_plasma != 0 ) {
				dat += new Txt( "Plasma coins: " ).item( amt_plasma ).str( " <A href='?src=" ).Ref( this ).str( ";remove=plasma'>Remove one</A><br>" ).ToString();
			}

			if ( amt_uranium != 0 ) {
				dat += new Txt( "Uranium coins: " ).item( amt_uranium ).str( " <A href='?src=" ).Ref( this ).str( ";remove=uranium'>Remove one</A><br>" ).ToString();
			}

			if ( amt_clown != 0 ) {
				dat += new Txt( "Bananium coins: " ).item( amt_clown ).str( " <A href='?src=" ).Ref( this ).str( ";remove=clown'>Remove one</A><br>" ).ToString();
			}

			if ( amt_adamantine != 0 ) {
				dat += new Txt( "Adamantine coins: " ).item( amt_adamantine ).str( " <A href='?src=" ).Ref( this ).str( ";remove=adamantine'>Remove one</A><br>" ).ToString();
			}
			Interface13.Browse( a, "" + dat, "window=moneybag" );
			return null;
		}

	}

}