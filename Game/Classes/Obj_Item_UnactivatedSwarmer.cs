// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_UnactivatedSwarmer : Obj_Item {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon = "icons/mob/swarmer.dmi";
			this.icon_state = "swarmer_unactivated";
		}

		// Function from file: swarmer.dm
		public Obj_Item_UnactivatedSwarmer ( dynamic loc = null ) : base( (object)(loc) ) {
			GlobalFuncs.notify_ghosts( "An unactivated swarmer has been created in " + GlobalFuncs.get_area( this ) + "!", null, new Txt( "<a href=?src=" ).Ref( this ).str( ";ghostjoin=1>(Click to enter)</a>" ).ToString(), this, null, true );
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			return;
		}

		// Function from file: swarmer.dm
		public override void attack_ghost( Mob user = null ) {
			string be_swarmer = null;
			Mob_Living_SimpleAnimal_Hostile_Swarmer S = null;

			be_swarmer = Interface13.Alert( "Become a swarmer? (Warning, You can no longer be cloned!)", null, "Yes", "No" );

			if ( be_swarmer == "No" ) {
				return;
			}

			if ( GlobalFuncs.qdeleted( this ) ) {
				user.WriteMsg( "Swarmer has been occupied by someone else." );
				return;
			}
			S = new Mob_Living_SimpleAnimal_Hostile_Swarmer( GlobalFuncs.get_turf( this.loc ) );
			S.key = user.key;
			GlobalFuncs.qdel( this );
			return;
		}

		// Function from file: swarmer.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hsrc = null ) {
			Mob ghost = null;

			
			if ( Lang13.Bool( href_list["ghostjoin"] ) ) {
				ghost = Task13.User;

				if ( ghost is Mob_Dead_Observer ) {
					this.attack_ghost( ghost );
				}
			}
			return null;
		}

	}

}