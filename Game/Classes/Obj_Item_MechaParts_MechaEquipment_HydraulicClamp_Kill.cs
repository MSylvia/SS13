// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_MechaParts_MechaEquipment_HydraulicClamp_Kill : Obj_Item_MechaParts_MechaEquipment_HydraulicClamp {

		public Obj_Item_MechaParts_MechaEquipment_HydraulicClamp_Kill ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: work_tools.dm
		[VerbInfo( name: "action" )]
		[VerbArg( 1, InputType.Mob | InputType.Obj | InputType.Tile | InputType.Zone )]
		public override bool f_action( dynamic target = null ) {
			dynamic O = null;
			dynamic M = null;

			
			if ( !this.action_checks( target ) ) {
				return false;
			}

			if ( !( this.cargo_holder != null ) ) {
				return false;
			}

			if ( target is Obj ) {
				O = target;

				if ( !Lang13.Bool( O.anchored ) ) {
					
					if ( Convert.ToDouble( ((dynamic)this.cargo_holder).cargo.len ) < Convert.ToDouble( ((dynamic)this.cargo_holder).cargo_capacity ) ) {
						this.chassis.visible_message( "" + this.chassis + " lifts " + target + " and starts to load it into cargo compartment." );
						O.anchored = 1;

						if ( this.do_after_cooldown( target ) ) {
							((dynamic)this.cargo_holder).cargo += O;
							O.loc = this.chassis;
							O.anchored = 0;
							this.occupant_message( "<span class='notice'>" + target + " successfully loaded.</span>" );
							this.log_message( "Loaded " + O + ". Cargo compartment capacity: " + ( ((dynamic)this.cargo_holder).cargo_capacity - ((dynamic)this.cargo_holder).cargo.len ) );
						} else {
							O.anchored = Lang13.Initial( O, "anchored" );
						}
					} else {
						this.occupant_message( "<span class='warning'>Not enough room in cargo compartment!</span>" );
					}
				} else {
					this.occupant_message( "<span class='warning'>" + target + " is firmly secured!</span>" );
				}
			} else if ( target is Mob_Living ) {
				M = target;

				if ( Convert.ToInt32( M.stat ) == 2 ) {
					return false;
				}

				if ( this.chassis.occupant.a_intent == "harm" ) {
					((Ent_Static)target).visible_message( "<span class='danger'>" + this.chassis + " destroys " + target + " in an unholy fury.</span>", "<span class='userdanger'>" + this.chassis + " destroys " + target + " in an unholy fury.</span>" );
				}

				if ( this.chassis.occupant.a_intent == "disarm" ) {
					((Ent_Static)target).visible_message( "<span class='danger'>" + this.chassis + " rips " + target + "'s arms off.</span>", "<span class='userdanger'>" + this.chassis + " rips " + target + "'s arms off.</span>" );
				} else {
					Map13.StepAway( M, this.chassis, null );
					((Ent_Static)target).visible_message( "" + this.chassis + " tosses " + target + " like a piece of paper." );
				}
				return true;
			}
			return false;
		}

	}

}