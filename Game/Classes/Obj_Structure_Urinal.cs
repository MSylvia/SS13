// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_Urinal : Obj_Structure {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/obj/watercloset.dmi";
			this.icon_state = "urinal";
		}

		public Obj_Structure_Urinal ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: watercloset.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			dynamic G = null;
			Ent_Static GM = null;

			
			if ( A is Obj_Item_Weapon_Grab ) {
				G = A;

				if ( !((Obj_Item_Weapon_Grab)G).confirm() ) {
					return null;
				}

				if ( G.affecting is Mob_Living ) {
					GM = G.affecting;

					if ( Convert.ToDouble( G.state ) >= 2 ) {
						
						if ( GM.loc != GlobalFuncs.get_turf( this ) ) {
							user.WriteMsg( "<span class='notice'>" + GM.name + " needs to be on " + this + ".</span>" );
							return null;
						}
						((Mob)user).changeNext_move( 8 );
						((Ent_Static)user).visible_message( "<span class='danger'>" + user + " slams " + GM + " into " + this + "!</span>", "<span class='notice'>You slam " + GM + " into " + this + "!</span>" );
						((dynamic)GM).adjustBruteLoss( 8 );
					} else {
						user.WriteMsg( "<span class='warning'>You need a tighter grip!</span>" );
					}
				}
			}
			return null;
		}

	}

}