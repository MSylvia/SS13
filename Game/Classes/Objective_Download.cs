// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Objective_Download : Objective {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.dangerrating = 10;
		}

		public Objective_Download ( string text = null ) : base( text ) {
			
		}

		// Function from file: objective.dm
		public override int check_completion(  ) {
			Mob_Living_Carbon_Human H = null;
			dynamic SN = null;
			double? current_amount = null;
			Tech current_data = null;

			
			if ( !( this.owner.current is Mob_Living_Carbon_Human ) ) {
				return 0;
			}
			H = this.owner.current;

			if ( !( H != null ) || H.stat == 2 ) {
				return 0;
			}

			if ( !( H.wear_suit is Obj_Item_Clothing_Suit_Space_SpaceNinja ) ) {
				return 0;
			}
			SN = H.wear_suit;

			if ( !SN.s_initialized ) {
				return 0;
			}

			if ( !( SN.stored_research.len != 0 ) ) {
				return 0;
			} else {
				
				foreach (dynamic _a in Lang13.Enumerate( SN.stored_research, typeof(Tech) )) {
					current_data = _a;
					

					if ( current_data.level != 0 ) {
						current_amount += current_data.level - 1;
					}
				}
			}

			if ( ( current_amount ??0) < ( this.target_amount ??0) ) {
				return 0;
			}
			return 1;
		}

		// Function from file: objective.dm
		public double? gen_amount_goal(  ) {
			this.target_amount = Rand13.Int( 10, 20 );
			this.explanation_text = new Txt( "Download " ).item( this.target_amount ).str( " research level" ).s().str( "." ).ToString();
			return this.target_amount;
		}

	}

}