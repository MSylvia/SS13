// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Seeds_Kudzuseed : Obj_Item_Seeds {

		public ByTable mutations = new ByTable();

		protected override void __FieldInit() {
			base.__FieldInit();

			this.species = "kudzu";
			this.plantname = "Kudzu";
			this.product = typeof(Obj_Item_Weapon_ReagentContainers_Food_Snacks_Grown_Kudzupod);
			this.lifespan = 20;
			this.endurance = 10;
			this.maturation = 6;
			this.production = 6;
			this.yield = 4;
			this.potency = 10;
			this.growthstages = 4;
			this.plant_type = 1;
			this.rarity = 30;
			this.icon_state = "seed-kudzu";
		}

		// Function from file: seeds.dm
		public Obj_Item_Seeds_Kudzuseed ( dynamic loc = null, dynamic parent = null ) : base( (object)(loc), (object)(parent) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;

			if ( Lang13.Bool( parent ) ) {
				this.mutations = parent.mutations;
			}
			return;
		}

		// Function from file: seeds.dm
		public override void on_chem_reaction( Reagents S = null ) {
			ByTable temp_mut_list = null;
			SpacevineMutation SM = null;
			SpacevineMutation SM2 = null;
			SpacevineMutation SM3 = null;

			temp_mut_list = new ByTable();

			if ( Lang13.Bool( S.has_reagent( "sterilizine", 5 ) ) ) {
				
				foreach (dynamic _a in Lang13.Enumerate( this.mutations, typeof(SpacevineMutation) )) {
					SM = _a;
					

					if ( SM.quality == 2 ) {
						temp_mut_list.Add( SM );
					}
				}

				if ( Rand13.PercentChance( 20 ) ) {
					this.mutations.Remove( Rand13.PickFromTable( temp_mut_list ) );
				}
				temp_mut_list.Cut();
			}

			if ( Lang13.Bool( S.has_reagent( "welding_fuel", 5 ) ) ) {
				
				foreach (dynamic _b in Lang13.Enumerate( this.mutations, typeof(SpacevineMutation) )) {
					SM2 = _b;
					

					if ( SM2.quality == 1 ) {
						temp_mut_list.Add( SM2 );
					}
				}

				if ( Rand13.PercentChance( 20 ) ) {
					this.mutations.Remove( Rand13.PickFromTable( temp_mut_list ) );
				}
				temp_mut_list.Cut();
			}

			if ( Lang13.Bool( S.has_reagent( "phenol", 5 ) ) ) {
				
				foreach (dynamic _c in Lang13.Enumerate( this.mutations, typeof(SpacevineMutation) )) {
					SM3 = _c;
					

					if ( SM3.quality == 3 ) {
						temp_mut_list.Add( SM3 );
					}
				}

				if ( Rand13.PercentChance( 20 ) ) {
					this.mutations.Remove( Rand13.PickFromTable( temp_mut_list ) );
				}
			}

			if ( Lang13.Bool( S.has_reagent( "blood", 15 ) ) ) {
				this.production += Rand13.Int( 15, -5 );
			}

			if ( Lang13.Bool( S.has_reagent( "amatoxin", 5 ) ) ) {
				this.production += Rand13.Int( 5, -15 );
			}

			if ( Lang13.Bool( S.has_reagent( "plasma", 5 ) ) ) {
				this.potency += Rand13.Int( 5, -15 );
			}

			if ( Lang13.Bool( S.has_reagent( "holywater", 10 ) ) ) {
				this.potency += Rand13.Int( 15, -5 );
			}
			return;
		}

		// Function from file: seeds.dm
		public override ByTable get_analyzer_text(  ) {
			ByTable mut_text = null;
			string text_string = null;
			SpacevineMutation SM = null;

			mut_text = new ByTable();
			text_string = "";

			foreach (dynamic _a in Lang13.Enumerate( this.mutations, typeof(SpacevineMutation) )) {
				SM = _a;
				
				text_string += "" + ( text_string == "" ? "" : ", " ) + SM.name;
			}
			mut_text.Add( "-Plant Mutations: " + ( text_string == "" ? "None" : text_string ) );
			return mut_text;
		}

		// Function from file: seeds.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			this.plant( user );
			user.WriteMsg( "<span class='notice'>You plant the kudzu. You monster.</span>" );
			return null;
		}

		// Function from file: seeds.dm
		public void plant( dynamic user = null ) {
			dynamic T = null;

			
			if ( user.loc is Tile_Space ) {
				return;
			}
			T = GlobalFuncs.get_turf( this );
			GlobalFuncs.message_admins( new Txt( "Kudzu planted by " ).item( GlobalFuncs.key_name_admin( user ) ).str( "(<A HREF='?_src_=holder;adminmoreinfo=" ).Ref( user ).str( "'>?</A>) (<A HREF='?_src_=holder;adminplayerobservefollow=" ).Ref( user ).str( "'>FLW</A>) at (" ).item( T.x ).str( "," ).item( T.y ).str( "," ).item( T.z ).str( " - <A HREF='?_src_=holder;adminplayerobservecoodjump=1;X=" ).item( T.x ).str( ";Y=" ).item( T.y ).str( ";Z=" ).item( T.z ).str( "'>(JMP)</a>)" ).ToString() );
			this.investigate_log( "was planted by " + GlobalFuncs.key_name( user ) + " at (" + T.x + "," + T.y + "," + T.z + ")", "kudzu" );
			new Obj_Effect_SpacevineController( user.loc, this.mutations, this.potency, this.production );
			GlobalFuncs.qdel( this );
			return;
		}

		// Function from file: seeds.dm
		public override ByTable harvest( Mob user = null ) {
			ByTable prod = null;
			Obj_Item_Weapon_ReagentContainers_Food_Snacks_Grown_Kudzupod K = null;

			prod = base.harvest( user );

			foreach (dynamic _a in Lang13.Enumerate( prod, typeof(Obj_Item_Weapon_ReagentContainers_Food_Snacks_Grown_Kudzupod) )) {
				K = _a;
				
				K.mutations = this.mutations;
			}
			return null;
		}

		// Function from file: seeds.dm
		public override int suicide_act( Mob_Living_Carbon_Human user = null ) {
			user.visible_message( new Txt( "<span class='suicide'>" ).item( user ).str( " swallows the pack of kudzu seeds! It looks like " ).he_she_it_they().str( "'s trying to commit suicide..</span>" ).ToString() );
			this.plant( user );
			return 1;
		}

	}

}