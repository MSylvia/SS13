// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Structure_HivebotBeacon : Obj_Structure {

		public string bot_type = "norm";
		public int bot_amt = 10;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/mob/hivebot.dmi";
			this.icon_state = "def_radar-off";
		}

		// Function from file: hivebot.dm
		public Obj_Structure_HivebotBeacon ( dynamic loc = null ) : base( (object)(loc) ) {
			EffectSystem_SmokeSpread smoke = null;

			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			smoke = new EffectSystem_SmokeSpread();
			smoke.set_up( 2, this.loc );
			smoke.start();
			this.visible_message( "<span class='boldannounce'>The " + this + " warps in!</span>" );
			GlobalFuncs.playsound( this.loc, "sound/effects/EMPulse.ogg", 25, 1 );
			Task13.Schedule( Rand13.Int( 10, 600 ), (Task13.Closure)(() => {
				this.warpbots();
				return;
			}));
			return;
		}

		// Function from file: tgstation.dme
		public void warpbots(  ) {
			this.icon_state = "def_radar";
			this.visible_message( "<span class='danger'>The " + this + " turns on!</span>" );

			while (this.bot_amt > 0) {
				this.bot_amt--;

				switch ((string)( this.bot_type )) {
					case "norm":
						new Mob_Living_SimpleAnimal_Hostile_Hivebot( GlobalFuncs.get_turf( this ) );
						break;
					case "range":
						new Mob_Living_SimpleAnimal_Hostile_Hivebot_Range( GlobalFuncs.get_turf( this ) );
						break;
					case "rapid":
						new Mob_Living_SimpleAnimal_Hostile_Hivebot_Rapid( GlobalFuncs.get_turf( this ) );
						break;
				}
			}
			Task13.Sleep( 100 );
			this.visible_message( "<span class='boldannounce'>The " + this + " warps out!</span>" );
			GlobalFuncs.playsound( this.loc, "sound/effects/EMPulse.ogg", 25, 1 );
			GlobalFuncs.qdel( this );
			return;
		}

	}

}