// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Device_SlimeScanner : Obj_Item_Device {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.item_state = "analyzer";
			this.origin_tech = "biotech=1";
			this.w_class = 2;
			this.flags = 64;
			this.throw_speed = 3;
			this.materials = new ByTable().Set( "$metal", 30 ).Set( "$glass", 20 );
			this.icon_state = "adv_spectrometer";
		}

		public Obj_Item_Device_SlimeScanner ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: scanners.dm
		public override bool attack( dynamic M = null, dynamic user = null, bool? def_zone = null ) {
			dynamic T = null;

			
			if ( !( M is Mob_Living_SimpleAnimal_Slime ) ) {
				user.show_message( "<span class='warning'>This device can only scan slimes!</span>", 1 );
				return false;
			}
			T = M;
			user.show_message( "Slime scan results:", 1 );
			user.show_message( "" + T.colour + " " + ( T.is_adult ? "adult" : "baby" ) + " slime", 1 );
			user.show_message( "Nutrition: " + T.nutrition + "/" + ((Mob_Living_SimpleAnimal_Slime)T).get_max_nutrition(), 1 );

			if ( T.nutrition < ((Mob_Living_SimpleAnimal_Slime)T).get_starve_nutrition() ) {
				user.show_message( "<span class='warning'>Warning: slime is starving!</span>", 1 );
			} else if ( T.nutrition < ((Mob_Living_SimpleAnimal_Slime)T).get_hunger_nutrition() ) {
				user.show_message( "<span class='warning'>Warning: slime is hungry</span>", 1 );
			}
			user.show_message( "Electric change strength: " + T.powerlevel, 1 );
			user.show_message( "Health: " + T.health, 1 );

			if ( T.slime_mutation[4] == T.colour ) {
				user.show_message( "This slime does not evolve any further.", 1 );
			} else if ( T.slime_mutation[3] == T.slime_mutation[4] ) {
				
				if ( T.slime_mutation[2] == T.slime_mutation[1] ) {
					user.show_message( "Possible mutation: " + T.slime_mutation[3], 1 );
					user.show_message( "Genetic destability: " + T.mutation_chance / 2 + " % chance of mutation on splitting", 1 );
				} else {
					user.show_message( "Possible mutations: " + T.slime_mutation[1] + ", " + T.slime_mutation[2] + ", " + T.slime_mutation[3] + " (x2)", 1 );
					user.show_message( "Genetic destability: " + T.mutation_chance + " % chance of mutation on splitting", 1 );
				}
			} else {
				user.show_message( "Possible mutations: " + T.slime_mutation[1] + ", " + T.slime_mutation[2] + ", " + T.slime_mutation[3] + ", " + T.slime_mutation[4], 1 );
				user.show_message( "Genetic destability: " + T.mutation_chance + " % chance of mutation on splitting", 1 );
			}

			if ( T.cores > 1 ) {
				user.show_message( "Anomalious slime core amount detected", 1 );
			}
			user.show_message( "Growth progress: " + T.amount_grown + "/" + 10, 1 );
			return false;
		}

	}

}