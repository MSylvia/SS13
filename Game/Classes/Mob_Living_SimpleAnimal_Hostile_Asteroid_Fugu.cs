// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Mob_Living_SimpleAnimal_Hostile_Asteroid_Fugu : Mob_Living_SimpleAnimal_Hostile_Asteroid {

		public bool wumbo = false;
		public int inflate_cooldown = 0;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_living = "Fugu";
			this.icon_aggro = "Fugu";
			this.icon_dead = "Fugu_dead";
			this.icon_gib = "syndicate_gib";
			this.attack_sound = "sound/weapons/punch1.ogg";
			this.move_to_delay = 5;
			this.friendly = "floats near";
			this.speak_emote = new ByTable(new object [] { "puffs" });
			this.vision_range = 5;
			this.speed = 0;
			this.maxHealth = 50;
			this.health = 50;
			this.harm_intent_damage = 5;
			this.attacktext = "chomps";
			this.throw_message = "is avoided by the";
			this.idle_vision_range = 5;
			this.mob_size = 1;
			this.loot = new ByTable(new object [] { new ObjectInitializer(typeof(Obj_Item_Asteroid_FuguGland)).Set( "layer", 401 ) });
			this.icon_state = "Fugu";
		}

		public Mob_Living_SimpleAnimal_Hostile_Asteroid_Fugu ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: mining_mobs.dm
		public override bool death( bool? gibbed = null, bool? toast = null ) {
			this.Deflate();
			base.death( gibbed, toast );
			return false;
		}

		// Function from file: mining_mobs.dm
		public void Deflate(  ) {
			
			if ( this.wumbo ) {
				Map13.Walk( this, 0, 0 );
				this.wumbo = false;
				this.icon_state = "Fugu";
				this.melee_damage_lower = 0;
				this.melee_damage_upper = 0;
				this.harm_intent_damage = 5;
				this.throw_message = "is avoided by the";
				this.retreat_distance = 9;
				this.minimum_distance = 9;
				this.move_to_delay = 2;
				this.transform /= 2;
				this.inflate_cooldown = 4;
				this.environment_smash = 0;
				this.mob_size = 1;
				this.speed = 0;
			}
			return;
		}

		// Function from file: mining_mobs.dm
		public override void Aggro(  ) {
			base.Aggro();
			this.Inflate();
			return;
		}

		// Function from file: mining_mobs.dm
		public override bool adjustHealth( dynamic amount = null ) {
			
			if ( this.wumbo ) {
				return false;
			}
			base.adjustHealth( (object)(amount) );
			return false;
		}

		// Function from file: mining_mobs.dm
		public override bool Life(  ) {
			
			if ( !this.wumbo ) {
				this.inflate_cooldown = Num13.MaxInt( this.inflate_cooldown - 1, 0 );
			}

			if ( Lang13.Bool( this.target ) && this.AIStatus == 1 ) {
				this.Inflate();
			}
			base.Life();
			return false;
		}

		// Function from file: mining_mobs.dm
		[Verb]
		[VerbInfo( desc: "Temporarily increases your size, and makes you significantly more dangerous and tough.", group: "Fugu" )]
		public void Inflate(  ) {
			
			if ( this.wumbo ) {
				this.WriteMsg( "<span class='notice'>You're already inflated.</span>" );
				return;
			}

			if ( this.inflate_cooldown != 0 ) {
				this.WriteMsg( "<span class='notice'>We need time to gather our strength.</span>" );
				return;
			}

			if ( this.buffed != 0 ) {
				this.WriteMsg( "<span class='notice'>Something is interfering with our growth.</span>" );
				return;
			}
			this.wumbo = true;
			this.icon_state = "Fugu_big";
			this.melee_damage_lower = 15;
			this.melee_damage_upper = 20;
			this.harm_intent_damage = 0;
			this.throw_message = "is absorbed by the girth of the";
			this.retreat_distance = null;
			this.minimum_distance = 1;
			this.move_to_delay = 6;
			this.transform *= 2;
			this.environment_smash = 2;
			this.mob_size = 3;
			this.speed = 1;
			Task13.Schedule( 100, (Task13.Closure)(() => {
				this.Deflate();
				return;
			}));
			return;
		}

	}

}