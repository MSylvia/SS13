// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Rune_Deafen : Obj_Effect_Rune {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.color = "#00ff00";
			this.cultist_name = "Debilitate";
			this.cultist_desc = "Causes all non-followers nearby to lose their hearing, sight and voice.";
			this.invocation = "Sti kaliedir!";
			this.icon_state = "4";
		}

		public Obj_Effect_Rune_Deafen ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: runes.dm
		public override void invoke( dynamic user = null ) {
			Mob_Living_Carbon C = null;

			this.visible_message( "<span class='warning'>" + this + " emits a blinding red flash!</span>" );

			foreach (dynamic _a in Lang13.Enumerate( Map13.FetchViewers( null, this ), typeof(Mob_Living_Carbon) )) {
				C = _a;
				

				if ( !GlobalFuncs.iscultist( C ) && !C.null_rod_check() ) {
					C.WriteMsg( "<span class='cultlarge'>You feel oily shadows cover your senses.</span>" );
					C.adjustEarDamage( 0, 50 );
					C.flash_eyes( 1, true );
					C.eye_blurry += 50;
					C.eye_blind += 20;
					C.silent += 10;
				}
			}
			GlobalFuncs.qdel( this );
			return;
		}

	}

}