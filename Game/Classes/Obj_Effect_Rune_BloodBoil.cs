// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Effect_Rune_BloodBoil : Obj_Effect_Rune {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.cultist_name = "Boil Blood";
			this.cultist_desc = "Boils the blood of non-believers who can see the rune, dealing extreme amounts of damage.";
			this.invocation = "Dedo ol'btoh!";
			this.req_cultists = 2;
			this.icon_state = "4";
		}

		public Obj_Effect_Rune_BloodBoil ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: runes.dm
		public override void invoke( dynamic user = null ) {
			Mob_Living_Carbon C = null;
			Mob_Living_Carbon M = null;

			this.visible_message( "<span class='warning'>" + this + " briefly bubbles before exploding!</span>" );

			foreach (dynamic _a in Lang13.Enumerate( Map13.FetchViewers( null, this ), typeof(Mob_Living_Carbon) )) {
				C = _a;
				

				if ( !GlobalFuncs.iscultist( C ) ) {
					
					if ( C.null_rod_check() ) {
						C.WriteMsg( "<span class='userdanger'>The null rod suddenly burns hotly before returning to normal!</span>" );
						continue;
					}
					C.WriteMsg( "<span class='cultlarge'>Your blood boils in your veins!</span>" );
					C.take_overall_damage( 51, 51 );
				}
			}

			foreach (dynamic _b in Lang13.Enumerate( Map13.FetchInRange( this, 1 ), typeof(Mob_Living_Carbon) )) {
				M = _b;
				

				if ( GlobalFuncs.iscultist( M ) ) {
					M.apply_damage( 15, "brute", Rand13.Pick(new object [] { "l_arm", "r_arm" }) );
					M.WriteMsg( "<span class='cultitalic'>" + this + " saps your strength!</span>" );
				}
			}
			GlobalFuncs.explosion( GlobalFuncs.get_turf( this ), -1, 0, 1, 5 );
			GlobalFuncs.qdel( this );
			return;
		}

	}

}