// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Rollingpaper : Obj_Item_Weapon {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.w_class = 1;
			this.icon = "icons/obj/cigarettes.dmi";
			this.icon_state = "cig_paper";
		}

		public Obj_Item_Weapon_Rollingpaper ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: cigs_lighters.dm
		public override bool afterattack( dynamic target = null, dynamic user = null, bool? proximity_flag = null, string click_parameters = null ) {
			dynamic O = null;
			Obj_Item_Clothing_Mask_Cigarette_Rollie R = null;

			
			if ( !( proximity_flag == true ) ) {
				return false;
			}

			if ( target is Obj_Item_Weapon_ReagentContainers_Food_Snacks_Grown ) {
				O = target;

				if ( O.dry ) {
					((Mob)user).unEquip( target, true );
					((Mob)user).unEquip( this, true );
					R = new Obj_Item_Clothing_Mask_Cigarette_Rollie( user.loc );
					R.chem_volume = target.reagents.total_volume;
					((Reagents)target.reagents).trans_to( R, R.chem_volume );
					((Mob)user).put_in_active_hand( R );
					user.WriteMsg( "<span class='notice'>You roll the " + target.name + " into a rolling paper.</span>" );
					R.desc = "Dried " + target.name + " rolled up in a thin piece of paper.";
					GlobalFuncs.qdel( target );
					GlobalFuncs.qdel( this );
				} else {
					user.WriteMsg( "<span class='warning'>You need to dry this first!</span>" );
				}
			} else {
				base.afterattack( (object)(target), (object)(user), proximity_flag, click_parameters );
			}
			return false;
		}

	}

}