// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Twohanded_Mjollnir : Obj_Item_Weapon_Twohanded {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.flags = 64;
			this.slot_flags = 1024;
			this.force = 5;
			this.force_unwielded = 5;
			this.force_wielded = 25;
			this.throwforce = 30;
			this.w_class = 5;
			this.origin_tech = "combat=5;powerstorage=5";
			this.icon_state = "mjollnir0";
		}

		public Obj_Item_Weapon_Twohanded_Mjollnir ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: singularityhammer.dm
		public override bool? update_icon( dynamic new_state = null, dynamic new_icon = null, int? new_px = null, int? new_py = null ) {
			this.icon_state = "mjollnir" + this.wielded;
			return null;
		}

		// Function from file: singularityhammer.dm
		public override bool throw_impact( dynamic target = null, Mob_Living_Carbon thrower = null ) {
			bool _default = false;

			dynamic L = null;

			_default = base.throw_impact( (object)(target), thrower );

			if ( target is Mob_Living ) {
				L = target;
				((Mob)L).Stun( 3 );
				this.shock( L );
			}
			return _default;
		}

		// Function from file: singularityhammer.dm
		public override bool attack( dynamic M = null, dynamic user = null, bool? def_zone = null ) {
			base.attack( (object)(M), (object)(user), def_zone );

			if ( this.wielded ) {
				GlobalFuncs.playsound( this.loc, "sparks", 50, 1 );

				if ( M is Mob_Living ) {
					((Mob)M).Stun( 3 );
					this.shock( M );
				}
			}
			return false;
		}

		// Function from file: singularityhammer.dm
		public void shock( dynamic target = null ) {
			EffectSystem_LightningSpread s = null;
			dynamic throw_target = null;

			s = new EffectSystem_LightningSpread();
			s.set_up( 5, 1, target.loc );
			s.start();
			((Ent_Static)target).visible_message( "<span class='danger'>" + target.name + " was shocked by the " + this.name + "!</span>", "<span class='userdanger'>You feel a powerful shock course through your body sending you flying!</span>", "<span class='italics'>You hear a heavy electrical crack!</span>" );
			throw_target = GlobalFuncs.get_edge_target_turf( target, Map13.GetDistance( this, Map13.GetStepAway( target, this, null ) ) );
			((Ent_Dynamic)target).throw_at_fast( throw_target, 200, 4 );
			return;
		}

	}

}