// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Organ_Internal_Gland_Bloody : Obj_Item_Organ_Internal_Gland {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "materials=4;biotech=6";
			this.cooldown_low = 200;
			this.cooldown_high = 400;
			this.uses = -1;
		}

		public Obj_Item_Organ_Internal_Gland_Bloody ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: gland.dm
		public override void activate(  ) {
			dynamic T = null;
			Mob_Living_Carbon_Human H = null;

			((Mob_Living)this.owner).adjustBruteLoss( 15 );
			((Ent_Static)this.owner).visible_message( "<span class='danger'>" + this.owner + "'s skin erupts with blood!</span>", "<span class='userdanger'>Blood pours from your skin!</span>" );

			foreach (dynamic _a in Lang13.Enumerate( Map13.FetchInViewExcludeThis( this.owner, 3 ) )) {
				T = _a;
				
				((Ent_Static)T).add_blood_floor( this.owner );
			}

			foreach (dynamic _b in Lang13.Enumerate( Map13.FetchInViewExcludeThis( this.owner, 3 ), typeof(Mob_Living_Carbon_Human) )) {
				H = _b;
				

				if ( Lang13.Bool( H.wear_suit ) ) {
					((Ent_Static)H.wear_suit).add_blood( this.owner );
					H.update_inv_wear_suit(  );
				} else if ( Lang13.Bool( H.w_uniform ) ) {
					((Ent_Static)H.w_uniform).add_blood( this.owner );
					H.update_inv_w_uniform(  );
				}
			}
			return;
		}

	}

}