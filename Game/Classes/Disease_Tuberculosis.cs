// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Disease_Tuberculosis : Disease {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Fungal tuberculosis";
			this.max_stages = 4;
			this.spread_text = "Airborne";
			this.cure_text = "Spaceacillin & salbutamol";
			this.cures = new ByTable(new object [] { "spaceacillin", "salbutamol" });
			this.agent = "Fungal Tubercle bacillus Cosmosis";
			this.viable_mobtypes = new ByTable(new object [] { typeof(Mob_Living_Carbon_Human) });
			this.cure_chance = 5;
			this.desc = "A rare highly transmittable virulent virus. Few samples exist, rumoured to be carefully grown and cultured by clandestine bio-weapon specialists. Causes fever, blood vomiting, lung damage, weight loss, and fatigue.";
			this.required_organs = new ByTable(new object [] { typeof(Obj_Item_Organ_Limb_Head) });
			this.severity = "Dangerous!";
		}

		// Function from file: tuberculosis.dm
		public override void stage_act(  ) {
			base.stage_act();

			switch ((int?)( this.stage )) {
				case 2:
					
					if ( Rand13.PercentChance( 2 ) ) {
						((Mob)this.affected_mob).emote( "cough" );
						this.affected_mob.WriteMsg( "<span class='danger'>Your chest hurts.</span>" );
					}

					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='danger'>Your stomach violently rumbles!</span>" );
					}

					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='danger'>You feel a sharp pain from your lower chest!</span>" );
						((Mob_Living)this.affected_mob).adjustOxyLoss( 5 );
						((Mob)this.affected_mob).emote( "gasp" );
					}

					if ( Rand13.PercentChance( 5 ) ) {
						((Mob_Living_Carbon)this.affected_mob).vomit( 20 );
					}
					break;
				case 3:
					
					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='userdanger'>You see four of everything</span>" );
						((Mob)this.affected_mob).Dizzy( 5 );
					}

					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='danger'>You feel a cold sweat form.</span>" );
					}

					if ( Rand13.PercentChance( 10 ) ) {
						this.affected_mob.WriteMsg( "<span class='danger'>You feel air escape from your lungs painfully.</span>" );
						((Mob_Living)this.affected_mob).adjustOxyLoss( 25 );
						((Mob)this.affected_mob).emote( "gasp" );
					}
					break;
				case 4:
					
					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='userdanger'>" + Rand13.Pick(new object [] { "You feel your heart slowing...", "You relax and slow your heartbeat." }) + "</span>" );
						((Mob_Living)this.affected_mob).adjustStaminaLoss( 70 );
					}

					if ( Rand13.PercentChance( 10 ) ) {
						((Mob_Living)this.affected_mob).adjustStaminaLoss( 100 );
						((Ent_Static)this.affected_mob).visible_message( "<span class='warning'>" + this.affected_mob + " faints!</span>", "<span class='userdanger'>You surrender yourself and feel at peace...</span>" );
						this.affected_mob.sleeping += 5;
					}

					if ( Rand13.PercentChance( 2 ) ) {
						this.affected_mob.WriteMsg( "<span class='userdanger'>You feel your mind relax and your thoughts drift!</span>" );
						this.affected_mob.confused = Num13.MinInt( 100, ((int)( this.affected_mob.confused + 8 )) );
					}

					if ( Rand13.PercentChance( 15 ) ) {
						((Mob_Living_Carbon)this.affected_mob).vomit( 0, true );
					}

					if ( Rand13.PercentChance( 3 ) ) {
						this.affected_mob.WriteMsg( "<span class='warning'><i>" + Rand13.Pick(new object [] { "Your stomach silently rumbles...", "Your stomach seizes up and falls limp, muscles dead and lifeless.", "You could eat a crayon" }) + "</i></span>" );
						this.affected_mob.overeatduration = Num13.MaxInt( this.affected_mob.overeatduration - 100, 0 );
						this.affected_mob.nutrition = Num13.MaxInt( ((int)( this.affected_mob.nutrition - 100 )), 0 );
					}

					if ( Rand13.PercentChance( 15 ) ) {
						this.affected_mob.WriteMsg( "<span class='danger'>" + Rand13.Pick(new object [] { "You feel uncomfortably hot...", "You feel like unzipping your jumpsuit", "You feel like taking off some clothes..." }) + "</span>" );
						this.affected_mob.bodytemperature += 40;
					}
					break;
			}
			return;
		}

	}

}