// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Holiday_Easter : Holiday {

		public bool days_early = true;
		public bool days_extra = true;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.name = "Easter";
		}

		// Function from file: holidays.dm
		public override bool shouldCelebrate( double? dd = null, double? mm = null, double? yy = null ) {
			string yy_string = null;
			ByTable easters = null;

			
			if ( !Lang13.Bool( this.begin_month ) ) {
				yy_string = "" + yy;
				easters = new ByTable()
					.Set( "15", 14 )
					.Set( "16", 6 )
					.Set( "17", 25 )
					.Set( "18", 10 )
					.Set( "19", 30 )
					.Set( "20", 22 )
					.Set( "21", 13 )
					.Set( "22", 26 )
					.Set( "23", 18 )
					.Set( "24", 9 )
					.Set( "25", 29 )
					.Set( "26", 14 )
					.Set( "27", 6 )
					.Set( "28", 25 )
					.Set( "29", 10 )
					.Set( "30", 30 )
					.Set( "31", 23 )
					.Set( "32", 6 )
					.Set( "33", 26 )
					.Set( "34", 18 )
					.Set( "35", 3 )
					.Set( "36", 22 )
					.Set( "37", 14 )
					.Set( "38", 34 )
					.Set( "39", 19 )
					.Set( "40", 9 )
				;
				this.begin_day = Lang13.DoubleNullable( easters[yy_string] );

				if ( ( this.begin_day ??0) <= 9 ) {
					this.begin_day += 22;
					this.begin_month = 3;
				} else {
					this.begin_day -= 9;
					this.begin_month = 4;
				}
				this.end_day = ( this.begin_day ??0) + 1;
				this.end_month = this.begin_month;

				if ( ( this.end_day ??0) >= 32 && this.end_month == 3 ) {
					this.end_day -= 31;
					this.end_month++;
				}

				if ( ( this.end_day ??0) >= 31 && this.end_month == 4 ) {
					this.end_day -= 30;
					this.end_month++;
				}
				this.begin_day -= GlobalVars.days_early ?1:0;

				if ( ( this.begin_day ??0) <= 0 ) {
					
					if ( this.begin_month == 4 ) {
						this.begin_day += 31;
						this.begin_month--;
					}
				}
			}
			return base.shouldCelebrate( dd, mm, yy );
		}

		// Function from file: easter.dm
		public override string greet(  ) {
			return "Greetings! Have a Happy Easter and keep an eye out for Easter Bunnies!";
		}

	}

}