// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Clothing_Head_Helmet_Space_Hardsuit_Syndi : Obj_Item_Clothing_Head_Helmet_Space_Hardsuit {

		public Ent_Static linkedsuit = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.alt_desc = "A dual-mode advanced helmet designed for work in special operations. It is in combat mode. Property of Gorlex Marauders.";
			this.item_state = "syndie_helm";
			this.item_color = "syndi";
			this.armor = new ByTable().Set( "melee", 40 ).Set( "bullet", 50 ).Set( "laser", 30 ).Set( "energy", 15 ).Set( "bomb", 35 ).Set( "bio", 100 ).Set( "rad", 50 );
			this.action_button_name = "Toggle Helmet Mode";
			this.icon_state = "hardsuit1-syndi";
		}

		// Function from file: hardsuit.dm
		public Obj_Item_Clothing_Head_Helmet_Space_Hardsuit_Syndi ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;

			if ( this.loc is Obj_Item_Clothing_Suit_Space_Hardsuit_Syndi ) {
				this.linkedsuit = this.loc;
			}
			return;
		}

		// Function from file: hardsuit.dm
		public void toggle_hardsuit_mode( dynamic user = null ) {
			
			if ( this.linkedsuit != null ) {
				
				if ( this.on ) {
					this.linkedsuit.name = Lang13.Initial( this.linkedsuit, "name" );
					this.linkedsuit.desc = Lang13.Initial( this.linkedsuit, "desc" );
					((dynamic)this.linkedsuit).slowdown = 1;
					this.linkedsuit.flags |= 1;
					((dynamic)this.linkedsuit).cold_protection |= 2046;
				} else {
					this.linkedsuit.name += " (combat)";
					this.linkedsuit.desc = ((dynamic)this.linkedsuit).alt_desc;
					((dynamic)this.linkedsuit).slowdown = 0;
					this.linkedsuit.flags &= 65534;
					((dynamic)this.linkedsuit).cold_protection &= 63489;
				}
				this.linkedsuit.icon_state = "hardsuit" + this.on + "-" + this.item_color;
				((dynamic)this.linkedsuit).update_icon();
				((Mob)user).update_inv_wear_suit();
				((Mob)user).update_inv_w_uniform();
			}
			return;
		}

		// Function from file: hardsuit.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			dynamic C = null;

			
			if ( !( user.loc is Tile ) ) {
				user.WriteMsg( "<span class='warning'>You cannot toggle your helmet while in this " + user.loc + "!</span>" );
				return null;
			}
			this.on = !this.on;

			if ( this.on || Lang13.Bool( this.force ) ) {
				user.WriteMsg( "<span class='notice'>You switch your hardsuit to travel mode.</span>" );
				this.name = Lang13.Initial( this, "name" );
				this.desc = Lang13.Initial( this, "desc" );
				((Ent_Static)user).AddLuminosity( this.brightness_on );
				this.flags |= 1;
				this.flags_cover |= 20;
				this.flags_inv |= 13;
				this.cold_protection |= 1;
			} else {
				user.WriteMsg( "<span class='notice'>You switch your hardsuit to combat mode.</span>" );
				this.name += " (combat)";
				this.desc = this.alt_desc;
				((Ent_Static)user).AddLuminosity( -this.brightness_on );
				this.flags &= 65534;
				this.flags_cover &= 65515;
				this.flags_inv &= 65522;
				this.cold_protection &= 65534;
			}
			this.update_icon();
			GlobalFuncs.playsound( this.loc, "sound/mecha/mechmove03.ogg", 50, 1 );
			this.toggle_hardsuit_mode( user );
			((Mob)user).update_inv_head();

			if ( user is Mob_Living_Carbon ) {
				C = user;
				((Mob_Living_Carbon)C).head_update( this, true );
			}
			return null;
		}

		// Function from file: hardsuit.dm
		public override bool? update_icon( dynamic new_state = null, dynamic new_icon = null, int? new_px = null, int? new_py = null ) {
			this.icon_state = "hardsuit" + this.on + "-" + this.item_color;
			return null;
		}

	}

}