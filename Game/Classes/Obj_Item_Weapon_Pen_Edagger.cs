// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Item_Weapon_Pen_Edagger : Obj_Item_Weapon_Pen {

		public bool on = false;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.origin_tech = "combat=3;syndicate=5";
			this.attack_verb = new ByTable(new object [] { "slashed", "stabbed", "sliced", "torn", "ripped", "diced", "cut" });
		}

		public Obj_Item_Weapon_Pen_Edagger ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: pen.dm
		public override bool? update_icon( dynamic new_state = null, dynamic new_icon = null, int? new_px = null, int? new_py = null ) {
			
			if ( this.on ) {
				this.icon_state = "edagger";
				this.item_state = "edagger";
			} else {
				this.icon_state = Lang13.Initial( this, "icon_state" );
				this.item_state = Lang13.Initial( this, "item_state" );
			}
			return null;
		}

		// Function from file: pen.dm
		public override dynamic attack_self( dynamic user = null, dynamic flag = null, bool? emp = null ) {
			
			if ( this.on ) {
				this.on = false;
				this.force = Lang13.Initial( this, "force" );
				this.w_class = Lang13.Initial( this, "w_class" );
				this.name = Lang13.Initial( this, "name" );
				this.hitsound = Lang13.Initial( this, "hitsound" );
				this.embed_chance = Lang13.Initial( this, "embed_chance" );
				this.throwforce = Lang13.Initial( this, "throwforce" );
				GlobalFuncs.playsound( user, "sound/weapons/saberoff.ogg", 5, 1 );
				user.WriteMsg( "<span class='warning'>" + this + " can now be concealed.</span>" );
			} else {
				this.on = true;
				this.force = 18;
				this.w_class = 3;
				this.name = "energy dagger";
				this.hitsound = "sound/weapons/blade1.ogg";
				this.embed_chance = 100;
				this.throwforce = 35;
				GlobalFuncs.playsound( user, "sound/weapons/saberon.ogg", 5, 1 );
				user.WriteMsg( "<span class='warning'>" + this + " is now active.</span>" );
			}
			this.update_icon();
			return null;
		}

	}

}