// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class RoundEvent_Falsealarm : RoundEvent {

		protected override void __FieldInit() {
			base.__FieldInit();

			this.endWhen = 1;
		}

		// Function from file: false_alarm.dm
		public override void announce(  ) {
			ByTable events_list = null;
			RoundEventControl E = null;
			Type _event = null;
			dynamic event_control = null;
			dynamic Event = null;

			events_list = new ByTable();

			foreach (dynamic _a in Lang13.Enumerate( GlobalVars.SSevent.control, typeof(RoundEventControl) )) {
				E = _a;
				

				if ( Lang13.Bool( E.holidayID ) || E.wizardevent ) {
					continue;
				}

				if ( E.earliest_start >= Game13.time ) {
					continue;
				}
				_event = E.typepath;

				if ( Convert.ToDouble( Lang13.Initial( _event, "announceWhen" ) ) <= 0 ) {
					continue;
				}
				events_list.Add( E );
			}
			event_control = Rand13.PickFromTable( events_list );

			if ( Lang13.Bool( event_control ) ) {
				Event = Lang13.Call( event_control.typepath );
				GlobalFuncs.message_admins( "False Alarm: " + Event );
				((RoundEvent)Event).kill();
				Event.announce();
			}
			return;
		}

	}

}