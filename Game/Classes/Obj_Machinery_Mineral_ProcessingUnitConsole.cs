// FILE AUTOGENERATED BY SOM13. DO NOT EDIT YET.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Obj_Machinery_Mineral_ProcessingUnitConsole : Obj_Machinery_Mineral {

		public dynamic machine = null;
		public int machinedir = 4;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.anchored = 1;
			this.icon = "icons/obj/machines/mining_machines.dmi";
			this.icon_state = "console";
		}

		// Function from file: machine_processing.dm
		public Obj_Machinery_Mineral_ProcessingUnitConsole ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			Task13.Schedule( 7, (Task13.Closure)(() => {
				this.machine = Lang13.FindIn( typeof(Obj_Machinery_Mineral_ProcessingUnit), Map13.GetStep( this, this.machinedir ) );

				if ( Lang13.Bool( this.machine ) ) {
					this.machine.CONSOLE = this;
				} else {
					GlobalFuncs.qdel( this );
				}
				return;
			}));
			return;
		}

		// Function from file: machine_processing.dm
		public override dynamic Topic( string href = null, ByTable href_list = null, dynamic hsrc = null ) {
			
			if ( Lang13.Bool( base.Topic( href, href_list, (object)(hsrc) ) ) ) {
				return null;
			}
			Task13.User.set_machine( this );
			this.add_fingerprint( Task13.User );

			if ( Lang13.Bool( href_list["sel_iron"] ) ) {
				
				if ( href_list["sel_iron"] == "yes" ) {
					this.machine.selected_iron = true;
				} else {
					this.machine.selected_iron = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_glass"] ) ) {
				
				if ( href_list["sel_glass"] == "yes" ) {
					this.machine.selected_glass = true;
				} else {
					this.machine.selected_glass = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_plasma"] ) ) {
				
				if ( href_list["sel_plasma"] == "yes" ) {
					this.machine.selected_plasma = true;
				} else {
					this.machine.selected_plasma = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_uranium"] ) ) {
				
				if ( href_list["sel_uranium"] == "yes" ) {
					this.machine.selected_uranium = true;
				} else {
					this.machine.selected_uranium = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_gold"] ) ) {
				
				if ( href_list["sel_gold"] == "yes" ) {
					this.machine.selected_gold = true;
				} else {
					this.machine.selected_gold = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_silver"] ) ) {
				
				if ( href_list["sel_silver"] == "yes" ) {
					this.machine.selected_silver = true;
				} else {
					this.machine.selected_silver = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_diamond"] ) ) {
				
				if ( href_list["sel_diamond"] == "yes" ) {
					this.machine.selected_diamond = true;
				} else {
					this.machine.selected_diamond = false;
				}
			}

			if ( Lang13.Bool( href_list["sel_clown"] ) ) {
				
				if ( href_list["sel_clown"] == "yes" ) {
					this.machine.selected_clown = true;
				} else {
					this.machine.selected_clown = false;
				}
			}

			if ( Lang13.Bool( href_list["set_on"] ) ) {
				
				if ( href_list["set_on"] == "on" ) {
					this.machine.on = 1;
				} else {
					this.machine.on = 0;
				}
			}
			this.updateUsrDialog();
			return null;
		}

		// Function from file: machine_processing.dm
		public override dynamic attack_hand( dynamic a = null, bool? b = null, bool? c = null ) {
			string dat = null;

			dat = "<b>Smelter control console</b><br><br>";

			if ( this.machine.ore_iron != 0 || this.machine.ore_glass != 0 || this.machine.ore_plasma != 0 || this.machine.ore_uranium != 0 || this.machine.ore_gold != 0 || this.machine.ore_silver != 0 || this.machine.ore_diamond != 0 || this.machine.ore_clown != 0 || this.machine.ore_adamantine ) {
				
				if ( this.machine.ore_iron != 0 ) {
					
					if ( this.machine.selected_iron ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_iron=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_iron=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Iron: " + this.machine.ore_iron + "<br>";
				} else {
					this.machine.selected_iron = false;
				}

				if ( this.machine.ore_glass != 0 ) {
					
					if ( this.machine.selected_glass ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_glass=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_glass=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Sand: " + this.machine.ore_glass + "<br>";
				} else {
					this.machine.selected_glass = false;
				}

				if ( this.machine.ore_plasma != 0 ) {
					
					if ( this.machine.selected_plasma ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_plasma=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_plasma=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Plasma: " + this.machine.ore_plasma + "<br>";
				} else {
					this.machine.selected_plasma = false;
				}

				if ( this.machine.ore_uranium != 0 ) {
					
					if ( this.machine.selected_uranium ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_uranium=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_uranium=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Uranium: " + this.machine.ore_uranium + "<br>";
				} else {
					this.machine.selected_uranium = false;
				}

				if ( this.machine.ore_gold != 0 ) {
					
					if ( this.machine.selected_gold ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_gold=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_gold=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Gold: " + this.machine.ore_gold + "<br>";
				} else {
					this.machine.selected_gold = false;
				}

				if ( this.machine.ore_silver != 0 ) {
					
					if ( this.machine.selected_silver ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_silver=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_silver=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Silver: " + this.machine.ore_silver + "<br>";
				} else {
					this.machine.selected_silver = false;
				}

				if ( this.machine.ore_diamond != 0 ) {
					
					if ( this.machine.selected_diamond ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_diamond=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_diamond=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Diamond: " + this.machine.ore_diamond + "<br>";
				} else {
					this.machine.selected_diamond = false;
				}

				if ( this.machine.ore_clown != 0 ) {
					
					if ( this.machine.selected_clown ) {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_clown=no'><font color='green'>Smelting</font></A> " ).ToString();
					} else {
						dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";sel_clown=yes'><font color='red'>Not smelting</font></A> " ).ToString();
					}
					dat += "Bananium: " + this.machine.ore_clown + "<br>";
				} else {
					this.machine.selected_clown = false;
				}
				dat += "Machine is currently ";

				if ( Lang13.Bool( this.machine.on ) == true ) {
					dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";set_on=off'>On</A> " ).ToString();
				} else {
					dat += new Txt( "<A href='?src=" ).Ref( this ).str( ";set_on=on'>Off</A> " ).ToString();
				}
			} else {
				dat += "---No Materials Loaded---";
			}
			Interface13.Browse( a, "" + dat, "window=console_processing_unit" );
			return null;
		}

	}

}