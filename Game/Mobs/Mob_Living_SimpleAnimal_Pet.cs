// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Mob_Living_SimpleAnimal_Pet : Mob_Living_SimpleAnimal {

		public dynamic pcollar = null;
		public Image collar = null;
		public Image pettag = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.mob_size = 1;
			this.icon = "icons/mob/pets.dmi";
		}

		// Function from file: pet.dm
		public Mob_Living_SimpleAnimal_Pet ( dynamic loc = null ) : base( (object)(loc) ) {
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;

			if ( Lang13.Bool( this.pcollar ) ) {
				this.pcollar = new Obj_Item_Clothing_Tie_Petcollar( this );
				this.regenerate_icons();
			}
			return;
		}

		// Function from file: pet.dm
		public override bool regenerate_icons(  ) {
			this.overlays.Cut();
			this.overlays.Add( this.collar );
			this.overlays.Add( this.pettag );
			return false;
		}

		// Function from file: pet.dm
		public override bool death( bool? gibbed = null, bool? toast = null ) {
			base.death( gibbed, toast );
			this.regenerate_icons();
			return false;
		}

		// Function from file: pet.dm
		public override void revive(  ) {
			base.revive();
			this.regenerate_icons();
			return;
		}

		// Function from file: pet.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			dynamic P = null;
			dynamic i = null;

			
			if ( A is Obj_Item_Clothing_Tie_Petcollar && !Lang13.Bool( this.pcollar ) ) {
				P = A;
				this.pcollar = P;
				this.collar = new Image( "icons/mob/pets.dmi", this, "" + this.icon_state + "collar" );
				this.pettag = new Image( "icons/mob/pets.dmi", this, "" + this.icon_state + "tag" );
				this.regenerate_icons();
				user.WriteMsg( "<span class='notice'>You put the " + P + " around " + this + "'s neck.</span>" );

				if ( Lang13.Bool( P.tagname ) ) {
					this.real_name = new Txt().proper().item( P.tagname ).ToString();
					this.name = this.real_name;
				}
				GlobalFuncs.qdel( P );
				return null;
			}

			if ( A is Obj_Item_Weapon_Newspaper ) {
				
				if ( !( this.stat != 0 ) ) {
					((Ent_Static)user).visible_message( "" + user + " baps " + this.name + " on the nose with the rolled up " + A + "." );
					Task13.Schedule( 0, (Task13.Closure)(() => {
						
						foreach (dynamic _a in Lang13.Enumerate( new ByTable(new object [] { 1, 2, 4, 8, 4, 2, 1, 2 }) )) {
							i = _a;
							
							this.dir = Convert.ToInt32( i );
							Task13.Sleep( 1 );
						}
						return;
					}));
				}
			} else {
				base.attackby( (object)(A), (object)(user), _params, silent, replace_spent );
			}
			return null;
		}

	}

}