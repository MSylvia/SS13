// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Mob_Living_SimpleAnimal_Hostile_Retaliate_Goat : Mob_Living_SimpleAnimal_Hostile_Retaliate {

		public Obj_Udder udder = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_living = "goat";
			this.icon_dead = "goat_dead";
			this.speak = new ByTable(new object [] { "EHEHEHEHEH", "eh?" });
			this.speak_emote = new ByTable(new object [] { "brays" });
			this.emote_hear = new ByTable(new object [] { "brays." });
			this.emote_see = new ByTable(new object [] { "shakes its head.", "stamps a foot.", "glares around." });
			this.speak_chance = 1;
			this.turns_per_move = 5;
			this.butcher_results = new ByTable().Set( typeof(Obj_Item_Weapon_ReagentContainers_Food_Snacks_Meat_Slab), 4 );
			this.response_help = "pets";
			this.response_disarm = "gently pushes aside";
			this.response_harm = "kicks";
			this.faction = new ByTable(new object [] { "neutral" });
			this.attack_same = 1;
			this.attacktext = "kicks";
			this.attack_sound = "sound/weapons/punch1.ogg";
			this.health = 40;
			this.melee_damage_lower = 1;
			this.melee_damage_upper = 2;
			this.icon_state = "goat";
			this.see_in_dark = 6;
		}

		// Function from file: farm_animals.dm
		public Mob_Living_SimpleAnimal_Hostile_Retaliate_Goat ( dynamic loc = null ) : base( (object)(loc) ) {
			this.udder = new Obj_Udder();
			// Warning: Super call was HERE! If anything above HERE is needed by the super call, it might break!;
			return;
		}

		// Function from file: farm_animals.dm
		public override dynamic attackby( dynamic A = null, dynamic user = null, string _params = null, bool? silent = null, bool? replace_spent = null ) {
			
			if ( this.stat == 0 && A is Obj_Item_Weapon_ReagentContainers_Glass ) {
				this.udder.milkAnimal( A, user );
			} else {
				base.attackby( (object)(A), (object)(user), _params, silent, replace_spent );
			}
			return null;
		}

		// Function from file: farm_animals.dm
		public override bool Move( dynamic NewLoc = null, int? Dir = null, int step_x = 0, int step_y = 0 ) {
			dynamic SV = null;

			base.Move( (object)(NewLoc), Dir, step_x, step_y );

			if ( !( this.stat != 0 ) ) {
				
				if ( Lang13.Bool( Lang13.FindIn( typeof(Obj_Effect_Spacevine), this.loc ) ) ) {
					SV = Lang13.FindIn( typeof(Obj_Effect_Spacevine), this.loc );
					((Obj_Effect_Spacevine)SV).eat( this );
				}
			}
			return false;
		}

		// Function from file: farm_animals.dm
		public override bool Retaliate(  ) {
			base.Retaliate();
			this.visible_message( new Txt( "<span class='danger'>" ).item( this ).str( " gets an evil-looking gleam in " ).his_her_its_their().str( " eye.</span>" ).ToString() );
			return false;
		}

		// Function from file: farm_animals.dm
		public override bool Life(  ) {
			bool _default = false;

			dynamic SV = null;
			dynamic direction = null;
			Tile step = null;

			_default = base.Life();

			if ( _default ) {
				
				if ( !( this.enemies.len != 0 ) && Rand13.PercentChance( 1 ) ) {
					this.Retaliate();
				}

				if ( this.enemies.len != 0 && Rand13.PercentChance( 10 ) ) {
					this.enemies = new ByTable();
					this.LoseTarget();
					this.visible_message( "<span class='notice'>" + this + " calms down.</span>" );
				}
			}

			if ( this.stat == 0 ) {
				this.udder.generateMilk();

				if ( Lang13.Bool( Lang13.FindIn( typeof(Obj_Effect_Spacevine), this.loc ) ) ) {
					SV = Lang13.FindIn( typeof(Obj_Effect_Spacevine), this.loc );
					((Obj_Effect_Spacevine)SV).eat( this );
				}

				if ( !( this.pulledby != null ) ) {
					
					foreach (dynamic _a in Lang13.Enumerate( GlobalFuncs.shuffle( new ByTable(new object [] { 1, 2, 4, 8, 5, 6, 9, 10 }) ) )) {
						direction = _a;
						
						step = Map13.GetStep( this, Convert.ToInt32( direction ) );

						if ( step != null ) {
							
							if ( Lang13.Bool( Lang13.FindIn( typeof(Obj_Effect_Spacevine), step ) ) ) {
								this.Move( step, Map13.GetDistance( this, step ) );
							}
						}
					}
				}
			}
			return _default;
		}

		// Function from file: farm_animals.dm
		public override dynamic Destroy(  ) {
			GlobalFuncs.qdel( this.udder );
			this.udder = null;
			return base.Destroy();
		}

	}

}