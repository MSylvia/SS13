// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Mob_Living_SimpleAnimal_Hostile_Retaliate_Snowman : Mob_Living_SimpleAnimal_Hostile_Retaliate {

		public dynamic hat = null;
		public dynamic carrot = null;

		protected override void __FieldInit() {
			base.__FieldInit();

			this.icon_living = "snowman";
			this.speak = new ByTable(new object [] { "Good day sir.", "Would you happen to have a carrot for my nose?", "Cold day, isn't it?", "What a pleasant weather." });
			this.speak_emote = new ByTable(new object [] { "says" });
			this.emote_hear = new ByTable(new object [] { "says" });
			this.emote_see = new ByTable(new object [] { "hums" });
			this.speak_chance = 2.5;
			this.turns_per_move = 3;
			this.response_help = "hugs";
			this.response_disarm = "gently pushes aside";
			this.response_harm = "stomps";
			this.friendly = "hugs";
			this.faction = "snow";
			this.health = 40;
			this.ranged = true;
			this.retreat_distance = 5;
			this.minimum_distance = 3;
			this.projectilesound = "sound/weapons/punchmiss.ogg";
			this.projectiletype = typeof(Obj_Item_Projectile_Snowball);
			this.can_butcher = false;
			this.minbodytemp = 0;
			this.maxbodytemp = 304.41;
			this.heat_damage_per_tick = 5;
			this.bodytemperature = 270;
			this.icon = "icons/mob/snowman.dmi";
			this.icon_state = "snowman";
		}

		public Mob_Living_SimpleAnimal_Hostile_Retaliate_Snowman ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: snowman.dm
		public override dynamic attackby( dynamic a = null, dynamic b = null, dynamic c = null ) {
			
			if ( !Lang13.Bool( this.carrot ) && a is Obj_Item_Weapon_ReagentContainers_Food_Snacks_Grown_Carrot ) {
				
				if ( Lang13.Bool( b.drop_item( a, this ) ) ) {
					this.visible_message( new Txt( "<span class='notice'>" ).item( b ).str( " puts " ).a( a ).item().str( " on " ).the( this ).item().str( "'s nose.</span>" ).ToString() );
					this.carrot = a;
					this.overlays.Add( "snowman_carrot" );
					this.speak.Remove( "Would you happen to have a carrot for my nose?" );
					this.say( "Ah, most excellent!" );

					if ( Rand13.PercentChance( 30 ) ) {
						Lang13.Call( typeof(Obj_Item_Weapon_WinterGift).GetMethod( "pick_a_gift" ), this.loc );
					}
				}
			} else if ( a is Obj_Item_Clothing_Head ) {
				
				if ( Lang13.Bool( this.hat ) ) {
					this.hat.loc = GlobalFuncs.get_turf( this );
					this.overlays.Remove( new Image( "icons/mob/head.dmi", this.hat.icon_state ) );
					this.hat = null;
				} else {
					this.speak.Add( "I feel so dandy!" );
				}

				if ( Lang13.Bool( b.drop_item( a, this ) ) ) {
					this.hat = a;
					this.overlays.Add( new Image( "icons/mob/head.dmi", this.hat.icon_state ) );
				}
			} else {
				base.attackby( (object)(a), (object)(b), (object)(c) );
			}
			return null;
		}

		// Function from file: snowman.dm
		public override bool Retaliate(  ) {
			base.Retaliate();

			if ( !Lang13.Bool( this.stat ) ) {
				this.say( Rand13.Pick(new object [] { "You, come fight me!", "I say!", "Coward!" }) );
			}
			return false;
		}

		// Function from file: snowman.dm
		public override bool Life(  ) {
			dynamic T = null;

			
			if ( this.timestopped ) {
				return false;
			}
			base.Life();

			if ( !Lang13.Bool( this.ckey ) && !Lang13.Bool( this.stat ) ) {
				
				if ( this.loc is Tile && !( this.resting != 0 ) && !Lang13.Bool( this.locked_to ) ) {
					this.turns_since_move++;

					if ( this.turns_since_move >= Convert.ToDouble( this.turns_per_move ) ) {
						this.Move( Map13.GetStep( this, Convert.ToInt32( Rand13.Pick(new object [] { 4, 8 }) ) ) );
						this.turns_since_move = 0;
					}
				}
			}

			if ( !Lang13.Bool( this.stat ) && this.enemies.len != 0 && Rand13.PercentChance( 5 ) ) {
				this.enemies = new ByTable();
				this.LoseTarget();
				this.say( "Whatever." );
			}

			if ( Lang13.Bool( this.stat ) ) {
				this.visible_message( "<span class='game say'><span class='name'>" + this.name + "</span> murmurs, " + Rand13.Pick(new object [] { "Oh my snowballs...", "I will...be back..." }) + "</span>" );
				this.visible_message( new Txt().the( this ).item().str( " collapses in a pile of snow." ).ToString() );
				T = GlobalFuncs.get_turf( this );
				new Obj_Item_Stack_Sheet_Snow( T, 1 );
				new Obj_Item_Stack_Sheet_Snow( T, 1 );
				new Obj_Item_Stack_Sheet_Snow( T, 1 );

				if ( Lang13.Bool( this.hat ) ) {
					this.hat.loc = T;
				}

				if ( Lang13.Bool( this.carrot ) ) {
					this.carrot.loc = T;
				}
				GlobalFuncs.qdel( this );
			} else if ( this.fire_alert != 0 ) {
				this.say( Rand13.Pick(new object [] { "Oh god the heat...", "I'm meltiiinggg...", "Someone turn off the heater!" }) );
			}
			this.regenerate_icons();
			return false;
		}

	}

}