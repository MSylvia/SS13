// FILE AUTOGENERATED BY SOMNIUM13.

using System;
using Somnium.Engine.ByImpl;

namespace Somnium.Game {
	class Mob_Camera_AiEye_Remote : Mob_Camera_AiEye {

		public dynamic sprint = 10;
		public int cooldown = 0;
		public bool acceleration = true;
		public dynamic eye_user = null;
		public Obj_Machinery_Computer_CameraAdvanced origin = null;
		public bool initialized = false;
		public bool visible_icon = false;
		public Image user_image = null;

		public Mob_Camera_AiEye_Remote ( dynamic loc = null ) : base( (object)(loc) ) {
			
		}

		// Function from file: camera_advanced.dm
		public override bool relaymove( Mob user = null, int? direction = null ) {
			dynamic initial = null;
			int max_sprint = 0;
			int? i = null;
			dynamic step = null;

			initial = Lang13.Initial( this, "sprint" );
			max_sprint = 50;

			if ( this.cooldown != 0 && this.cooldown < Game13.timeofday ) {
				this.sprint = initial;
			}
			i = null;
			i = 0;

			while (( i ??0) < Num13.MaxInt( Convert.ToInt32( this.sprint ), Convert.ToInt32( initial ) )) {
				step = GlobalFuncs.get_turf( Map13.GetStep( this, direction ??0 ) );

				if ( Lang13.Bool( step ) ) {
					this.setLoc( step );
				}
				i += 20;
			}
			this.cooldown = Game13.timeofday + 5;

			if ( this.acceleration ) {
				this.sprint = Num13.MinInt( Convert.ToInt32( this.sprint + 0.5 ), max_sprint );
			} else {
				this.sprint = initial;
			}
			return false;
		}

		// Function from file: camera_advanced.dm
		public override void setLoc( dynamic T = null ) {
			
			if ( Lang13.Bool( this.eye_user ) ) {
				
				if ( !( this.eye_user.loc is Tile ) ) {
					return;
				}
				T = GlobalFuncs.get_turf( T );
				this.loc = T;
				GlobalVars.cameranet.visibility( this );

				if ( this.visible_icon ) {
					
					if ( Lang13.Bool( this.eye_user.client ) ) {
						this.eye_user.client.images.Remove( this.user_image );
						this.user_image = new Image( this.icon, this.loc, this.icon_state, GlobalVars.FLY_LAYER );
						this.eye_user.client.images.Add( this.user_image );
					}
				}
			}
			return;
		}

		// Function from file: camera_advanced.dm
		public override Client GetViewerClient(  ) {
			
			if ( Lang13.Bool( this.eye_user ) ) {
				return this.eye_user.client;
			}
			return null;
		}

		// Function from file: camera_advanced.dm
		public override dynamic Destroy(  ) {
			this.eye_user = null;
			this.origin = null;
			return base.Destroy();
		}

	}

}